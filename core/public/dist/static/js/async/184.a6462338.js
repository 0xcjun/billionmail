"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["184"],{6949:function(e,t,l){l.d(t,{Z:()=>o});var a=l(2822),s=l(2965),i=l(209);let o=e=>{let{fetchFn:t,params:l,loading:o=!1,immediate:n=!1}=e,d=(0,i.iH)(o),r=(0,i.iH)([]),c=(0,i.iH)(0),u=(0,i.iH)(l),p=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&(l.page=1),t){d.value=!0;try{let e=await t(u.value);(0,s.Kn)(e)&&(r.value=(0,s.kJ)(e.list)?e.list:[],c.value=(0,a.Z)(e.total)?e.total:0)}finally{d.value=!1}}};return n&&p(),{loading:d,tableList:r,tableTotal:c,tableParams:u,getTableData:p}}},3312:function(e,t,l){l.d(t,{d:()=>o});var a=l(209),s=l(8429);let i=Symbol("MODAL_INJECT"),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:l,onCancel:o,onConfirm:n}=e,d=(0,a.qj)({});return l?[(0,a.aZ)({setup(s,o){let{attrs:n,slots:r}=o;return(0,a.JJ)(i,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(d,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,a.h)(l,{...s,...n},r)}}),d]:[(0,a.aZ)({setup(t,l){let{attrs:r,slots:c}=l,u=(0,a.f3)(i),p=(0,a.iH)(!1);return d.open=()=>{var t;p.value=!0,null===(t=e.onChangeState)||void 0===t||t.call(e,p.value)},d.close=()=>{p.value=!1},d.setState=t=>{var l;null==u||u.setState(t),null===(l=e.onChangeState)||void 0===l||l.call(e,p.value)},d.getState=()=>(null==u?void 0:u.state)??{},null==u||u.extendApi(d),()=>(0,a.Wm)(s.Z,(0,a.dG)({show:p.value},t,r,{onCancel:o,onConfirm:n,"onUpdate:show":e=>{p.value=e??!1}}),{default:()=>{var e;return[null===(e=c.default)||void 0===e?void 0:e.call(c)]}})}}),d]}},4652:function(e,t,l){l.d(t,{Z:()=>i});var a=l(7714),s=l(209);let i=(0,s.aZ)({__name:"index",setup(e){let t=!!(0,s.Rr)().toolsLeft,l=!!(0,s.Rr)().toolsRight,i=!!(0,s.Rr)().pageLeft||!!(0,s.Rr)().pageRight;return(e,o)=>{let n=a.Z;return(0,s.wg)(),(0,s.iD)("div",null,[t||l?((0,s.wg)(),(0,s.j4)(n,{key:0,class:"items-center mb-16px",justify:"space-between"},{default:(0,s.w5)(()=>[(0,s.Wm)(n,{class:"items-center",size:8},{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"toolsLeft")]),_:3}),(0,s.Wm)(n,{class:"items-center",size:8},{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,s.kq)("",!0),(0,s.WI)(e.$slots,"table"),(0,s.SU)(i)?((0,s.wg)(),(0,s.j4)(n,{key:1,class:"items-center mt-16px",justify:"space-between"},{default:(0,s.w5)(()=>[(0,s._)("div",null,[(0,s.WI)(e.$slots,"pageLeft")]),(0,s.Wm)(n,null,{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,s.kq)("",!0),(0,s.WI)(e.$slots,"modal")])}}})},3951:function(e,t,l){l.d(t,{Z:()=>i});var a=l(9833),s=l(209);let i=(0,s.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:l}=t,i=(0,s.iH)(null);return l({validate:()=>{var e;return null===(e=i.value)||void 0===e?void 0:e.validate()},restoreValidation:()=>{var e;return null===(e=i.value)||void 0===e?void 0:e.restoreValidation()}}),(e,t)=>{let l=a.Z;return(0,s.wg)(),(0,s.j4)(l,(0,s.dG)(e.$attrs,{ref_key:"formRef",ref:i,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement,"show-require-mark":!1}),{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},6818:function(e,t,l){l.d(t,{Z:()=>n});var a=l(1327),s=l(209),i=l(2965);let o={class:"ml-8px text-14px"},n=(0,s.aZ)({__name:"index",props:(0,s.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,s.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:l}=t,n=(0,s.Fl)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),d=(0,s.tT)(e,"page"),r=(0,s.tT)(e,"pageSize"),c=e=>{d.value=e,l("refresh")},u=e=>{d.value=1,r.value=e,p(e),l("refresh")},p=e=>{n.value&&(0,i.qQ)(n.value,String(e))};return(()=>{if(n.value){let e=(0,i.$o)(n.value);e&&(r.value=(0,i.Dx)(e))}})(),(e,t)=>{let l=a.Z;return(0,s.wg)(),(0,s.j4)(l,(0,s.dG)(e.$attrs,{page:d.value,"onUpdate:page":[t[0]||(t[0]=e=>d.value=e),c],"page-size":r.value,"onUpdate:pageSize":[t[1]||(t[1]=e=>r.value=e),u],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,s.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,s.w5)(e=>{let{itemCount:t}=e;return[(0,s._)("span",o," Total "+(0,s.zw)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},2777:function(e,t,l){l.r(t),l.d(t,{default:()=>Z});var a=l(4652),s=l(6818),i=l(3435),o=l(209),n=l(7714),d=l(3447),r=l(2965),c=l(6949),u=l(3312),p=l(4203);let{t:g}=l(4958).Z.global,m=e=>p.e.get("/mail_bcc/list",{params:e}),v=e=>p.e.post("/mail_bcc/add",e,{fetchOptions:{loading:g("settings.bcc.loading.adding"),successMessage:!0}}),f=e=>p.e.post("/mail_bcc/edit",e,{fetchOptions:{loading:g("settings.bcc.loading.saving"),successMessage:!0}}),b=e=>p.e.post("/mail_bcc/delete",e,{fetchOptions:{loading:g("settings.bcc.loading.deleting"),successMessage:!0}});var w=l(3951),h=l(9946),S=l(5891),y=l(6883),U=l(8454),k=l(5778);let _=(0,o.aZ)({__name:"BccForm",setup(e){let{t}=(0,k.QT)(),l=(0,o.iH)(!1),a=(0,o.Fl)(()=>l.value?t("settings.bcc.edit"):t("settings.bcc.add")),s=(0,o.AE)("formRef"),i=(0,o.iH)(0),n=(0,o.qj)({address:"",goto:"",type:"sender",active:1}),d=(0,o.Fl)(()=>[{label:t("settings.bcc.types.sender"),value:"sender"},{label:t("settings.bcc.types.recipient"),value:"recipient"}]),r={},[c,p]=(0,u.d)({onChangeState:e=>{if(e){let e=p.getState(),{row:t}=e;l.value=e.isEdit,t&&(i.value=t.id,n.address=t.address,n.goto=t.goto,n.type=t.type,n.active=t.active)}else i.value=0,n.address="",n.goto="",n.type="sender",n.active=1},onConfirm:async()=>{var e;await (null===(e=s.value)||void 0===e?void 0:e.validate()),l.value?await f({id:i.value,...(0,o.IU)(n)}):await v((0,o.IU)(n)),p.getState().refresh()}});return(e,i)=>{let u=U.Z,p=y.ZP,g=S.Z,m=h.Z,v=w.Z;return(0,o.wg)(),(0,o.j4)((0,o.SU)(c),{title:(0,o.SU)(a),width:"500"},{default:(0,o.w5)(()=>[(0,o.Wm)(v,{ref_key:"formRef",ref:s,class:"pt-8px",model:(0,o.SU)(n),rules:r},{default:(0,o.w5)(()=>[(0,o.Wm)(p,{label:(0,o.SU)(t)("settings.bcc.needCopy"),path:"user"},{default:(0,o.w5)(()=>[(0,o.Wm)(u,{value:(0,o.SU)(n).address,"onUpdate:value":i[0]||(i[0]=e=>(0,o.SU)(n).address=e),disabled:(0,o.SU)(l),placeholder:(0,o.SU)(t)("settings.bcc.placeholders.needCopy")},null,8,["value","disabled","placeholder"])]),_:1},8,["label"]),(0,o.Wm)(p,{label:(0,o.SU)(t)("settings.bcc.copyTo"),path:"forward_user"},{default:(0,o.w5)(()=>[(0,o.Wm)(u,{value:(0,o.SU)(n).goto,"onUpdate:value":i[1]||(i[1]=e=>(0,o.SU)(n).goto=e),placeholder:(0,o.SU)(t)("settings.bcc.placeholders.copyTo")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,o.Wm)(p,{label:(0,o.SU)(t)("settings.bcc.type"),path:"type"},{default:(0,o.w5)(()=>[(0,o.Wm)(g,{value:(0,o.SU)(n).type,"onUpdate:value":i[2]||(i[2]=e=>(0,o.SU)(n).type=e),options:(0,o.SU)(d)},null,8,["value","options"])]),_:1},8,["label"]),(0,o.Wm)(p,{label:(0,o.SU)(t)("settings.bcc.status"),"show-feedback":!1},{default:(0,o.w5)(()=>[(0,o.Wm)(m,{value:(0,o.SU)(n).active,"onUpdate:value":i[3]||(i[3]=e=>(0,o.SU)(n).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title"])}}});function W(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,o.lA)(e)}let Z=(0,o.aZ)({__name:"index",setup(e){let{t}=(0,k.QT)(),{tableParams:l,tableList:p,loading:g,tableTotal:v,getTableData:f}=(0,c.Z)({loading:!0,immediate:!0,params:{page:1,page_size:10,domain:"",keyword:""},fetchFn:m}),w=(0,o.iH)([{key:"address",title:()=>t("settings.bcc.needCopy"),ellipsis:{tooltip:!0}},{key:"goto",title:()=>t("settings.bcc.copyTo"),ellipsis:{tooltip:!0}},{key:"domain",title:()=>t("settings.bcc.domain"),ellipsis:{tooltip:!0}},{key:"type",title:()=>t("settings.bcc.type"),render:e=>t(`settings.bcc.types.${e.type}`)},{key:"active",title:()=>t("settings.bcc.status"),render:e=>(0,o.Wm)("div",{class:["text-16px",1===e.active?"text-primary":"text-error"]},[(0,o.Wm)("i",{class:[1===e.active?"i-mdi-success-circle":"i-mdi-remove-circle"]},null)])},{title:t("common.columns.actions"),key:"actions",align:"right",width:120,render:e=>{let l,a;return(0,o.Wm)(n.Z,{inline:!0},{default:()=>[(0,o.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{Z(e)}},W(l=t("common.actions.edit"))?l:{default:()=>[l]}),(0,o.Wm)(d.ZP,{type:"error",text:!0,onClick:()=>{z(e)}},W(a=t("common.actions.delete"))?a:{default:()=>[a]})]})}}]),[h,S]=(0,u.d)({component:_,state:{isEdit:!1,refresh:f}}),y=()=>{S.setState({isEdit:!1,row:null}),S.open()},U=()=>{f(!0)},Z=e=>{S.setState({isEdit:!0,row:e}),S.open()},z=e=>{(0,r.iG)({title:t("settings.bcc.delete.title",{address:e.address}),content:t("settings.bcc.delete.content"),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await b({id:e.id}),f()}})};return(e,t)=>{let n=i.Z,r=s.Z,c=a.Z;return(0,o.wg)(),(0,o.j4)(c,null,{toolsLeft:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(d.ZP),{type:"primary",onClick:y},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("settings.bcc.add")),1)]),_:1})]),toolsRight:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(d.ZP),{onClick:U},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("common.actions.refresh")),1)]),_:1})]),table:(0,o.w5)(()=>[(0,o.Wm)(n,{loading:(0,o.SU)(g),columns:(0,o.SU)(w),data:(0,o.SU)(p)},null,8,["loading","columns","data"])]),pageRight:(0,o.w5)(()=>[(0,o.Wm)(r,{page:(0,o.SU)(l).page,"onUpdate:page":t[0]||(t[0]=e=>(0,o.SU)(l).page=e),"page-size":(0,o.SU)(l).page_size,"onUpdate:pageSize":t[1]||(t[1]=e=>(0,o.SU)(l).page_size=e),"item-count":(0,o.SU)(v),onRefresh:(0,o.SU)(f)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(h))]),_:1})}}})}}]);