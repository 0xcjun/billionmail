"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["4880"],{33:function(e,t,a){a.d(t,{Z:()=>o});var l=a(65182),n=a(75887);let o=function(e){return"number"==typeof e||(0,n.Z)(e)&&"[object Number]"==(0,l.Z)(e)}},44971:function(e,t,a){a.d(t,{Z:()=>f});var l=a(90834),n=a(25595),o=a(51045),i=a(87209),r=a(96558),s=a(49858),u=a(23495),p=a(6126),c=a(85792);let d={name:"Flex",self:function(){return c.Z}},m=Object.assign(Object.assign({},o.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),f=(0,n.aZ)({name:"Flex",props:m,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:a}=(0,i.ZP)(e),u=(0,o.Z)("Flex","-flex",void 0,d,e,t);return{rtlEnabled:(0,r.V)("Flex",a,t),mergedClsPrefix:t,margin:(0,n.Fl)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,s.Tl)("gap",t)]:a}}=u.value,{row:n,col:o}=(0,l.yU)(a);return{horizontal:(0,l.fQ)(o),vertical:(0,l.fQ)(n)}})}},render(){let{vertical:e,reverse:t,align:a,inline:l,justify:o,margin:i,wrap:r,mergedClsPrefix:s,rtlEnabled:c}=this,d=(0,u.x)((0,p.z)(this),!1);return d.length?(0,n.h)("div",{role:"none",class:[`${s}-flex`,c&&`${s}-flex--rtl`],style:{display:l?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:o,flexWrap:!r||e?"nowrap":"wrap",alignItems:a,gap:`${i.vertical}px ${i.horizontal}px`}},d):null}})},20969:function(e,t,a){a.d(t,{WH:()=>r,hI:()=>i,iE:()=>c,mD:()=>p,sS:()=>u,uz:()=>f,vi:()=>d,yG:()=>m,yL:()=>s});var l=a(77527),n=a(86244);let{t:o}=l.Z.global,i=e=>n.e.get("/contact/group/list",{params:e}),r=()=>n.e.get("/contact/group/all"),s=e=>n.e.get("/contact/group/info",{params:e}),u=e=>n.e.post("/contact/group/create",e,{fetchOptions:{loading:o("contacts.group.loading.createGroup"),successMessage:!0}}),p=e=>n.e.post("/contact/group/update",e,{fetchOptions:{loading:o("contacts.group.loading.updateGroup"),successMessage:!0}}),c=e=>n.e.post("/contact/group/delete",e,{fetchOptions:{loading:o("contacts.group.loading.deleteGroup"),successMessage:!0}}),d=e=>n.e.post("/contact/group/contact_count",e),m=e=>n.e.post("/contact/group/export",e,{fetchOptions:{loading:o("contacts.group.loading.exportGroup"),successMessage:!0}}),f=e=>n.e.post("/contact/group/update",e,{fetchOptions:{loading:o("contacts.group.loading.saveSettings"),successMessage:!0}})},3449:function(e,t,a){a.d(t,{Z:()=>i});var l=a(33),n=a(43407),o=a(25595);let i=e=>{let{fetchFn:t,params:a,loading:i=!1,immediate:r=!1}=e,s=(0,o.iH)(i),u=(0,o.iH)([]),p=(0,o.iH)(0),c=(0,o.iH)(a),d=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&(a.page=1),t){s.value=!0;try{let e=await t(c.value);(0,n.Kn)(e)&&(u.value=(0,n.kJ)(e.list)?e.list:[],p.value=(0,l.Z)(e.total)?e.total:0)}finally{s.value=!1}}};return r&&d(),{loading:s,tableList:u,tableTotal:p,tableParams:c,getTableData:d}}},82646:function(e,t,a){a.d(t,{Z:()=>o});var l=a(85068),n=a(25595);let o=(0,n.aZ)({__name:"index",props:(0,n.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,n.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:o}=t,i=(0,n.iH)(null),r=(0,n.tT)(e,"value"),s=()=>{o("search",r.value)};return a({focus:()=>{var e;null==(e=i.value)||e.focus()}}),(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,(0,n.dG)({ref_key:"inputRef",ref:i,value:r.value,"onUpdate:value":t[0]||(t[0]=e=>r.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,n.D2)(s,["enter"])}),(0,n.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:s},t[1]||(t[1]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:s},t[2]||(t[2]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},22851:function(e,t,a){a.d(t,{Z:()=>r});var l=a(69820),n=a(99833),o=a(25595);let i={class:"leading-22px text-13px text-desc text-center"},r=(0,o.aZ)({__name:"index",setup(e){let t=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},a=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,r)=>{let s=n.ZP,u=(0,o.up)("i18n-t"),p=l.Z;return(0,o.wg)(),(0,o.j4)(p,null,{default:(0,o.w5)(()=>[(0,o._)("div",i,[(0,o.Wm)(u,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,o.w5)(()=>[(0,o.Wm)(s,{class:"text-13px",type:"primary",text:"",onClick:t},{default:(0,o.w5)(()=>r[0]||(r[0]=[(0,o._)("span",null,"Issues",-1),(0,o._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[0]})]),star:(0,o.w5)(()=>[(0,o.Wm)(s,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,o.w5)(()=>r[1]||(r[1]=[(0,o.Uk)(" Star "),(0,o._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[1]})]),_:1}),r[2]||(r[2]=(0,o._)("br",null,null,-1)),(0,o._)("span",null,(0,o.zw)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},25322:function(e,t,a){a.d(t,{Z:()=>o});var l=a(44971),n=a(25595);let o=(0,n.aZ)({__name:"index",setup(e){let t=!!(0,n.Rr)().toolsLeft,a=!!(0,n.Rr)().toolsRight,o=!!(0,n.Rr)().pageLeft||!!(0,n.Rr)().pageRight;return(e,i)=>{let r=l.Z;return(0,n.wg)(),(0,n.iD)("div",null,[t||a?((0,n.wg)(),(0,n.j4)(r,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,n.w5)(()=>[(0,n.Wm)(r,{class:"items-center",size:12},{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"toolsLeft")]),_:3}),(0,n.Wm)(r,{class:"items-center",size:12},{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,n.kq)("",!0),(0,n.WI)(e.$slots,"table"),(0,n.SU)(o)?((0,n.wg)(),(0,n.j4)(r,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,n.w5)(()=>[(0,n._)("div",null,[(0,n.WI)(e.$slots,"pageLeft")]),(0,n.Wm)(r,null,{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,n.kq)("",!0),(0,n.WI)(e.$slots,"modal")])}}})},80837:function(e,t,a){a.d(t,{Z:()=>r});var l=a(51559),n=a(25595),o=a(43407);let i={class:"ml-8px text-14px"},r=(0,n.aZ)({__name:"index",props:(0,n.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,n.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:a}=t,r=(0,n.Fl)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),s=(0,n.tT)(e,"page"),u=(0,n.tT)(e,"pageSize"),p=t=>{var l;null==(l=e.onUpdatePage)||l.call(e,t),a("refresh")},c=t=>{var l;s.value=1,null==(l=e.onUpdatePage)||l.call(e,1),d(t),a("refresh")},d=e=>{r.value&&(0,o.qQ)(r.value,String(e))};if(r.value){let e=(0,o.$o)(r.value);e&&(u.value=(0,o.Dx)(e))}return(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,(0,n.dG)(e.$attrs,{page:s.value,"onUpdate:page":[t[0]||(t[0]=e=>s.value=e),p],"page-size":u.value,"onUpdate:pageSize":[t[1]||(t[1]=e=>u.value=e),c],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,n.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,n.w5)(e=>{let{itemCount:t}=e;return[(0,n._)("span",i," Total "+(0,n.zw)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},27812:function(e,t,a){a.r(t),a.d(t,{default:()=>$});var l=a(25322),n=a(80837),o=a(19232),i=a(22851),r=a(82646),s=a(25595),u=a(99833),p=a(44971),c=a(16821),d=a(3449),m=a(43407),f=a(20969),g=a(21921),v=a(41074),w=a(46126),_=a(34909),h=a(85068),y=a(48812),x=a(23865);let S={class:"pt-12px"},U={class:"flex-1"},b={class:"mt-8px text-desc"},k={class:"mr-4px"},Z=`email,attributes
example1@example.com,"{""age"": ""13"", ""Gender"": ""XXX""}"
example2@example.com,"{""age"": ""45"", ""city"": ""XXX""}"
`,W=(0,s.aZ)({__name:"GroupAdd",setup(e){let{t}=(0,x.QT)(),a=(0,s.AE)("formRef"),l=(0,s.qj)({create_type:2,name:"",description:"",double_optin:0,file_data:"",file_type:""}),n={name:{required:!0,message:t("contacts.group.form.nameRequired"),trigger:"blur"}},o=[{label:"Single Opt-in",value:0},{label:"Double Opt-in",value:1}],i=e=>{let t=new FileReader;t.onload=t=>{var a;l.file_type=e.name.substring(e.name.lastIndexOf(".")+1),l.file_data=null==(a=t.target)?void 0:a.result},e.file&&t.readAsText(e.file)},r=async()=>{await (0,y.Sv)({file_path:"./template/example_recipients.csv"})},[p,d]=(0,c.d)({onChangeState:e=>{e&&(l.name="")},onConfirm:async()=>{var e;await (null==(e=a.value)?void 0:e.validate()),await (0,f.sS)((0,s.IU)(l));let t=d.getState();null==t||t.refresh()}});return(e,c)=>{let d=h.Z,m=_.ZP,f=w.Z,y=v.Z,x=u.ZP,W=g.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(p),{title:(0,s.SU)(t)("contacts.group.add.title"),width:"540"},{default:(0,s.w5)(()=>[(0,s._)("div",S,[(0,s.Wm)(W,{ref_key:"formRef",ref:a,model:(0,s.SU)(l),rules:n},{default:(0,s.w5)(()=>[(0,s.Wm)(m,{label:(0,s.SU)(t)("contacts.group.form.name"),path:"name"},{default:(0,s.w5)(()=>[(0,s.Wm)(d,{value:(0,s.SU)(l).name,"onUpdate:value":c[0]||(c[0]=e=>(0,s.SU)(l).name=e)},null,8,["value"])]),_:1},8,["label"]),(0,s.Wm)(m,{label:"List Type"},{default:(0,s.w5)(()=>[(0,s.Wm)(f,{value:(0,s.SU)(l).double_optin,"onUpdate:value":c[1]||(c[1]=e=>(0,s.SU)(l).double_optin=e),options:o},null,8,["value"])]),_:1}),(0,s.Wm)(m,{label:(0,s.SU)(t)("contacts.group.form.file"),path:"file_data"},{default:(0,s.w5)(()=>[(0,s._)("div",U,[(0,s.Wm)(y,{"is-upload":!1,accept:["csv"],onChange:i}),(0,s._)("div",b,[(0,s._)("span",k,(0,s.zw)((0,s.SU)(t)("contacts.group.fileUpload.hint")),1),(0,s.Wm)(x,{text:"",type:"primary",onClick:r},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("common.actions.download")),1)]),_:1})])])]),_:1},8,["label"]),(0,s.Wm)(m,{label:"Example raw CSV"},{default:(0,s.w5)(()=>[(0,s._)("pre",{class:"csv-example"},(0,s.zw)(Z))]),_:1})]),_:1},8,["model"])])]),_:1},8,["title"])}}}),z=(0,a(83744).default)(W,[["__scopeId","data-v-abd80cea"]]),C={class:"pt-12px"},j=(0,s.aZ)({__name:"GroupRename",setup(e){let{t}=(0,x.QT)(),a=(0,s.AE)("formRef"),l=(0,s.qj)({group_id:0,name:""}),n={name:{required:!0,message:t("contacts.group.form.nameRequired"),trigger:"blur"}},[o,i]=(0,c.d)({onChangeState:e=>{if(e){let{row:e}=i.getState();e&&(l.group_id=e.id,l.name=e.name)}else l.group_id=0,l.name=""},onConfirm:async()=>{var e;await (null==(e=a.value)?void 0:e.validate()),await (0,f.mD)((0,s.IU)(l));let t=i.getState();null==t||t.refresh()}});return(e,i)=>{let r=h.Z,u=_.ZP,p=g.Z;return(0,s.wg)(),(0,s.j4)((0,s.SU)(o),{title:(0,s.SU)(t)("contacts.group.rename.title"),width:"400"},{default:(0,s.w5)(()=>[(0,s._)("div",C,[(0,s.Wm)(p,{ref_key:"formRef",ref:a,model:(0,s.SU)(l),rules:n},{default:(0,s.w5)(()=>[(0,s.Wm)(u,{label:(0,s.SU)(t)("contacts.group.form.name"),path:"name"},{default:(0,s.w5)(()=>[(0,s.Wm)(r,{value:(0,s.SU)(l).name,"onUpdate:value":i[0]||(i[0]=e=>(0,s.SU)(l).name=e)},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"])}}});var R=a(29938);function P(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,s.lA)(e)}let $=(0,s.aZ)({__name:"temp",setup(e){let{t}=(0,x.QT)(),a=(0,R.tv)(),g=(0,s.iH)([]),{tableParams:v,tableList:w,loading:_,tableTotal:h,getTableData:S}=(0,d.Z)({loading:!0,immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:f.hI}),U=(0,s.iH)([{type:"selection"},{key:"name",title:t("contacts.group.columns.name"),minWidth:120,render:e=>(0,s.Wm)(u.ZP,{text:!0,type:"primary",onClick:()=>{a.push({path:"/contacts/subscribers",state:{group_id:e.id}})}},{default:()=>[e.name]})},{key:"total_count",title:t("contacts.group.columns.subscribers"),minWidth:100,render:e=>e.total_count||0},{key:"double_optin",title:t("contacts.group.columns.type"),minWidth:100,render:e=>1===e.double_optin?t("contacts.group.type.doubleOptin"):t("contacts.group.type.singleOptin")},{key:"create_time",title:t("contacts.group.columns.createdAt"),minWidth:140,render:e=>(0,m.mr)(e.create_time)},{title:t("common.columns.actions"),key:"actions",align:"right",width:180,render:e=>{let a,l,n;return(0,s.Wm)(p.Z,{inline:!0},{default:()=>[(0,s.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{W(e)}},P(a=t("common.actions.settings"))?a:{default:()=>[a]}),(0,s.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{I(e)}},P(l=t("common.actions.rename"))?l:{default:()=>[l]}),(0,s.Wm)(u.ZP,{type:"error",text:!0,onClick:()=>{O(e)}},P(n=t("common.actions.delete"))?n:{default:()=>[n]})]})}}]),[b,k]=(0,c.d)({component:z,state:{refresh:S}}),Z=()=>{k.open()},W=e=>{a.push(`/contacts/settings/${e.id}`)},[C,$]=(0,c.d)({component:j,state:{refresh:S}}),I=e=>{$.setState({row:e}),$.open()},O=e=>{(0,m.iG)({title:t("contacts.group.delete.title"),content:t("contacts.group.delete.confirm",{name:e.name}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,f.iE)({group_ids:[e.id]}),S()}})},T=()=>{(0,m.iG)({title:t("contacts.group.export.title"),content:t("contacts.group.export.confirm",{count:g.value.length}),onConfirm:async()=>{let e=await (0,f.yG)({format:"csv",include_unsubscribe:!0,group_ids:g.value,export_type:1});(0,m.Kn)(e)&&(0,y.Sv)({file_path:e.file_url})}})};return(e,a)=>{let p=r.Z,c=i.Z,d=o.Z,m=n.Z,f=l.Z;return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(f,null,{toolsLeft:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(u.ZP),{type:"primary",onClick:Z},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)((0,s.SU)(t)("common.actions.add")),1)]),_:1})]),toolsRight:(0,s.w5)(()=>[(0,s.Wm)(p,{value:(0,s.SU)(v).keyword,"onUpdate:value":a[0]||(a[0]=e=>(0,s.SU)(v).keyword=e),width:280,placeholder:(0,s.SU)(t)("contacts.group.search.namePlaceholder"),onSearch:a[1]||(a[1]=()=>(0,s.SU)(S)(!0))},null,8,["value","placeholder"])]),table:(0,s.w5)(()=>[(0,s.Wm)(d,{"checked-row-keys":(0,s.SU)(g),"onUpdate:checkedRowKeys":a[2]||(a[2]=e=>(0,s.dq)(g)?g.value=e:null),"row-key":e=>e.id,loading:(0,s.SU)(_),columns:(0,s.SU)(U),data:(0,s.SU)(w)},{empty:(0,s.w5)(()=>[(0,s.Wm)(c)]),_:1},8,["checked-row-keys","row-key","loading","columns","data"])]),pageLeft:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(u.ZP),{disabled:0===(0,s.SU)(g).length,onClick:T},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("common.actions.export")),1)]),_:1},8,["disabled"])]),pageRight:(0,s.w5)(()=>[(0,s.Wm)(m,{page:(0,s.SU)(v).page,"onUpdate:page":a[3]||(a[3]=e=>(0,s.SU)(v).page=e),"page-size":(0,s.SU)(v).page_size,"onUpdate:pageSize":a[4]||(a[4]=e=>(0,s.SU)(v).page_size=e),"item-count":(0,s.SU)(h),onRefresh:(0,s.SU)(S)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,s.w5)(()=>[(0,s.Wm)((0,s.SU)(b)),(0,s.Wm)((0,s.SU)(C))]),_:1})])}}})}}]);