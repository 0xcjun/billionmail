"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["521"],{7714:function(e,t,n){n.d(t,{Z:()=>f});var a=n(5083),l=n(209),i=n(1321),s=n(4124),r=n(2931),o=n(2249),u=n(6253),c=n(3876),d=n(8713);let v={name:"Flex",self:function(){return d.Z}},g=Object.assign(Object.assign({},i.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),f=(0,l.aZ)({name:"Flex",props:g,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:n}=(0,s.ZP)(e),u=(0,i.Z)("Flex","-flex",void 0,v,e,t);return{rtlEnabled:(0,r.V)("Flex",n,t),mergedClsPrefix:t,margin:(0,l.Fl)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,o.Tl)("gap",t)]:n}}=u.value,{row:l,col:i}=(0,a.yU)(n);return{horizontal:(0,a.fQ)(i),vertical:(0,a.fQ)(l)}})}},render(){let{vertical:e,reverse:t,align:n,inline:a,justify:i,margin:s,wrap:r,mergedClsPrefix:o,rtlEnabled:d}=this,v=(0,u.x)((0,c.z)(this),!1);return v.length?(0,l.h)("div",{role:"none",class:[`${o}-flex`,d&&`${o}-flex--rtl`],style:{display:a?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:i,flexWrap:!r||e?"nowrap":"wrap",alignItems:n,gap:`${s.vertical}px ${s.horizontal}px`}},v):null}})},3467:function(e,t,n){n.d(t,{dS:()=>o,gn:()=>i,kO:()=>r,nT:()=>u,qM:()=>s});var a=n(4203);let{t:l}=n(4958).Z.global,i=()=>a.e.get("/settings/get_version"),s=()=>a.e.get("/docker_api/list"),r=e=>a.e.post("/docker_api/restart",e,{fetchOptions:{loading:l("settings.api.loading.restarting"),successMessage:!0}}),o=e=>a.e.post("/services/get_config",e),u=e=>a.e.post("/services/save_config",e,{fetchOptions:{loading:l("settings.api.loading.saving"),successMessage:!0}})},3312:function(e,t,n){n.d(t,{d:()=>s});var a=n(209),l=n(8429);let i=Symbol("MODAL_INJECT"),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:n,onCancel:s,onConfirm:r}=e,o=(0,a.qj)({});return n?[(0,a.aZ)({setup(l,s){let{attrs:r,slots:u}=s;return(0,a.JJ)(i,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(o,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,a.h)(n,{...l,...r},u)}}),o]:[(0,a.aZ)({setup(t,n){let{attrs:u,slots:c}=n,d=(0,a.f3)(i),v=(0,a.iH)(!1);return o.open=()=>{var t;v.value=!0,null===(t=e.onChangeState)||void 0===t||t.call(e,v.value)},o.close=()=>{v.value=!1},o.setState=t=>{var n;null==d||d.setState(t),null===(n=e.onChangeState)||void 0===n||n.call(e,v.value)},o.getState=()=>(null==d?void 0:d.state)??{},null==d||d.extendApi(o),()=>(0,a.Wm)(l.Z,(0,a.dG)({show:v.value},t,u,{onCancel:s,onConfirm:r,"onUpdate:show":e=>{v.value=e??!1}}),c)}}),o]}},2550:function(e,t,n){n.d(t,{Z:()=>r});var a=n(8574),l=n(209),i=n(6768);let s=(0,l.aZ)({__name:"index",props:(0,l.Vf)({language:{type:String,default:"html"},theme:{type:String,default:"vs-dark"},options:{type:Object,default:()=>({})}},{value:{default:""},valueModifiers:{}}),emits:(0,l.Vf)(["save"],["update:value"]),setup(e,t){let{expose:n,emit:s}=t,r=(0,l.tT)(e,"value"),o=(0,l.iH)(null),u=null,c=(0,l.iH)(!1);i.Z.config({paths:{vs:`${location.origin}/static/plugin/monaco/min/vs`}});let d=async()=>{if(o.value&&!u)try{c.value=!0;let t=await i.Z.init();(u=t.editor.create(o.value,{value:r.value,language:e.language,theme:e.theme,minimap:{enabled:!1},automaticLayout:!0,scrollBeyondLastLine:!1,fontSize:14,tabSize:2,wordWrap:"on",...e.options})).onDidChangeModelContent(()=>{let e=(null==u?void 0:u.getValue())||"";r.value=e}),u.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,function(){s("save")})}finally{c.value=!1}},v=()=>{u&&(u.dispose(),u=null)};return(0,l.YP)(()=>r.value,e=>{u&&e!==u.getValue()&&u.setValue(e)}),(0,l.bv)(()=>{d()}),(0,l.Jd)(()=>{v()}),n({getEditor:()=>u}),(e,t)=>{let n=a.Z;return(0,l.wg)(),(0,l.j4)(n,{class:"h-full",show:(0,l.SU)(c)},{default:(0,l.w5)(()=>[(0,l._)("div",{ref_key:"containerRef",ref:o,class:"monaco-editor-container"},null,512)]),_:1},8,["show"])}}}),r=(0,n(5115).default)(s,[["__scopeId","data-v-5b65e670"]])},6982:function(e,t,n){n.r(t),n.d(t,{default:()=>x});var a=n(6528),l=n(209),i=n(3435),s=n(8738),r=n(7714),o=n(3447),u=n(2965),c=n(3312),d=n(3467),v=n(2550),g=n(5778);let f={class:"mb-16px"},p={class:"text-desc"},m={class:"h-560px"},y=(0,l.aZ)({__name:"ServiceConfig",setup(e){let{t}=(0,g.QT)(),n=(0,l.iH)(""),a=(0,l.iH)(""),i=(0,l.Fl)(()=>t("settings.service.editTitle",{name:n.value})),s=async()=>{let e=await (0,d.dS)({service_type:n.value});(0,u.Kn)(e)&&(a.value=e.content)},r=async()=>{await (0,d.nT)({service_type:n.value,content:a.value})},[o,y]=(0,c.d)({onChangeState:async e=>{if(e){let{row:e}=y.getState();n.value=e.Names[0].trim(),s()}else n.value="",a.value=""},onConfirm:async()=>{await r()}});return(e,n)=>{let s=v.Z;return(0,l.wg)(),(0,l.j4)((0,l.SU)(o),{title:(0,l.SU)(i),width:800},{default:(0,l.w5)(()=>[(0,l._)("div",f,[(0,l._)("div",p,(0,l.zw)((0,l.SU)(t)("settings.service.tips")),1)]),(0,l._)("div",m,[(0,l.Wm)(s,{value:(0,l.SU)(a),"onUpdate:value":n[0]||(n[0]=e=>(0,l.dq)(a)?a.value=e:null),onSave:r},null,8,["value"])])]),_:1},8,["title"])}}}),S={class:"settings-title"};function h(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,l.lA)(e)}let _=(0,l.aZ)({__name:"SettingsService",setup(e){let{t}=(0,g.QT)(),n=(0,l.iH)(!1),a=(0,l.iH)([]),v=e=>e.includes("rspamd")||e.includes("postfix")||e.includes("dovecot"),f=(0,l.iH)([{key:"Names",title:t("settings.service.columns.name"),render:e=>e.Names[0]},{key:"State",title:t("settings.service.columns.status"),render:e=>(0,l.Wm)(s.ZP,{size:"small",bordered:!1,type:"running"===e.State?"success":"error"},{default:()=>["running"===e.State?t("settings.service.status.running"):t("settings.service.status.stopped")]})},{key:"action",title:t("common.columns.actions"),align:"right",render:e=>{let n,a;return(0,l.Wm)(r.Z,{inline:!0},{default:()=>[(0,l.Wm)(o.ZP,{type:"primary",text:!0,onClick:()=>{p(e)}},h(n=t("common.actions.restart"))?n:{default:()=>[n]}),(0,l.Wm)(o.ZP,{type:"primary",text:!0,disabled:!v(e.Names[0]),onClick:()=>{w(e)}},h(a=t("common.actions.config"))?a:{default:()=>[a]})]})}}]),p=async e=>{(0,u.iG)({title:t("settings.service.restart.title"),content:t("settings.service.restart.confirm",{name:e.Names[0]}),confirmText:t("common.actions.confirm"),onConfirm:async()=>{await (0,d.kO)({container_id:e.Id}),x()}})},[m,_]=(0,c.d)({component:y}),w=e=>{_.setState({row:e}),_.open()},x=async()=>{try{n.value=!0;let e=await (0,d.qM)();(0,u.kJ)(e)&&(a.value=e)}finally{n.value=!1}};return x(),(e,s)=>{let r=i.Z;return(0,l.wg)(),(0,l.iD)("div",null,[(0,l._)("div",S,(0,l.zw)((0,l.SU)(t)("settings.service.title")),1),(0,l.Wm)(r,{loading:(0,l.SU)(n),data:(0,l.SU)(a),columns:(0,l.SU)(f)},null,8,["loading","data","columns"]),(0,l.Wm)((0,l.SU)(m))])}}}),w=(0,n(5115).default)(_,[["__scopeId","data-v-3440ec78"]]),x=(0,l.aZ)({__name:"index",setup:e=>(e,t)=>{let n=a.ZP;return(0,l.wg)(),(0,l.j4)(n,{bordered:!1},{default:(0,l.w5)(()=>[(0,l.Wm)(w)]),_:1})}})}}]);