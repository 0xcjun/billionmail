"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["6591"],{84075:function(e,l,a){a.d(l,{WH:()=>s,hI:()=>o,iE:()=>d,mD:()=>c,sS:()=>r,uz:()=>v,vi:()=>m,yG:()=>p,yL:()=>i});var t=a(76882),u=a(34541);let{t:n}=t.Z.global,o=e=>u.e.get("/contact/group/list",{params:e}),s=()=>u.e.get("/contact/group/all"),i=e=>u.e.get("/contact/group/info",{params:e}),r=e=>u.e.post("/contact/group/create",e,{fetchOptions:{loading:n("contacts.group.loading.createGroup"),successMessage:!0}}),c=e=>u.e.post("/contact/group/update",e,{fetchOptions:{loading:n("contacts.group.loading.updateGroup"),successMessage:!0}}),d=e=>u.e.post("/contact/group/delete",e,{fetchOptions:{loading:n("contacts.group.loading.deleteGroup"),successMessage:!0}}),m=e=>u.e.post("/contact/group/contact_count",e),p=e=>u.e.post("/contact/group/export",e,{fetchOptions:{loading:"Exporting, please wait...",successMessage:!0}}),v=e=>u.e.post("/contact/group/update",e,{fetchOptions:{loading:"Saving, please wait...",successMessage:!0}})},77984:function(e,l,a){a.d(l,{F:()=>o});var t=a(68271),u=a(94821),n=a(76882);let o=()=>{let{t:e}=n.Z.global,{copy:l,isSupported:a}=(0,u.VPI)({legacy:!0});return{copyText:async u=>{if(!u)return void t.v0.error(e("common.useCopy.noText"));a.value?(await l(u),t.v0.success(e("common.useCopy.success"))):t.v0.error(e("common.useCopy.failed"))}}}},51169:function(e,l,a){a.d(l,{d:()=>o});var t=a(58786),u=a(49247);let n=Symbol("MODAL_INJECT"),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:l={},component:a,onCancel:o,onConfirm:s}=e,i=(0,t.qj)({});return a?[(0,t.aZ)({setup(u,o){let{attrs:s,slots:r}=o;return(0,t.JJ)(n,{state:l,options:e,extendApi:e=>{Object.setPrototypeOf(i,e)},setState:e=>{Object.assign(l,e)}}),()=>(0,t.h)(a,{...u,...s},r)}}),i]:[(0,t.aZ)({setup(l,a){let{attrs:r,slots:c}=a,d=(0,t.f3)(n),m=(0,t.iH)(!1);return i.open=()=>{var l;m.value=!0,null==(l=e.onChangeState)||l.call(e,m.value)},i.close=()=>{m.value=!1},i.setState=l=>{var a;null==d||d.setState(l),null==(a=e.onChangeState)||a.call(e,m.value)},i.getState=()=>(null==d?void 0:d.state)??{},null==d||d.extendApi(i),()=>(0,t.Wm)(u.Z,(0,t.dG)({show:m.value},l,r,{onCancel:o,onConfirm:s,"onUpdate:show":e=>{m.value=e??!1}}),c)}}),i]}},88253:function(e,l,a){a.d(l,{Z:()=>s});var t=a(60579),u=a(58786),n=a(6768);let o=(0,u.aZ)({__name:"index",props:(0,u.Vf)({language:{type:String,default:"html"},theme:{type:String,default:"vs-dark"},options:{type:Object,default:()=>({})}},{value:{default:""},valueModifiers:{}}),emits:(0,u.Vf)(["save"],["update:value"]),setup(e,l){let{expose:a,emit:o}=l,s=(0,u.tT)(e,"value"),i=(0,u.iH)(null),r=null,c=(0,u.iH)(!1);n.Z.config({paths:{vs:`${location.origin}/static/plugin/monaco`}});let d=async()=>{if(i.value&&!r)try{c.value=!0;let l=await n.Z.init();(r=l.editor.create(i.value,{value:s.value,language:e.language,theme:e.theme,minimap:{enabled:!1},automaticLayout:!0,scrollBeyondLastLine:!1,fontSize:14,tabSize:2,wordWrap:"on",...e.options})).onDidChangeModelContent(()=>{s.value=(null==r?void 0:r.getValue())||""}),r.addCommand(l.KeyMod.CtrlCmd|l.KeyCode.KeyS,function(){o("save")})}finally{c.value=!1}},m=()=>{r&&(r.dispose(),r=null)};return(0,u.YP)(()=>s.value,e=>{r&&e!==r.getValue()&&r.setValue(e)}),(0,u.bv)(()=>{d()}),(0,u.Jd)(()=>{m()}),a({getEditor:()=>r}),(e,l)=>{let a=t.Z;return(0,u.wg)(),(0,u.j4)(a,{class:"h-full",show:(0,u.SU)(c)},{default:(0,u.w5)(()=>[(0,u._)("div",{ref_key:"containerRef",ref:i,class:"monaco-editor-container"},null,512)]),_:1},8,["show"])}}}),s=(0,a(41748).default)(o,[["__scopeId","data-v-72ffe419"]])},53472:function(e,l,a){a.d(l,{Z:()=>n});var t=a(58786);let u=["height","srcdoc"],n=(0,t.aZ)({__name:"index",props:{value:{type:String,default:""},height:{type:[String,Number],default:"100%"}},setup:e=>(l,a)=>((0,t.wg)(),(0,t.iD)("iframe",{width:"100%",height:e.height,srcdoc:e.value,style:{border:"none",borderRadius:"4px"}},null,8,u))})},46655:function(e,l,a){a.r(l),a.d(l,{default:()=>q});var t=a(10320),u=a(43751),n=a(66236),o=a(70958),s=a(58786),i=a(68271),r=a(84075);let c=Symbol("group-settings");var d=a(67655),m=a(57869),p=a(77984);let v={class:"flex items-center gap-16px w-full"},_=(0,s.aZ)({__name:"Code",props:{value:{type:String,default:""}},setup(e){let{copyText:l}=(0,p.F)(),a=async()=>{await l(e.value)};return(l,t)=>{let u=m.ZP,n=d.ZP;return(0,s.wg)(),(0,s.iD)("div",v,[(0,s.Wm)(u,{class:"flex-1"},{default:(0,s.w5)(()=>[(0,s._)("pre",null,(0,s.zw)(e.value||"--"),1)]),_:1}),(0,s.Wm)(n,{onClick:a},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(l.$t("common.actions.copy")),1)]),_:1})])}}});var f=a(41748);let g=(0,f.default)(_,[["__scopeId","data-v-73f6a82a"]]),w={class:"subscribe-form-container"},b={class:"section"},h={class:"section"},y=(0,s.aZ)({__name:"SubscribeForm",setup(e){let l=(0,s.iH)(""),a=(0,s.iH)(""),{groupInfo:t}=(0,s.f3)(c);return(0,s.m0)(()=>{t.value&&(l.value=t.value.subscribe_link,a.value=t.value.subscribe_form)}),(e,t)=>((0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("div",b,[t[0]||(t[0]=(0,s._)("h3",{class:"section-title"},"Separate subscription page",-1)),t[1]||(t[1]=(0,s._)("p",{class:"section-description"}," Simply copy and share this URL with users – the subscription form is ready to use. ",-1)),(0,s.Wm)(g,{value:(0,s.SU)(l)},null,8,["value"])]),(0,s._)("div",h,[t[2]||(t[2]=(0,s._)("h3",{class:"section-title"},"Embeddable Form",-1)),t[3]||(t[3]=(0,s._)("p",{class:"section-description"}," Easily embed this subscription form into your website pages. ",-1)),(0,s.Wm)(g,{value:(0,s.SU)(a)},null,8,["value"])])]))}}),S=(0,f.default)(y,[["__scopeId","data-v-0251ae50"]]);var U=a(46244),W=a(29875),Z=a(73084),x=a(6455),k=a(8490),C=a(88253),j=a(3179),z=a(51169),P=a(65302);let H={class:"flex-1"},M={class:"flex justify-end gap-12px mb-8px"},O={class:"h-400px"},I=(0,s.aZ)({__name:"Editor",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){let l=(0,s.tT)(e,"value"),a=e=>{let a=new FileReader;a.onload=e=>{var a;l.value=null==(a=e.target)?void 0:a.result},e.file&&a.readAsText(e.file)},[t,u]=(0,z.d)({component:P.Z}),n=()=>{u.setState({html:l.value}),u.open()};return(e,u)=>{let o=j.Z,i=d.ZP,r=C.Z;return(0,s.wg)(),(0,s.iD)("div",H,[(0,s._)("div",M,[(0,s._)("div",null,[(0,s.Wm)(o,{mode:"button","button-type":"primary","button-size":"small",accept:["html"],onChange:a},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("market.template.uploadHtml")),1)]),_:1})]),(0,s.Wm)(i,{type:"primary",ghost:"",onClick:n},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("common.actions.preview")),1)]),_:1})]),(0,s._)("div",O,[(0,s.Wm)(r,{value:l.value,"onUpdate:value":u[0]||(u[0]=e=>l.value=e),language:"html"},null,8,["value"])]),(0,s.Wm)((0,s.SU)(t))])}}}),D={class:"w-200px"},T={class:"w-420px"},E={class:"flex-1"},F={class:"w-420px"},L={class:"w-420px"},$={class:"w-420px"},J={class:"w-420px"},V=(0,s.aZ)({__name:"SubscribeSettings",setup(e){let l=(0,s.qj)({group_id:0,double_optin:1,send_welcome_email:1,welcome_subject:"",thank_you_subject:"",welcome_mail_html:"",welcome_mail_drag:"",success_url:"",confirm_subject:"",confirm_mail_html:"",confirm_mail_drag:"",confirm_url:"",already_url:""}),a=[{label:"两次确认",value:1},{label:"单次确认",value:0}],{groupInfo:t}=(0,s.f3)(c),u=async()=>{await (0,r.uz)((0,s.IU)(l))};return(0,s.m0)(()=>{t.value&&(l.group_id=t.value.id,l.double_optin=t.value.double_optin,l.welcome_subject=t.value.welcome_subject,l.send_welcome_email=t.value.send_welcome_email,l.welcome_mail_html=t.value.welcome_mail_html,l.welcome_mail_drag=t.value.welcome_mail_drag,l.success_url=t.value.success_url,l.confirm_subject=t.value.confirm_subject,l.confirm_mail_html=t.value.confirm_mail_html,l.confirm_mail_drag=t.value.confirm_mail_drag,l.confirm_url=t.value.confirm_url,l.already_url=t.value.already_url)}),(e,t)=>{let n=k.Z,o=x.ZP,i=Z.Z,r=W.Z,c=d.ZP,m=U.Z;return(0,s.wg)(),(0,s.j4)(m,{class:"subscribe-settings"},{default:(0,s.w5)(()=>[(0,s.Wm)(o,{label:"列表类型"},{default:(0,s.w5)(()=>[(0,s._)("div",D,[(0,s.Wm)(n,{value:(0,s.SU)(l).double_optin,"onUpdate:value":t[0]||(t[0]=e=>(0,s.SU)(l).double_optin=e),options:a,placeholder:"请选择列表类型"},null,8,["value"])])]),_:1}),(0,s.Wm)(o,{label:"感谢邮件订阅主题"},{default:(0,s.w5)(()=>[(0,s._)("div",T,[(0,s.Wm)(i,{value:(0,s.SU)(l).welcome_subject,"onUpdate:value":t[1]||(t[1]=e=>(0,s.SU)(l).welcome_subject=e)},null,8,["value"])])]),_:1}),(0,s.Wm)(o,null,{label:(0,s.w5)(()=>[t[9]||(t[9]=(0,s._)("span",{class:"mr-16px"},"感谢邮件订阅邮件",-1)),(0,s.Wm)(r,{value:(0,s.SU)(l).send_welcome_email,"onUpdate:value":t[2]||(t[2]=e=>(0,s.SU)(l).send_welcome_email=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),default:(0,s.w5)(()=>[(0,s._)("div",E,[t[10]||(t[10]=(0,s._)("div",{class:"setting-description mb-8px"}," When enabled, a thank you email will be sent to the user when they subscribe via the subscription form or API. This will not be triggered for manually added users. ",-1)),(0,s.Wm)(I,{value:(0,s.SU)(l).welcome_mail_html,"onUpdate:value":t[3]||(t[3]=e=>(0,s.SU)(l).welcome_mail_html=e)},null,8,["value"])])]),_:1}),(0,s.Wm)(o,{label:"发送感谢订阅的跳转页面链接"},{default:(0,s.w5)(()=>[(0,s._)("div",F,[(0,s.Wm)(i,{value:(0,s.SU)(l).success_url,"onUpdate:value":t[4]||(t[4]=e=>(0,s.SU)(l).success_url=e)},null,8,["value"])])]),_:1}),(0,s.Wm)(o,{label:"二次确认邮件主题"},{default:(0,s.w5)(()=>[(0,s._)("div",L,[(0,s.Wm)(i,{value:(0,s.SU)(l).confirm_subject,"onUpdate:value":t[5]||(t[5]=e=>(0,s.SU)(l).confirm_subject=e)},null,8,["value"])])]),_:1}),(0,s.Wm)(o,{label:"二次确认邮件"},{default:(0,s.w5)(()=>[(0,s.Wm)(I,{value:(0,s.SU)(l).confirm_mail_html,"onUpdate:value":t[6]||(t[6]=e=>(0,s.SU)(l).confirm_mail_html=e)},null,8,["value"])]),_:1}),(0,s.Wm)(o,{label:"二次确认的跳转页面链接"},{default:(0,s.w5)(()=>[(0,s._)("div",$,[(0,s.Wm)(i,{value:(0,s.SU)(l).confirm_url,"onUpdate:value":t[7]||(t[7]=e=>(0,s.SU)(l).confirm_url=e)},null,8,["value"])])]),_:1}),(0,s.Wm)(o,{label:"订阅已存在的跳转页面链接"},{default:(0,s.w5)(()=>[(0,s._)("div",J,[(0,s.Wm)(i,{value:(0,s.SU)(l).already_url,"onUpdate:value":t[8]||(t[8]=e=>(0,s.SU)(l).already_url=e)},null,8,["value"])])]),_:1}),(0,s.Wm)(o,{"show-label":!1},{default:(0,s.w5)(()=>[(0,s.Wm)(c,{type:"primary",onClick:u},{default:(0,s.w5)(()=>[(0,s.Uk)((0,s.zw)(e.$t("common.actions.save")),1)]),_:1})]),_:1})]),_:1})}}}),A=(0,f.default)(V,[["__scopeId","data-v-7b409bb4"]]);var G=a(65965);let K={class:"p-24px"},R={class:"bt-title mb-12px!"},q=(0,s.aZ)({__name:"index",setup(e){var l;let a=(0,G.yj)(),d=(0,s.Fl)(()=>Number(a.params.id)),m=(0,s.iH)("form"),p=(0,s.iH)(null),v=async()=>{let e=await (0,r.yL)({group_id:d.value});(0,i.Kn)(e)&&(p.value=e)};return l={groupInfo:p},(0,s.JJ)(c,l),v(),(e,l)=>{let a=o.Z,i=n.ZP,r=u.Z,c=t.Z;return(0,s.wg)(),(0,s.iD)("div",K,[(0,s._)("div",R,(0,s.zw)(e.$t("layout.menu.contacts")),1),(0,s.Wm)(i,{class:"mb-4px"},{default:(0,s.w5)(()=>[(0,s.Wm)(a,null,{default:(0,s.w5)(()=>{var e;return[(0,s.Uk)((0,s.zw)((null==(e=(0,s.SU)(p))?void 0:e.name)||"--"),1)]}),_:1}),(0,s.Wm)(a,null,{default:(0,s.w5)(()=>l[1]||(l[1]=[(0,s.Uk)("Settings")])),_:1,__:[1]})]),_:1}),(0,s.Wm)(c,{value:(0,s.SU)(m),"onUpdate:value":l[0]||(l[0]=e=>(0,s.dq)(m)?m.value=e:null),type:"line"},{default:(0,s.w5)(()=>[(0,s.Wm)(r,{name:"form",tab:"Subscribe Form"},{default:(0,s.w5)(()=>[(0,s.Wm)(S)]),_:1}),(0,s.Wm)(r,{name:"subscribe",tab:"Subscribe settings"},{default:(0,s.w5)(()=>[(0,s.Wm)(A)]),_:1})]),_:1},8,["value"])])}}})},65302:function(e,l,a){a.d(l,{Z:()=>o});var t=a(53472),u=a(58786),n=a(51169);let o=(0,u.aZ)({__name:"TemplatePreview",setup(e){let l=(0,u.iH)(""),[a,o]=(0,n.d)({onChangeState:e=>{e&&(l.value=o.getState().html||"")}});return(e,n)=>{let o=t.Z;return(0,u.wg)(),(0,u.j4)((0,u.SU)(a),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,u.w5)(()=>[(0,u.Wm)(o,{height:580,value:(0,u.SU)(l)},null,8,["value"])]),_:1},8,["title"])}}})}}]);