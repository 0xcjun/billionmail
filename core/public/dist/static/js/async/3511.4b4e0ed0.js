"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["3511"],{25464:function(e,a,t){t.d(a,{Au:()=>p,Fj:()=>o,LC:()=>n,Lb:()=>f,OV:()=>d,dj:()=>r,gK:()=>u,i7:()=>s,rU:()=>g,v1:()=>c,xh:()=>v,yW:()=>m});var l=t(86244);let{t:i}=t(77527).Z.global,s=e=>l.e.get("/domains/list",{params:e}),n=()=>l.e.get("/domains/all"),o=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),u=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),r=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),d=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),p=e=>l.e.get("/domains/get_ssl",{params:e}),c=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),m=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}}),v=e=>l.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}}),g=e=>l.e.post("/askai/project/create",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}}),f=()=>l.e.post("/askai/supplier/status")},6097:function(e,a,t){t.d(a,{EV:()=>u,H2:()=>p,Ts:()=>n,WS:()=>r,Yi:()=>o,iC:()=>s,ym:()=>d});var l=t(86244);let{t:i}=t(77527).Z.global,s=e=>l.e.get("/mailbox/list",{params:e}),n=e=>l.e.post("/mailbox/create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),o=e=>l.e.post("/mailbox/batch_create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),u=e=>l.e.post("/mailbox/update",e,{fetchOptions:{loading:i("mailbox.api.loading.updating"),successMessage:!0}}),r=e=>l.e.post("/mailbox/delete",e,{fetchOptions:{loading:i("mailbox.api.loading.deleting"),successMessage:!0}}),d=e=>l.e.post("/mailbox/export",e,{responseType:"blob",fetchOptions:{loading:i("mailbox.api.loading.exporting"),successMessage:!0}}),p=e=>l.e.post("/mailbox/import",e,{fetchOptions:{loading:i("mailbox.api.loading.importing"),successMessage:!0}})},81208:function(e,a,t){t.d(a,{A8:()=>n,NI:()=>o,QB:()=>r,WF:()=>u,Xc:()=>p,ef:()=>d});var l=t(77527),i=t(86244);let{t:s}=l.Z.global;function n(e){return i.e.get("/email_template/list",{params:e})}function o(){return i.e.get("/email_template/all")}function u(e){return i.e.post("/email_template/create",e,{fetchOptions:{loading:s("market.template.loading.creating"),successMessage:!0}})}function r(e){return i.e.post("/email_template/update",e,{fetchOptions:{loading:s("market.template.loading.updating"),successMessage:!0}})}function d(e){return i.e.post("/email_template/copy",e,{fetchOptions:{loading:s("market.template.loading.copying"),successMessage:!0}})}function p(e){return i.e.post("/email_template/delete",e,{fetchOptions:{loading:s("market.template.loading.deleting"),successMessage:!0}})}},93208:function(e,a,t){t.d(a,{F:()=>n});var l=t(43407),i=t(267),s=t(77527);let n=()=>{let{t:e}=s.Z.global,{copy:a,isSupported:t,copied:n}=(0,i.VPI)({legacy:!0});return{copied:n,copyText:async i=>{if(!i)return void l.v0.error(e("common.useCopy.noText"));t.value?(await a(i),l.v0.success(e("common.useCopy.success"))):l.v0.error(e("common.useCopy.failed"))}}}},58538:function(e,a,t){t.d(a,{N:()=>n});var l=t(66671),i=t(43407),s=t(25595);let n=e=>{let{params:a,fetchFn:t,useParams:n,loading:o=!0,immediate:u=!0,rowKey:r=e=>e.id}=e,d=(0,s.iH)(o),p=(0,s.iH)([]),c=(0,s.iH)(0),m=(0,s.iH)(a),v=(0,s.iH)([]),g=()=>n?n(m.value):m.value,f=(0,l.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(m.value.page=1),d.value=!0;try{let e=g(),a=await t(e);(0,i.Kn)(a)&&(p.value=(0,i.kJ)(a.list)?a.list:[],c.value=(0,i.hj)(a.total)?a.total:0)}finally{v.value=[],d.value=!1}},300),_=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f(e)},h=e=>{m.value.page=e},w=e=>{m.value.page_size=e};return(0,s.bv)(()=>{u&&_()}),{tableData:p,tableTotal:c,tableKeys:v,tableParams:m,fetchTable:_,resetTable:()=>_(!0),tableProps:(0,s.Fl)(()=>({rowKey:r,data:p.value,loading:d.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),batchProps:(0,s.Fl)(()=>({rowKey:r,data:p.value,checkedRowKeys:v.value,onUpdateCheckedRowKeys:e=>{v.value=e}})),pageProps:(0,s.Fl)(()=>({page:m.value.page,pageSize:m.value.page_size,itemCount:c.value,onUpdatePage:h,onUpdatePageSize:w}))}}},16821:function(e,a,t){t.d(a,{d:()=>n});var l=t(25595),i=t(30295);let s=Symbol("MODAL_INJECT"),n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:a={},component:t,onCancel:n,onConfirm:o}=e,u=(0,l.qj)({});return t?[(0,l.aZ)({setup(i,n){let{attrs:o,slots:r}=n;return(0,l.JJ)(s,{state:a,options:e,extendApi:e=>{Object.setPrototypeOf(u,e)},setState:e=>{Object.assign(a,e)}}),()=>(0,l.h)(t,{...i,...o},r)}}),u]:[(0,l.aZ)({setup(a,t){let{attrs:r,slots:d}=t,p=(0,l.f3)(s),c=(0,l.iH)(!1);return u.open=()=>{var a;c.value=!0,null==(a=e.onChangeState)||a.call(e,c.value)},u.close=()=>{c.value=!1},u.setState=a=>{var t;null==p||p.setState(a),null==(t=e.onChangeState)||t.call(e,c.value)},u.getState=()=>(null==p?void 0:p.state)??{},null==p||p.extendApi(u),()=>(0,l.Wm)(i.Z,(0,l.dG)({show:c.value},a,r,{onCancel:n,onConfirm:o,"onUpdate:show":e=>{c.value=e??!1}}),d)}}),u]}},65528:function(e,a,t){t.d(a,{Z:()=>n});var l=t(99833),i=t(25595);let s={class:"mr-4px"},n=(0,i.aZ)({__name:"index",props:{href:{type:String,default:""},text:{type:String,default:""}},setup(e){let a=()=>{window.open(e.href)};return(t,n)=>{let o=l.ZP;return(0,i.wg)(),(0,i.j4)(o,{text:"",onClick:a},{default:(0,i.w5)(()=>[(0,i._)("span",s,(0,i.zw)(e.text||t.$t("common.actions.help")),1),n[0]||(n[0]=(0,i._)("i",{class:"i-custom:help text-primary"},null,-1))]),_:1,__:[0]})}}})},59147:function(e,a,t){t.d(a,{Z:()=>s});var l=t(25595);let i=["height","srcdoc"],s=(0,l.aZ)({__name:"index",props:{value:{type:String,default:""},height:{type:[String,Number],default:"100%"}},setup:e=>(a,t)=>((0,l.wg)(),(0,l.iD)("iframe",{width:"100%",height:e.height,srcdoc:e.value,style:{border:"none",borderRadius:"4px"}},null,8,i))})},25322:function(e,a,t){t.d(a,{Z:()=>s});var l=t(44971),i=t(25595);let s=(0,i.aZ)({__name:"index",setup(e){let a=!!(0,i.Rr)().toolsLeft,t=!!(0,i.Rr)().toolsRight,s=!!(0,i.Rr)().pageLeft||!!(0,i.Rr)().pageRight;return(e,n)=>{let o=l.Z;return(0,i.wg)(),(0,i.iD)("div",null,[a||t?((0,i.wg)(),(0,i.j4)(o,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i.Wm)(o,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsLeft")]),_:3}),(0,i.Wm)(o,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"table"),(0,i.SU)(s)?((0,i.wg)(),(0,i.j4)(o,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i._)("div",null,[(0,i.WI)(e.$slots,"pageLeft")]),(0,i.Wm)(o,null,{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"modal")])}}})},21921:function(e,a,t){t.d(a,{Z:()=>s});var l=t(72281),i=t(25595);let s=(0,i.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,a){let{expose:t}=a,s=(0,i.iH)(null);return t({validate:()=>{var e;return null==(e=s.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=s.value)?void 0:e.restoreValidation()}}),(e,a)=>{let t=l.Z;return(0,i.wg)(),(0,i.j4)(t,(0,i.dG)(e.$attrs,{ref_key:"formRef",ref:s,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},80837:function(e,a,t){t.d(a,{Z:()=>o});var l=t(51559),i=t(25595),s=t(43407);let n={class:"ml-8px text-14px"},o=(0,i.aZ)({__name:"index",props:(0,i.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,i.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,a){let{emit:t}=a,o=(0,i.Fl)(()=>{let{storeKey:a}=e;return a?`${a}-page`:""}),u=(0,i.tT)(e,"page"),r=(0,i.tT)(e,"pageSize"),d=a=>{var l;null==(l=e.onUpdatePage)||l.call(e,a),t("refresh")},p=a=>{var l;u.value=1,null==(l=e.onUpdatePage)||l.call(e,1),c(a),t("refresh")},c=e=>{o.value&&(0,s.qQ)(o.value,String(e))};if(o.value){let e=(0,s.$o)(o.value);e&&(r.value=(0,s.Dx)(e))}return(e,a)=>{let t=l.Z;return(0,i.wg)(),(0,i.j4)(t,(0,i.dG)(e.$attrs,{page:u.value,"onUpdate:page":[a[0]||(a[0]=e=>u.value=e),d],"page-size":r.value,"onUpdate:pageSize":[a[1]||(a[1]=e=>r.value=e),p],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,i.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,i.w5)(e=>{let{itemCount:a}=e;return[(0,i._)("span",n," Total "+(0,i.zw)(a),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},65406:function(e,a,t){t.r(a),t.d(a,{default:()=>eZ});var l=t(25322),i=t(80837),s=t(19232),n=t(65528),o=t(64657),u=t(85068),r=t(46126),d=t(90767),p=t(25595),c=t(53545),m=t(7360),v=t(44078),g=t(43407),f=t(23865);let _={class:"date-filters"},h={class:"w-120px"},w={class:"w-240px"},b=(0,p.aZ)({__name:"index",props:(0,p.Vf)({defaultType:{type:String,default:"today"}},{value:{},valueModifiers:{}}),emits:(0,p.Vf)(["change"],["update:value"]),setup(e,a){let{emit:t}=a,l=(0,p.tT)(e,"value"),{t:i}=(0,f.QT)(),s=(0,p.iH)(e.defaultType),n=[{label:i("common.time.today"),value:"today"},{label:i("common.time.yesterday"),value:"yesterday"},{label:i("common.time.last7days"),value:"last7days"},{label:i("common.time.custom"),value:"custom"}],o=()=>{let e=new Date,a=(0,c.i)(e);return[(0,m.b)((0,v.E)(e,-6)).getTime(),a.getTime()]},u=e=>{switch(e){case"today":l.value=(0,g.wb)();break;case"yesterday":l.value=(0,g.wb)((0,v.E)(new Date,-1));break;case"last7days":l.value=o()}t("change")},b=e=>{let a=new Date,t=(0,v.E)(a,-30);return(0,m.b)(t).getTime()>e||(0,c.i)(a).getTime()<e},y=e=>{s.value="custom",l.value=[(0,m.b)(e[0]).getTime(),(0,c.i)(e[1]).getTime()],t("change")};return u(e.defaultType),(e,a)=>{let t=r.Z,i=d.Z;return(0,p.wg)(),(0,p.iD)("div",_,[(0,p._)("div",h,[(0,p.Wm)(t,{value:(0,p.SU)(s),"onUpdate:value":[a[0]||(a[0]=e=>(0,p.dq)(s)?s.value=e:null),u],options:n},null,8,["value"])]),(0,p._)("div",w,[(0,p.Wm)(i,{value:l.value,type:"daterange","is-date-disabled":b,"onUpdate:value":y},null,8,["value"])])])}}});var y=t(83744);let S=(0,y.default)(b,[["__scopeId","data-v-35dbb2f8"]]);var k=t(99833),x=t(17127),U=t(44971),W=t(58538),Z=t(16821),$=t(86244);let{t:z}=t(77527).Z.global,j=e=>$.e.get("/batch_mail/api/list",{params:e}),P=e=>$.e.get("/batch_mail/api/overview_stats",{params:e}),C=e=>$.e.post("/batch_mail/api/create",e,{fetchOptions:{loading:z("api.loading.creating"),successMessage:!0}}),T=e=>$.e.post("/batch_mail/api/update",e,{fetchOptions:{loading:z("api.loading.updating"),successMessage:!0}}),M=e=>$.e.post("/batch_mail/api/delete",e,{fetchOptions:{loading:z("api.loading.deleting"),successMessage:!0}});var O=t(20993);let R={class:"flex gap-16px mb-24px"},H={class:"title"},D={class:"value"},q={class:"title"},F={class:"value"},I={class:"title"},L={class:"value"},N={class:"title"},K={class:"value"},A=(0,p.aZ)({__name:"Overview",props:{time:{type:Object,default:()=>[0,0]}},setup(e,a){let{expose:t}=a,l=(0,p.iH)({total_send:0,avg_delivery_rate:0,avg_open_rate:0,avg_click_rate:0,avg_bounce_rate:0,avg_unsub_rate:0,total_unsubscribe:0}),i=(0,p.iH)(!1),s=async()=>{try{i.value=!0;let a=await P({start_time:Math.floor(e.time[0]/1e3),end_time:Math.floor(e.time[1]/1e3)});(0,g.Kn)(a)&&(l.value=a)}finally{i.value=!1}};return t({getStats:s}),(0,p.bv)(()=>{s()}),(e,a)=>{let t=o.ZP,s=O.Z;return(0,p.wg)(),(0,p.j4)(s,{show:(0,p.SU)(i)},{default:(0,p.w5)(()=>[(0,p._)("div",R,[(0,p.Wm)(t,{class:"flex-1"},{default:(0,p.w5)(()=>[(0,p._)("div",H,[a[0]||(a[0]=(0,p._)("i",{class:"i-fa:paper-plane"},null,-1)),(0,p._)("span",null,(0,p.zw)(e.$t("api.overview.totalSend")),1)]),(0,p._)("div",D,(0,p.zw)((0,p.SU)(l).total_send),1)]),_:1}),(0,p.Wm)(t,{class:"flex-1"},{default:(0,p.w5)(()=>[(0,p._)("div",q,[a[1]||(a[1]=(0,p._)("i",{class:"i-fa:envelope-open"},null,-1)),(0,p._)("span",null,(0,p.zw)(e.$t("api.overview.avgOpenRate")),1)]),(0,p._)("div",F,(0,p.zw)((0,p.SU)(l).avg_open_rate)+"%",1)]),_:1}),(0,p.Wm)(t,{class:"flex-1"},{default:(0,p.w5)(()=>[(0,p._)("div",I,[a[2]||(a[2]=(0,p._)("i",{class:"i-fa:mouse-pointer"},null,-1)),(0,p._)("span",null,(0,p.zw)(e.$t("api.overview.avgClickRate")),1)]),(0,p._)("div",L,(0,p.zw)((0,p.SU)(l).avg_click_rate)+"%",1)]),_:1}),(0,p.Wm)(t,{class:"flex-1"},{default:(0,p.w5)(()=>[(0,p._)("div",N,[a[3]||(a[3]=(0,p._)("i",{class:"i-fa:ban"},null,-1)),(0,p._)("span",null,(0,p.zw)(e.$t("api.overview.avgBounceRate")),1)]),(0,p._)("div",K,(0,p.zw)((0,p.SU)(l).avg_bounce_rate)+"%",1)]),_:1})])]),_:1},8,["show"])}}}),E=(0,y.default)(A,[["__scopeId","data-v-da2d6552"]]);var V=t(44369),J=t(93208);let Q={class:"flex"},G={class:"w-0 flex-1 flex items-center"},B={class:"min-w-0"},Y=(0,p.aZ)({__name:"ApiKey",props:{value:{default:""}},setup(e){let{copyText:a}=(0,J.F)(),t=async()=>{a(`${e.value}`)};return(e,a)=>{let l=V.ZP;return(0,p.wg)(),(0,p.iD)("div",Q,[(0,p._)("div",G,[(0,p._)("div",B,[(0,p.Wm)(l,{class:"max-w-full",tooltip:{contentStyle:{maxWidth:"300px"}}},{default:(0,p.w5)(()=>[(0,p.Uk)((0,p.zw)(e.value),1)]),_:1})]),(0,p._)("div",{class:"ml-6px text-15px cursor-pointer",title:"Copy",onClick:t},a[0]||(a[0]=[(0,p._)("i",{class:"i-mdi-content-copy"},null,-1)]))])])}}});var X=t(21921),ee=t(29403),ea=t(34909),et=t(66844),el=t(72227),ei=t(99389);let es={class:"flex-1"},en=(0,p.aZ)({__name:"ApiForm",setup(e){let{t:a}=(0,f.QT)(),t=(0,p.iH)(!1),l=(0,p.Fl)(()=>t.value?a("api.form.title.edit"):a("api.form.title.add")),i=(0,p.AE)("formRef"),s=(0,p.qj)({id:0,api_name:"",template_id:null,template_content:"",subject:"",domain:null,addresser:null,full_name:"",unsubscribe:1,active:1,ip_whitelist:""}),n={api_name:{required:!0,message:a("api.form.validation.apiNameRequired")},addresser:{required:!0,message:a("api.form.validation.addresserRequired")},full_name:{required:!0,message:a("market.task.edit.displayNamePlaceholder")},subject:{required:!0,message:a("market.task.edit.subjectPlaceholder")},template_id:{required:!0,message:a("api.form.validation.templateRequired")}},[o,r]=(0,Z.d)({component:ei.Z}),d=()=>{r.setState({html:s.template_content}),r.open()},c=()=>{s.id=0,s.api_name="",s.template_id=null,s.template_content="",s.subject="",s.addresser=null,s.full_name="",s.unsubscribe=1,s.active=1},m=()=>({api_name:s.api_name,template_id:s.template_id||0,subject:s.subject,addresser:s.addresser||"",full_name:s.full_name,unsubscribe:s.unsubscribe,active:s.active,ip_whitelist:s.ip_whitelist.split(",")}),[v,g]=(0,Z.d)({onChangeState:e=>{if(e){let e=g.getState(),{row:a}=e;t.value=e.isEdit,a&&(s.id=a.id,s.api_name=a.api_name,s.template_id=a.template_id,s.domain=a.addresser.split("@")[1],s.subject=a.subject,s.addresser=a.addresser,s.full_name=a.full_name,s.unsubscribe=a.unsubscribe,s.active=a.active,s.ip_whitelist=a.ip_whitelist.join(","))}else c()},onConfirm:async()=>{var e;await (null==(e=i.value)?void 0:e.validate());let a=m();t.value?await T({...a,id:s.id}):await C(a),g.getState().refresh()}});return(e,a)=>{let t=u.Z,r=ea.ZP,c=k.ZP,m=ee.Z,g=X.Z;return(0,p.wg)(),(0,p.j4)((0,p.SU)(v),{title:(0,p.SU)(l),width:"520"},{default:(0,p.w5)(()=>[(0,p.Wm)(g,{ref_key:"formRef",ref:i,model:(0,p.SU)(s),rules:n,class:"pt-12px"},{default:(0,p.w5)(()=>[(0,p.Wm)(r,{label:e.$t("api.form.apiName"),path:"api_name"},{default:(0,p.w5)(()=>[(0,p.Wm)(t,{value:(0,p.SU)(s).api_name,"onUpdate:value":a[0]||(a[0]=e=>(0,p.SU)(s).api_name=e),placeholder:e.$t("api.form.apiNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,p.Wm)(r,{label:e.$t("market.task.edit.from"),path:"addresser"},{default:(0,p.w5)(()=>[(0,p.Wm)(et.Z,{value:(0,p.SU)(s).addresser,"onUpdate:value":a[1]||(a[1]=e=>(0,p.SU)(s).addresser=e),domain:(0,p.SU)(s).domain,"onUpdate:domain":a[2]||(a[2]=e=>(0,p.SU)(s).domain=e),name:(0,p.SU)(s).full_name,"onUpdate:name":a[3]||(a[3]=e=>(0,p.SU)(s).full_name=e)},null,8,["value","domain","name"])]),_:1},8,["label"]),(0,p.Wm)(r,{label:e.$t("market.task.edit.displayName"),path:"full_name"},{default:(0,p.w5)(()=>[(0,p.Wm)(t,{value:(0,p.SU)(s).full_name,"onUpdate:value":a[4]||(a[4]=e=>(0,p.SU)(s).full_name=e),placeholder:e.$t("market.task.edit.displayNamePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,p.Wm)(r,{label:e.$t("market.task.edit.subject"),path:"subject"},{default:(0,p.w5)(()=>[(0,p.Wm)(t,{value:(0,p.SU)(s).subject,"onUpdate:value":a[5]||(a[5]=e=>(0,p.SU)(s).subject=e),placeholder:e.$t("market.task.edit.subjectPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,p.Wm)(r,{label:e.$t("market.task.edit.template"),path:"template_id"},{default:(0,p.w5)(()=>[(0,p._)("div",es,[(0,p.Wm)(el.Z,{value:(0,p.SU)(s).template_id,"onUpdate:value":a[6]||(a[6]=e=>(0,p.SU)(s).template_id=e),content:(0,p.SU)(s).template_content,"onUpdate:content":a[7]||(a[7]=e=>(0,p.SU)(s).template_content=e)},null,8,["value","content"])]),(0,p.Wm)(c,{text:"",type:"primary",class:"ml-12px",onClick:d},{default:(0,p.w5)(()=>[(0,p.Uk)((0,p.zw)(e.$t("common.actions.preview")),1)]),_:1})]),_:1},8,["label"]),(0,p.Wm)(r,{label:e.$t("market.task.edit.unsubscribeLink")},{default:(0,p.w5)(()=>[(0,p.Wm)(m,{value:(0,p.SU)(s).unsubscribe,"onUpdate:value":a[8]||(a[8]=e=>(0,p.SU)(s).unsubscribe=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,p.Wm)(r,{label:e.$t("api.form.status")},{default:(0,p.w5)(()=>[(0,p.Wm)(m,{value:(0,p.SU)(s).active,"onUpdate:value":a[9]||(a[9]=e=>(0,p.SU)(s).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,p.Wm)(r,{label:e.$t("api.form.ipWhitelist")},{default:(0,p.w5)(()=>[(0,p.Wm)(t,{value:(0,p.SU)(s).ip_whitelist,"onUpdate:value":a[10]||(a[10]=e=>(0,p.SU)(s).ip_whitelist=e),placeholder:e.$t("api.form.ipWhitelistPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,p.Wm)((0,p.SU)(o))]),_:1},8,["model"])]),_:1},8,["title"])}}});var eo=t(5163),eu=t(82183);t(40691),t(45086);let er={class:"flex items-center gap-16px w-full"},ed=["innerHTML"],ep=(0,p.aZ)({__name:"index",props:{code:{type:String,default:""},language:{type:String,default:"shell"}},setup(e){let a=(0,p.Fl)(()=>`\`\`\`${e.language}
${e.code}
\`\`\``),t=(0,p.Fl)(()=>eo.TU.parse(a.value)),{copyText:l}=(0,J.F)(),i=()=>{l(e.code)};return eo.TU.use({extensions:[{name:"highlight",level:"block",start(e){var a;return null==(a=e.match(/^```/))?void 0:a.index},tokenizer(e){let a=/^```([^\n]*?)\n([\s\S]*?)\n```/.exec(e);if(a)return{type:"highlight",raw:a[0],lang:a[1].trim(),code:a[2]}},renderer(e){let{lang:a,code:t}=e;if(a&&eu.Z.getLanguage(a)){let e=eu.Z.highlight(t,{language:a}).value;return`<pre><code class="hljs language-${a}">${e}</code></pre>`}return`<pre><code>${t}</code></pre>`}}]}),(e,a)=>{let l=k.ZP;return(0,p.wg)(),(0,p.iD)("div",er,[(0,p._)("div",{class:"markdown-body flex-1 w-0",innerHTML:(0,p.SU)(t)},null,8,ed),(0,p.Wm)(l,{onClick:i},{default:(0,p.w5)(()=>[(0,p.Uk)((0,p.zw)(e.$t("common.actions.copy")),1)]),_:1})])}}}),ec={class:"flex-1 mr-10px"},em=(0,p.aZ)({__name:"ApiTest",setup(e){let{t:a}=(0,f.QT)(),t=(0,p.iH)(""),l=(0,p.Fl)(()=>t.value.replaceAll("$email",i.recipient)),i=(0,p.qj)({recipient:""}),s={recipient:{required:!0,message:a("market.task.edit.testEmailPlaceholder")}},n=()=>{i.recipient=""},[o,r]=(0,Z.d)({onChangeState:e=>{if(e){let{row:e}=r.getState();e&&(t.value=`curl -k -X POST '${e.server_addresser}' \\
-H 'X-API-Key: ${e.api_key}' \\
-H 'Content-Type: application/json' \\
-d '{
	"recipient": "$email"
}'`)}else n()}});return(e,a)=>{let t=u.Z,n=ea.ZP,r=X.Z;return(0,p.wg)(),(0,p.j4)((0,p.SU)(o),{title:"Test API",width:"720",footer:!1},{default:(0,p.w5)(()=>[(0,p.Wm)(r,{ref:"formRef",model:(0,p.SU)(i),rules:s,class:"pt-12px"},{default:(0,p.w5)(()=>[(0,p.Wm)(n,{label:e.$t("market.task.edit.testEmail"),path:"recipient"},{default:(0,p.w5)(()=>[(0,p._)("div",ec,[(0,p.Wm)(t,{value:(0,p.SU)(i).recipient,"onUpdate:value":a[0]||(a[0]=e=>(0,p.SU)(i).recipient=e),placeholder:e.$t("market.task.edit.testEmailPlaceholder")},null,8,["value","placeholder"])])]),_:1},8,["label"]),(0,p.Wm)(n,{label:"Command"},{default:(0,p.w5)(()=>[(0,p.Wm)(ep,{code:(0,p.SU)(l),language:"bash"},null,8,["code"])]),_:1})]),_:1},8,["model"])]),_:1})}}}),ev={class:"p-24px"},eg={class:"bt-title"},ef={class:"flex flex-wrap items-center gap-16px"},e_={class:"flex items-center whitespace-pre"},eh={class:"text-default"},ew={class:"flex items-center whitespace-pre"},eb={class:"text-default"},ey={class:"w-120px"},eS={class:"flex items-center whitespace-pre"},ek={class:"text-default"},ex={class:"w-200px"},eU={class:"flex gap-8px"};function eW(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,p.lA)(e)}let eZ=(0,p.aZ)({__name:"index",setup(e){let{t:a}=(0,f.QT)(),t=(0,p.AE)("overviewRef"),d=[{label:a("api.statusOptions.all"),value:-1},{label:a("api.statusOptions.active"),value:1},{label:a("api.statusOptions.inactive"),value:0}],c=(0,p.iH)([{key:"api_name",title:a("api.columns.apiName"),maxWidth:120,render:e=>(0,p.Wm)(k.ZP,{type:"primary",text:!0,onClick:()=>{z(e)}},{default:()=>[e.api_name]})},{key:"api_key",title:a("api.columns.apiKey"),width:"28%",maxWidth:160,render:e=>(0,p.Wm)(Y,{class:"w-94%",value:e.api_key},null)},{key:"send_count",title:a("api.columns.sendCount"),width:"9%",maxWidth:100},{key:"open_rate",title:a("api.columns.openRate"),width:"9%",maxWidth:100,render:e=>`${e.open_rate}%`},{key:"click_rate",title:a("api.columns.clickRate"),width:"9%",maxWidth:100,render:e=>`${e.click_rate}%`},{key:"bounce_rate",title:a("api.columns.bounceRate"),width:"9%",maxWidth:100,render:e=>`${e.bounce_rate}%`},{key:"active",title:a("api.columns.status"),width:"8%",maxWidth:80,render:e=>(0,p.Wm)(x.ZP,{size:"small",type:e.active?"primary":"warning",bordered:!1},{default:()=>[e.active?a("api.statusLabels.active"):a("api.statusLabels.inactive")]})},{title:a("common.columns.actions"),key:"actions",align:"right",width:160,render:e=>{let t,l,i;return(0,p.Wm)(U.Z,{inline:!0},{default:()=>[(0,p.Wm)(k.ZP,{type:"primary",text:!0,onClick:()=>{T(e)}},eW(t=a("common.actions.test"))?t:{default:()=>[t]}),(0,p.Wm)(k.ZP,{type:"primary",text:!0,onClick:()=>{z(e)}},eW(l=a("common.actions.edit"))?l:{default:()=>[l]}),(0,p.Wm)(k.ZP,{type:"error",text:!0,onClick:()=>{O(e)}},eW(i=a("common.actions.delete"))?i:{default:()=>[i]})]})}}]),{tableParams:m,tableProps:v,pageProps:_,fetchTable:h}=(0,W.N)({params:{page:1,page_size:10,keyword:"",active:-1,time_range:[0,0]},immediate:!1,fetchFn:j,useParams:e=>({page:e.page,page_size:e.page_size,keyword:e.keyword,active:e.active,start_time:Math.floor(e.time_range[0]/1e3),end_time:Math.floor(e.time_range[1]/1e3)})}),w=async()=>{var e;null==(e=t.value)||e.getStats(),h()},[b,y]=(0,Z.d)({component:en,state:{isEdit:!1,refresh:h}}),$=()=>{y.setState({row:null,isEdit:!1}),y.open()},z=e=>{y.setState({row:e,isEdit:!0}),y.open()},[P,C]=(0,Z.d)({component:em,state:{row:null}}),T=e=>{C.setState({row:e}),C.open()},O=e=>{(0,g.iG)({title:a("api.confirmDelete.title",{apiName:e.api_name}),content:a("api.confirmDelete.content"),onConfirm:async()=>{await M({id:e.id}),h()}})};return(0,p.bv)(()=>{h()}),(e,a)=>{let g=r.Z,f=u.Z,y=o.ZP,x=n.Z,U=s.Z,W=i.Z,Z=l.Z;return(0,p.wg)(),(0,p.iD)("div",ev,[(0,p._)("div",eg,(0,p.zw)(e.$t("api.title")),1),(0,p.Wm)(y,{class:"mb-24px","content-style":{padding:"16px 24px"}},{default:(0,p.w5)(()=>[(0,p._)("div",ef,[(0,p._)("div",e_,[(0,p._)("span",eh,(0,p.zw)(e.$t("api.timeRange")),1),(0,p.Wm)(S,{value:(0,p.SU)(m).time_range,"onUpdate:value":a[0]||(a[0]=e=>(0,p.SU)(m).time_range=e),"default-type":"last7days",onChange:w},null,8,["value"])]),(0,p._)("div",ew,[(0,p._)("span",eb,(0,p.zw)(e.$t("api.status")),1),(0,p._)("div",ey,[(0,p.Wm)(g,{value:(0,p.SU)(m).active,"onUpdate:value":[a[1]||(a[1]=e=>(0,p.SU)(m).active=e),a[2]||(a[2]=()=>(0,p.SU)(h)(!0))],options:d},null,8,["value"])])]),(0,p._)("div",eS,[(0,p._)("span",ek,(0,p.zw)(e.$t("api.search")),1),(0,p._)("div",ex,[(0,p.Wm)(f,{value:(0,p.SU)(m).keyword,"onUpdate:value":a[3]||(a[3]=e=>(0,p.SU)(m).keyword=e),placeholder:e.$t("api.searchPlaceholder"),onKeyup:a[4]||(a[4]=(0,p.D2)(()=>(0,p.SU)(h)(!0),["enter"]))},null,8,["value","placeholder"])])]),(0,p._)("div",eU,[(0,p.Wm)((0,p.SU)(k.ZP),{type:"primary",ghost:"",onClick:a[5]||(a[5]=()=>(0,p.SU)(h)(!0))},{default:(0,p.w5)(()=>[(0,p.Uk)((0,p.zw)(e.$t("common.actions.refresh")),1)]),_:1}),(0,p.Wm)((0,p.SU)(k.ZP),{type:"primary",ghost:"",onClick:w},{default:(0,p.w5)(()=>[(0,p.Uk)((0,p.zw)(e.$t("api.refreshData")),1)]),_:1})])])]),_:1}),(0,p.Wm)(E,{ref_key:"overviewRef",ref:t,time:(0,p.SU)(m).time_range},null,8,["time"]),(0,p.Wm)(Z,null,{toolsLeft:(0,p.w5)(()=>[(0,p.Wm)((0,p.SU)(k.ZP),{type:"primary",onClick:$},{default:(0,p.w5)(()=>[(0,p.Uk)((0,p.zw)(e.$t("api.createNew")),1)]),_:1}),(0,p.Wm)(x,{href:"https://www.billionmail.com/start/api_mail_guide.html",text:e.$t("common.actions.help")},null,8,["text"])]),table:(0,p.w5)(()=>[(0,p.Wm)(U,(0,p.dG)((0,p.SU)(v),{columns:(0,p.SU)(c)}),null,16,["columns"])]),pageRight:(0,p.w5)(()=>[(0,p.Wm)(W,(0,p.dG)((0,p.SU)(_),{onRefresh:(0,p.SU)(h)}),null,16,["onRefresh"])]),modal:(0,p.w5)(()=>[(0,p.Wm)((0,p.SU)(b)),(0,p.Wm)((0,p.SU)(P))]),_:1})])}}})},66844:function(e,a,t){t.d(a,{Z:()=>d});var l=t(46126),i=t(25595),s=t(43407),n=t(25464),o=t(6097);let u={class:"flex-1"},r={class:"flex-1 ml-10px"},d=(0,i.aZ)({__name:"FromSelect",props:{value:{},valueModifiers:{},name:{},nameModifiers:{},domain:{},domainModifiers:{}},emits:["update:value","update:name","update:domain"],setup(e){let a=(0,i.tT)(e,"value"),t=(0,i.tT)(e,"name"),d=(0,i.iH)(!1),p=(0,i.tT)(e,"domain"),c=(0,i.iH)([]),m=(0,i.iH)([]),v=(0,i.Fl)(()=>m.value.filter(e=>e.domain===p.value).map(e=>({label:e.username,value:e.username,data:e}))),g=async()=>{await (0,i.Y3)(),v.value.length>0?(a.value=v.value[0].value,f(a.value,v.value[0])):(a.value=null,t.value="")},f=(e,a)=>{let{data:l}=a;(0,s.Kn)(l)&&(t.value=l.full_name)},_=async()=>{let e=await (0,n.LC)();(0,s.kJ)(e)&&(c.value=e.map(e=>({label:e.domain,value:e.domain})),null===p.value&&e.length>0&&(p.value=e[0].domain))},h=async()=>{let e=await (0,o.iC)({page:1,page_size:1e3,domain:""});(0,s.Kn)(e)&&(m.value=e.list)};return(async()=>{try{d.value=!0,await h(),await _(),await (0,i.Y3)(),null===a.value&&g()}finally{d.value=!1}})(),(e,t)=>{let s=l.Z;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",u,[(0,i.Wm)(s,{value:p.value,"onUpdate:value":[t[0]||(t[0]=e=>p.value=e),g],loading:(0,i.SU)(d),options:(0,i.SU)(c)},null,8,["value","loading","options"])]),(0,i._)("div",r,[(0,i.Wm)(s,{value:a.value,"onUpdate:value":[t[1]||(t[1]=e=>a.value=e),f],loading:(0,i.SU)(d),options:(0,i.SU)(v),filterable:!0},null,8,["value","loading","options"])])],64)}}})},72227:function(e,a,t){t.d(a,{Z:()=>o});var l=t(46126),i=t(25595),s=t(43407),n=t(81208);let o=(0,i.aZ)({__name:"TemplateSelect",props:{value:{},valueModifiers:{},content:{},contentModifiers:{}},emits:(0,i.Vf)(["listReady"],["update:value","update:content"]),setup(e,a){let{emit:t}=a,o=(0,i.tT)(e,"value"),u=(0,i.tT)(e,"content"),r=(0,i.iH)(!1),d=(0,i.iH)([]),p=(e,a)=>{let{data:t}=a;(0,s.Kn)(t)&&(u.value=t.html_content)};return(async()=>{try{r.value=!0;let e=await (0,n.NI)();if((0,s.kJ)(e)){if(d.value=e.map(e=>({label:e.temp_name,value:e.id,data:e})),null===o.value)o.value=e[0].id,u.value=e[0].html_content;else{let a=e.find(e=>e.id===o.value);a&&(u.value=a.html_content)}t("listReady",e)}}finally{r.value=!1}})(),(e,a)=>{let t=l.Z;return(0,i.wg)(),(0,i.j4)(t,{value:o.value,"onUpdate:value":[a[0]||(a[0]=e=>o.value=e),p],loading:(0,i.SU)(r),filterable:!0,options:(0,i.SU)(d)},null,8,["value","loading","options"])}}})},99389:function(e,a,t){t.d(a,{Z:()=>n});var l=t(59147),i=t(25595),s=t(16821);let n=(0,i.aZ)({__name:"TemplatePreview",setup(e){let a=(0,i.iH)(""),[t,n]=(0,s.d)({onChangeState:e=>{e&&(a.value=n.getState().html||"")}});return(e,s)=>{let n=l.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(t),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,i.w5)(()=>[(0,i.Wm)(n,{height:580,value:(0,i.SU)(a)},null,8,["value"])]),_:1},8,["title"])}}})}}]);