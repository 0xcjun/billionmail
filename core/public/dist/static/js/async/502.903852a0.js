"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["502"],{6949:function(e,t,a){a.d(t,{Z:()=>i});var l=a(2822),o=a(2965),s=a(209);let i=e=>{let{fetchFn:t,params:a,loading:i=!1,immediate:r=!1}=e,n=(0,s.iH)(i),d=(0,s.iH)([]),u=(0,s.iH)(0),p=(0,s.iH)(a),c=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&(a.page=1),t){n.value=!0;try{let e=await t(p.value);(0,o.Kn)(e)&&(d.value=(0,o.kJ)(e.list)?e.list:[],u.value=(0,l.Z)(e.total)?e.total:0)}finally{n.value=!1}}};return r&&c(),{loading:n,tableList:d,tableTotal:u,tableParams:p,getTableData:c}}},3312:function(e,t,a){a.d(t,{d:()=>i});var l=a(209),o=a(8429);let s=Symbol("MODAL_INJECT"),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:i,onConfirm:r}=e,n=(0,l.qj)({});return a?[(0,l.aZ)({setup(o,i){let{attrs:r,slots:d}=i;return(0,l.JJ)(s,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(n,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,l.h)(a,{...o,...r},d)}}),n]:[(0,l.aZ)({setup(t,a){let{attrs:d,slots:u}=a,p=(0,l.f3)(s),c=(0,l.iH)(!1);return n.open=()=>{var t;c.value=!0,null===(t=e.onChangeState)||void 0===t||t.call(e,c.value)},n.close=()=>{c.value=!1},n.setState=t=>{var a;null==p||p.setState(t),null===(a=e.onChangeState)||void 0===a||a.call(e,c.value)},n.getState=()=>(null==p?void 0:p.state)??{},null==p||p.extendApi(n),()=>(0,l.Wm)(o.Z,(0,l.dG)({show:c.value},t,d,{onCancel:i,onConfirm:r,"onUpdate:show":e=>{c.value=e??!1}}),u)}}),n]}},4652:function(e,t,a){a.d(t,{Z:()=>s});var l=a(7714),o=a(209);let s=(0,o.aZ)({__name:"index",setup(e){let t=!!(0,o.Rr)().toolsLeft,a=!!(0,o.Rr)().toolsRight,s=!!(0,o.Rr)().pageLeft||!!(0,o.Rr)().pageRight;return(e,i)=>{let r=l.Z;return(0,o.wg)(),(0,o.iD)("div",null,[t||a?((0,o.wg)(),(0,o.j4)(r,{key:0,class:"items-center mb-16px",justify:"space-between"},{default:(0,o.w5)(()=>[(0,o.Wm)(r,{class:"items-center",size:8},{default:(0,o.w5)(()=>[(0,o.WI)(e.$slots,"toolsLeft")]),_:3}),(0,o.Wm)(r,{class:"items-center",size:8},{default:(0,o.w5)(()=>[(0,o.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,o.kq)("",!0),(0,o.WI)(e.$slots,"table"),(0,o.SU)(s)?((0,o.wg)(),(0,o.j4)(r,{key:1,class:"items-center mt-16px",justify:"space-between"},{default:(0,o.w5)(()=>[(0,o._)("div",null,[(0,o.WI)(e.$slots,"pageLeft")]),(0,o.Wm)(r,null,{default:(0,o.w5)(()=>[(0,o.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,o.kq)("",!0),(0,o.WI)(e.$slots,"modal")])}}})},3951:function(e,t,a){a.d(t,{Z:()=>s});var l=a(9833),o=a(209);let s=(0,o.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:a}=t,s=(0,o.iH)(null);return a({validate:()=>{var e;return null===(e=s.value)||void 0===e?void 0:e.validate()},restoreValidation:()=>{var e;return null===(e=s.value)||void 0===e?void 0:e.restoreValidation()}}),(e,t)=>{let a=l.Z;return(0,o.wg)(),(0,o.j4)(a,(0,o.dG)(e.$attrs,{ref_key:"formRef",ref:s,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,o.w5)(()=>[(0,o.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},6818:function(e,t,a){a.d(t,{Z:()=>r});var l=a(1327),o=a(209),s=a(2965);let i={class:"ml-8px text-14px"},r=(0,o.aZ)({__name:"index",props:(0,o.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,o.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:a}=t,r=(0,o.Fl)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),n=(0,o.tT)(e,"page"),d=(0,o.tT)(e,"pageSize"),u=e=>{n.value=e,a("refresh")},p=e=>{n.value=1,d.value=e,c(e),a("refresh")},c=e=>{r.value&&(0,s.qQ)(r.value,String(e))};return(()=>{if(r.value){let e=(0,s.$o)(r.value);e&&(d.value=(0,s.Dx)(e))}})(),(e,t)=>{let a=l.Z;return(0,o.wg)(),(0,o.j4)(a,(0,o.dG)(e.$attrs,{page:n.value,"onUpdate:page":[t[0]||(t[0]=e=>n.value=e),u],"page-size":d.value,"onUpdate:pageSize":[t[1]||(t[1]=e=>d.value=e),p],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,o.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,o.w5)(e=>{let{itemCount:t}=e;return[(0,o._)("span",i," Total "+(0,o.zw)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},1496:function(e,t,a){a.r(t),a.d(t,{default:()=>Z});var l=a(4652),o=a(6818),s=a(3435),i=a(209),r=a(9946),n=a(7714),d=a(3447),u=a(2965),p=a(6949),c=a(3312),f=a(4203);let{t:m}=a(4958).Z.global,g=e=>f.e.get("/mail_forward/list",{params:e}),w=e=>f.e.post("/mail_forward/add",e,{fetchOptions:{loading:m("settings.forward.loading.adding"),successMessage:!0}}),v=e=>f.e.post("/mail_forward/edit",e,{fetchOptions:{loading:m("settings.forward.loading.editing"),successMessage:!0}}),h=e=>f.e.post("/mail_forward/delete",e,{fetchOptions:{loading:m("settings.forward.loading.deleting"),successMessage:!0}});var S=a(3951),U=a(8454),k=a(6883),_=a(5778);let y=(0,i.aZ)({__name:"ForwardForm",setup(e){let{t}=(0,_.QT)(),a=(0,i.iH)(!1),l=(0,i.Fl)(()=>a.value?t("settings.forward.edit"):t("settings.forward.add")),o=(0,i.AE)("formRef"),s=(0,i.qj)({active:1,address:"",domain:"",goto:""}),n={},[d,u]=(0,c.d)({onChangeState:e=>{if(e){let e=u.getState(),{row:t}=e;a.value=e.isEdit,t&&(s.address=t.address,s.goto=t.goto,s.active=t.active)}else s.address="",s.goto="",s.domain="",s.active=1},onConfirm:async()=>{var e;await (null===(e=o.value)||void 0===e?void 0:e.validate()),a.value?await v((0,i.IU)(s)):await w((0,i.IU)(s)),u.getState().refresh()}});return(e,u)=>{let p=r.Z,c=k.ZP,f=U.Z,m=S.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(d),{title:(0,i.SU)(l),width:"480"},{default:(0,i.w5)(()=>[(0,i.Wm)(m,{ref_key:"formRef",ref:o,class:"pt-8px",model:(0,i.SU)(s),rules:n},{default:(0,i.w5)(()=>[(0,i.Wm)(c,{label:(0,i.SU)(t)("settings.forward.form.status")},{default:(0,i.w5)(()=>[(0,i.Wm)(p,{value:(0,i.SU)(s).active,"onUpdate:value":u[0]||(u[0]=e=>(0,i.SU)(s).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"]),(0,i.Wm)(c,{label:(0,i.SU)(t)("settings.forward.form.forwardedUsers"),path:"address"},{default:(0,i.w5)(()=>[(0,i.Wm)(f,{value:(0,i.SU)(s).address,"onUpdate:value":u[1]||(u[1]=e=>(0,i.SU)(s).address=e),disabled:(0,i.SU)(a),placeholder:(0,i.SU)(t)("settings.forward.form.forwardedUsersPlaceholder")},null,8,["value","disabled","placeholder"])]),_:1},8,["label"]),(0,i.SU)(a)?(0,i.kq)("",!0):((0,i.wg)(),(0,i.j4)(c,{key:0,label:(0,i.SU)(t)("settings.forward.form.domain"),path:"domain"},{default:(0,i.w5)(()=>[(0,i.Wm)(f,{value:(0,i.SU)(s).domain,"onUpdate:value":u[2]||(u[2]=e=>(0,i.SU)(s).domain=e),placeholder:(0,i.SU)(t)("settings.forward.form.domainPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])),(0,i.Wm)(c,{label:(0,i.SU)(t)("settings.forward.form.receivingUser"),path:"goto"},{default:(0,i.w5)(()=>[(0,i.Wm)(f,{value:(0,i.SU)(s).goto,"onUpdate:value":u[3]||(u[3]=e=>(0,i.SU)(s).goto=e),type:"textarea",row:4,placeholder:(0,i.SU)(t)("settings.forward.form.receivingUserPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title"])}}});function b(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,i.lA)(e)}let Z=(0,i.aZ)({__name:"index",setup(e){let{t}=(0,_.QT)(),{tableParams:a,tableList:f,loading:m,tableTotal:w,getTableData:S}=(0,p.Z)({loading:!0,immediate:!0,params:{page:1,page_size:10,domain:"",keyword:""},fetchFn:g}),U=(0,i.iH)([{key:"address",title:t("settings.forward.columns.address"),ellipsis:{tooltip:!0}},{key:"goto",title:t("settings.forward.columns.goto"),ellipsis:{tooltip:!0}},{key:"domain",title:t("settings.forward.columns.domain"),ellipsis:{tooltip:!0}},{key:"create_time",title:t("settings.forward.columns.created"),render:e=>(0,u.mr)(e.create_time)},{key:"update_time",title:t("settings.forward.columns.modified"),render:e=>(0,u.mr)(e.update_time)},{key:"active",title:t("settings.forward.columns.status"),render:e=>(0,i.Wm)(r.Z,{size:"small",value:e.active,"checked-value":1,"unchecked-value":0,onUpdateValue:t=>{x(t,e)}},null)},{title:t("common.columns.actions"),key:"actions",align:"right",width:120,render:e=>{let a,l;return(0,i.Wm)(n.Z,{inline:!0},{default:()=>[(0,i.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{j(e)}},b(a=t("common.actions.edit"))?a:{default:()=>[a]}),(0,i.Wm)(d.ZP,{type:"error",text:!0,onClick:()=>{R(e)}},b(l=t("common.actions.delete"))?l:{default:()=>[l]})]})}}]),[k,Z]=(0,c.d)({component:y,state:{isEdit:!1,refresh:S}}),W=()=>{Z.setState({isEdit:!1,row:null}),Z.open()},z=()=>{S(!0)},j=e=>{Z.setState({isEdit:!0,row:e}),Z.open()},x=async(e,t)=>{await v({address:t.address,goto:t.goto,active:e}),S()},R=e=>{(0,u.iG)({title:t("settings.forward.delete.title"),content:t("settings.forward.delete.content",{address:e.address}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await h({address:e.address}),S()}})};return(e,t)=>{let r=s.Z,n=o.Z,u=l.Z;return(0,i.wg)(),(0,i.j4)(u,null,{toolsLeft:(0,i.w5)(()=>[(0,i.Wm)((0,i.SU)(d.ZP),{type:"primary",onClick:W},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("settings.forward.add")),1)]),_:1})]),toolsRight:(0,i.w5)(()=>[(0,i.Wm)((0,i.SU)(d.ZP),{onClick:z},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.actions.refresh")),1)]),_:1})]),table:(0,i.w5)(()=>[(0,i.Wm)(r,{loading:(0,i.SU)(m),columns:(0,i.SU)(U),data:(0,i.SU)(f)},null,8,["loading","columns","data"])]),pageRight:(0,i.w5)(()=>[(0,i.Wm)(n,{page:(0,i.SU)(a).page,"onUpdate:page":t[0]||(t[0]=e=>(0,i.SU)(a).page=e),"page-size":(0,i.SU)(a).page_size,"onUpdate:pageSize":t[1]||(t[1]=e=>(0,i.SU)(a).page_size=e),"item-count":(0,i.SU)(w),onRefresh:(0,i.SU)(S)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,i.w5)(()=>[(0,i.Wm)((0,i.SU)(k))]),_:1})}}})}}]);