"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["6675"],{39432:function(e,t,a){a.d(t,{Au:()=>m,Fj:()=>s,LC:()=>o,Lb:()=>_,OV:()=>r,dj:()=>u,gK:()=>d,i7:()=>n,rU:()=>v,v1:()=>c,xh:()=>f,yW:()=>p});var l=a(34541);let{t:i}=a(76882).Z.global,n=e=>l.e.get("/domains/list",{params:e}),o=()=>l.e.get("/domains/all"),s=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),d=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),u=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),r=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),m=e=>l.e.get("/domains/get_ssl",{params:e}),c=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),p=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}}),f=e=>l.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}}),v=e=>l.e.post("/askai/project/create",e,{fetchOptions:{loading:"Setting domain brand info , please wait...",successMessage:!0}}),_=()=>l.e.post("/askai/supplier/status")},77984:function(e,t,a){a.d(t,{F:()=>o});var l=a(68271),i=a(94821),n=a(76882);let o=()=>{let{t:e}=n.Z.global,{copy:t,isSupported:a,copied:o}=(0,i.VPI)({legacy:!0});return{copied:o,copyText:async i=>{if(!i)return void l.v0.error(e("common.useCopy.noText"));a.value?(await t(i),l.v0.success(e("common.useCopy.success"))):l.v0.error(e("common.useCopy.failed"))}}}},16634:function(e,t,a){a.d(t,{Ao:()=>o,mL:()=>s,uL:()=>n});var l=a(34541),i=a(42205);let n={fetchOptions:{loading:"Loading... Please wait.",successMessage:!0}};async function o(e){let{legal_company_name:t,web_site:a,company_profile:n,email:o,phone:s,support_url:d,hasGotCompanyProfile:u}=(0,i.J)();if(!u.value)try{let i=await l.e.post("/askai/project/get_company_profile",{domain:e});t.value=i.legal_company_name,a.value=i.web_site,n.value=i.company_profile,o.value=i.email,s.value=i.phone,d.value=i.support_url,u.value=!0}catch(e){console.warn(e)}}async function s(e){let{legal_company_name:t,web_site:a,company_profile:o,email:s,phone:d,support_url:u}=(0,i.J)();try{await l.e.post("/askai/project/modify_company_profile",{domain:e,legal_company_name:t.value,web_site:a.value,company_profile:o.value,email:s.value,phone:d.value,support_url:u.value},n)}catch(e){console.warn(e)}}},54686:function(e,t,a){a.d(t,{L7:()=>v,Rw:()=>_,VP:()=>w,Vq:()=>h,Xe:()=>p,gK:()=>c,ke:()=>f,lQ:()=>r});var l=a(34541),i=a(16634),n=a(42205),o=a(68271),s=a(39432),d=a(31708),u=a(76882);async function r(e){let{domainTit:t,quota:a,unit:i,mailboxes:s,catch_email:d,hasGotDomainConfiguration:u,urls:r}=(0,n.J)();if(!u.value)try{let{list:n}=await l.e.get("/domains/list",{params:{keyword:e,page:1,page_size:1}}),c=(0,o.UO)(n[0].quota,!0,2).split(" ");t.value=n[0].domain,a.value=c[0],i.value=c[1],s.value=n[0].mailboxes,d.value=n[0].email,r.value=n[0].urls&&n[0].urls.length>0&&""!=n[0].urls[0]?n[0].urls:[`https://${e}`],await m(e),u.value=!0}catch(e){console.warn(e)}}async function m(e){let{brandInfo:t,createdBrandInfo:a}=(0,n.J)();try{let i=await l.e.post("/askai/project/get_project_status",{domain:e});t.value=i.status,a.value=i.create_status}catch(e){console.warn(e)}}async function c(){let{domainTit:e,quota:t,unit:a,urls:o,mailboxes:s,catch_email:d}=(0,n.J)(),u=function(e,t){switch(t){case"KB":return 1024*e;case"MB":return 1024*e*1024;case"GB":return 1024*e*1048576;case"TB":return 1024*e*0x40000000;default:return e}}(Number(t.value),a.value);try{await l.e.post("/domains/update",{domain:e.value,mailboxes:s.value,mailboxQuota:u,quota:u,rateLimit:1,active:1,email:d.value,urls:o.value},i.uL)}catch(e){console.warn(e)}}async function p(){let{waitAndCheckDomainStatusRef:e,domainTit:t,urls:a,hasGotDomainConfiguration:l}=(0,n.J)(),i=(0,d.s6)();if(l.value=!1,0==a.value.length||""==a.value[0])o.v0.error(u.Z.global.t("domain.edit.domainConfiguration.fillDomain"));else if((0,o.CB)(a.value[0]))try{await (0,s.rU)({domain:t.value,urls:a.value}),i.domainSource=t.value,e.value.open(t.value,()=>{f(t.value,1),r(t.value)})}catch(e){console.warn(e)}else o.v0.error(u.Z.global.t("domain.edit.domainConfiguration.fillValidDomain"))}async function f(e,t){try{await l.e.post("/domains/update",{domain:e,hasbrandinfo:t})}catch(e){console.warn(e)}}function v(e){let{urls:t}=(0,n.J)(),a=t.value[0].match(/http:\/\/?/g),l=t.value[0].match(/https:\/\/?/g);a&&(t.value[0]=a[0]+e),l&&(t.value[0]=l[0]+e),a||l||(t.value[0]="https://"+e)}function _(e){let{urls:t}=(0,n.J)();t.value.splice(e,1)}function w(){let{hasGotAisettings:e,hasGotCompanyProfile:t,hasGotDomainConfiguration:a,hasGotFootersettings:l,hasGotProjectDetail:i,hasGotSitemap:o,hasGotStyling:s}=(0,n.J)();e.value=!1,t.value=!1,a.value=!1,l.value=!1,i.value=!1,o.value=!1,s.value=!1}async function h(e){let{brandInfo:t,domainTit:a}=(0,n.J)();try{await l.e.post("/askai/project/set_project_status",{domain:a.value,status:e},i.uL),await l.e.post("/domains/update",{domain:a.value,active:1,hasbrandinfo:Number(e)})}catch(a){t.value=!e,console.warn(a)}}},42205:function(e,t,a){a.d(t,{J:()=>o});var l=a(30989),i=a(58786);let n=(0,l.Q_)("editDomainStore",()=>{let e=(0,i.iH)(!1),t=(0,i.iH)(""),a=(0,i.iH)("0"),l=(0,i.iH)("B"),n=(0,i.iH)(0),o=(0,i.iH)(""),s=(0,i.iH)(["https://"]),d=(0,i.iH)(!1),u=(0,i.iH)(),r=(0,i.iH)(!1),m=(0,i.iH)(!1),c=(0,i.iH)(""),p=(0,i.iH)(""),f=(0,i.iH)(""),v=(0,i.iH)(""),_=(0,i.iH)(""),w=(0,i.iH)(""),h=(0,i.iH)(""),y=(0,i.iH)([]),S=(0,i.iH)({title:"",content:"",kid:"",update_time:0}),g=(0,i.iH)(""),U=(0,i.iH)(""),b=(0,i.iH)(!1),x=(0,i.iH)(!1),k=(0,i.iH)(""),W=(0,i.iH)(!1),z=(0,i.iH)(""),H=(0,i.iH)(!1),Z=(0,i.iH)(""),C=(0,i.iH)(""),q=(0,i.iH)(""),j=(0,i.iH)(""),D=(0,i.iH)(""),P=(0,i.iH)(""),$=(0,i.iH)(!1),T=(0,i.iH)(""),M=(0,i.iH)(""),O=(0,i.iH)(""),F=(0,i.iH)(""),A=(0,i.iH)(""),B=(0,i.iH)(""),I=(0,i.iH)(""),L=(0,i.iH)(""),J=(0,i.iH)(!1),R=(0,i.iH)([{title:"",uri_path:""}]),G=(0,i.iH)(!1),K=(0,i.iH)(""),V=(0,i.iH)("");return{hasGotDomainConfiguration:e,domainTit:t,quota:a,unit:l,mailboxes:n,catch_email:o,urls:s,brandInfo:d,waitAndCheckDomainStatusRef:u,createdBrandInfo:r,hasGotProjectDetail:m,domain:c,description:p,favicon:f,industry:v,primary_logo:_,project_name:w,secondary_logo:h,knowledge_base:y,activeKnowledge:S,knowledgeTitle:g,knowledgeContent:U,knowledgeModalShow:b,isEditKnowledge:x,knowledge_base_content:k,knowledgeBasePreview:W,knowledgeBasePreviewTit:z,hasGotCompanyProfile:H,legal_company_name:Z,web_site:C,company_profile:q,email:j,phone:D,support_url:P,hasGotStyling:$,accent_color:T,text_color:M,page_background:O,container_background:F,link_social_color:A,link_footer_color:B,heading_font:I,body_font:L,hasGotSitemap:J,sitemap:R,hasGotFootersettings:G,copyright_text:K,disclaimer:V,hasGotAisettings:(0,i.iH)(!1),prompt:(0,i.iH)("")}});function o(){let e=n();return{...(0,l.Jk)(e)}}},51169:function(e,t,a){a.d(t,{d:()=>o});var l=a(58786),i=a(49247);let n=Symbol("MODAL_INJECT"),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:o,onConfirm:s}=e,d=(0,l.qj)({});return a?[(0,l.aZ)({setup(i,o){let{attrs:s,slots:u}=o;return(0,l.JJ)(n,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(d,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,l.h)(a,{...i,...s},u)}}),d]:[(0,l.aZ)({setup(t,a){let{attrs:u,slots:r}=a,m=(0,l.f3)(n),c=(0,l.iH)(!1);return d.open=()=>{var t;c.value=!0,null==(t=e.onChangeState)||t.call(e,c.value)},d.close=()=>{c.value=!1},d.setState=t=>{var a;null==m||m.setState(t),null==(a=e.onChangeState)||a.call(e,c.value)},d.getState=()=>(null==m?void 0:m.state)??{},null==m||m.extendApi(d),()=>(0,l.Wm)(i.Z,(0,l.dG)({show:c.value},t,u,{onCancel:o,onConfirm:s,"onUpdate:show":e=>{c.value=e??!1}}),r)}}),d]}},16893:function(e,t,a){a.d(t,{Z:()=>o});var l=a(15496),i=a(58786);let n={class:"mr-4px"},o=(0,i.aZ)({__name:"index",props:{href:{type:String,default:""},text:{type:String,default:""}},setup(e){let t=()=>{window.open(e.href)};return(a,o)=>{let s=l.ZP;return(0,i.wg)(),(0,i.j4)(s,{text:"",onClick:t},{default:(0,i.w5)(()=>[(0,i._)("span",n,(0,i.zw)(e.text||a.$t("common.actions.help")),1),o[0]||(o[0]=(0,i._)("i",{class:"i-custom:help text-primary"},null,-1))]),_:1,__:[0]})}}})},88583:function(e,t,a){a.d(t,{Z:()=>n});var l=a(58786);let i={class:"bt-tips flex flex-col gap-4px list-outside list-disc leading-20px text-[#777]"},n=(0,a(41748).default)({},[["render",function(e,t){return(0,l.wg)(),(0,l.iD)("ul",i,[(0,l.WI)(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-8731a1b4"]])},46244:function(e,t,a){a.d(t,{Z:()=>n});var l=a(98048),i=a(58786);let n=(0,i.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:a}=t,n=(0,i.iH)(null);return a({validate:()=>{var e;return null==(e=n.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=n.value)?void 0:e.restoreValidation()}}),(e,t)=>{let a=l.Z;return(0,i.wg)(),(0,i.j4)(a,(0,i.dG)(e.$attrs,{ref_key:"formRef",ref:n,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},1418:function(e,t,a){a.d(t,{Z:()=>p});var l=a(5057),i=a(57869),n=a(58786),o=a(99778),s=a(31708),d=a(34541),u=a(68271),r=a(52495);let m={class:"flex justify-start gap-2.5 bg-transparent items-center"},c={class:"flex items-center text-4"},p=(0,n.aZ)({__name:"WaitAndCheckDomainStatus",setup(e,t){let{expose:a}=t,{t:p}=(0,r.QT)(),f=(0,n.iH)(!1),v=(0,s.s6)(),_=(0,n.iH)();function w(){f.value=!1}function h(e,t){let a=setInterval(async()=>{await y(e)&&(u.v0.success(p("domain.waitAndCheckDomainStatus.success")),t&&t(),w(),clearInterval(a),_.value.open())},1e3)}async function y(e){try{if((await d.e.post("/askai/project/get_base_info",{domain:e})).update_time)return!0;return!1}catch(e){return console.warn(e),u.v0.error(p("domain.waitAndCheckDomainStatus.error")),!1}}return a({open:function(e,t){h(e,t),v.domainSource=e,f.value=!0},close:w,checkStatus:h}),(e,t)=>{let a=i.ZP,s=l.Z;return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(s,{show:(0,n.SU)(f),"onUpdate:show":t[0]||(t[0]=e=>(0,n.dq)(f)?f.value=e:null),"close-on-esc":!1,"mask-closable":!1},{default:(0,n.w5)(()=>[(0,n.Wm)(a,{style:{width:"auto"}},{default:(0,n.w5)(()=>[(0,n._)("div",m,[t[1]||(t[1]=(0,n._)("i",{class:"i-svg-spinners:bars-scale text-[var(--color-primary-1)] text-6"},null,-1)),(0,n._)("span",c,(0,n.zw)(e.$t("domain.waitAndCheckDomainStatus.loading")),1)])]),_:1})]),_:1},8,["show"]),(0,n.Wm)(o.Z,{ref_key:"createTplModal",ref:_,"only-ai":!0},null,512)],64)}}})},16435:function(e,t,a){a.r(t),a.d(t,{default:()=>eT});var l=a(39244),i=a(25170),n=a(60424),o=a(66760),s=a(16893),d=a(58786),u=a(15496),r=a(53903),m=a(93953),c=a(68271),p=a(51169),f=a(67512),v=a(39432),_=a(46244),w=a(99321),h=a(29875),y=a(8490),S=a(29283),g=a(6455),U=a(73084),b=a(49942),x=a(88583),k=a(1418),W=a(52672),z=a(31708),H=a(52495);let Z={class:"pt-16px"},C={class:"flex items-center justify-start gap-1.25"},q={class:"text-error"},j={class:"w-100px ml-20px"},D={class:"flex justify-start items-center"},P={class:"w-100% flex justify-between items-center"},$={class:"mr-5"},T={class:"text-[#777] flex justify-start"},M={class:"w-100% flex flex-col gap-2.5"},O=["onClick"],F=(0,d.aZ)({__name:"DomainForm",setup(e){let{t}=(0,H.QT)(),a=(0,d.iH)(!1),l=(0,d.iH)(),i=(0,d.Fl)(()=>a.value?t("domain.form.editTitle"):t("domain.form.addTitle")),n=(0,d.iH)(!1),o=(0,z.s6)(),s=(0,d.AE)("formRef"),r=(0,d.iH)(!1),m=(0,d.iH)(["https://"]),f=(0,d.qj)({domain:"",a_record:"",quota:5,quota_unit:"GB",mailboxes:50,email:""}),F=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],A={domain:{trigger:["blur","input"],validator:()=>""!==f.domain.trim()||Error(t("domain.form.validation.domainRequired"))}},B=(e,t)=>{switch(t){case"GB":return 1024*e*1048576;case"MB":return 1024*e*1024;default:return e}},I=e=>{let t=m.value[0].match(/http:\/\/?/g),a=m.value[0].match(/https:\/\/?/g);t&&(m.value[0]=t[0]+e),a&&(m.value[0]=a[0]+e),t||a||(m.value[0]="https://"+e)},L=e=>{m.value.splice(e,1)},[J,R]=(0,p.d)({onChangeState:async e=>{if(e){let e=R.getState();if(a.value=e.isEdit,n.value=(await (0,v.Lb)()).is_configured,e.row){let{row:t}=e;f.domain=t.domain,f.a_record=t.a_record;let a=(0,c.UO)(t.quota);f.quota=(0,c.Dx)(a.split(" ")[0]),f.quota_unit=a.split(" ")[1],f.mailboxes=t.mailboxes,f.email=t.email}}else f.domain="",f.a_record="",f.quota=5,f.quota_unit="GB",f.mailboxes=50,f.email="",m.value=["https://"]},onConfirm:async()=>{var e;await (null==(e=s.value)?void 0:e.validate()),a.value?await (0,v.gK)({domain:f.domain,quota:B(f.quota,f.quota_unit),mailboxes:f.mailboxes,email:f.email,urls:m.value}):(await (0,v.Fj)({domain:f.domain,quota:B(f.quota,f.quota_unit),mailboxes:f.mailboxes,email:f.email,urls:m.value,hasbrandinfo:Number(r.value)}),r.value?(await (0,v.rU)({domain:f.domain,urls:m.value}),l.value.open(f.domain),o.domainSource=f.domain):o.domainSource=""),R.getState().refresh()}});function G(){W.Z.push({name:"AiModel"})}return(e,o)=>{let c=x.Z,p=b.ZP,v=U.Z,W=g.ZP,z=S.Z,H=y.Z,B=h.Z,R=u.ZP,K=w.Z,V=_.Z;return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)((0,d.SU)(J),{title:(0,d.SU)(i),width:600},{default:(0,d.w5)(()=>[(0,d._)("div",Z,[(0,d.Wm)(V,{ref_key:"formRef",ref:s,model:(0,d.SU)(f),rules:A},{default:(0,d.w5)(()=>[(0,d.Wm)(W,{path:"domain"},{label:(0,d.w5)(()=>[(0,d._)("div",C,[(0,d._)("span",null,(0,d.zw)((0,d.SU)(t)("domain.form.domain")),1),(0,d.Wm)(p,{trigger:"hover"},{trigger:(0,d.w5)(()=>o[7]||(o[7]=[(0,d._)("i",{class:"i-custom:help text-primary cursor-pointer"},null,-1)])),default:(0,d.w5)(()=>[(0,d.Wm)(c,null,{default:(0,d.w5)(()=>[(0,d._)("li",q,(0,d.zw)((0,d.SU)(t)("domain.form.tips.aRecordFailed")),1),(0,d._)("li",null,(0,d.zw)((0,d.SU)(t)("domain.form.tips.dnsSetup")),1),(0,d._)("li",null,(0,d.zw)((0,d.SU)(t)("domain.form.tips.cloudflare")),1)]),_:1})]),_:1})])]),default:(0,d.w5)(()=>[(0,d.Wm)(v,{value:(0,d.SU)(f).domain,"onUpdate:value":[o[0]||(o[0]=e=>(0,d.SU)(f).domain=e),I],disabled:(0,d.SU)(a),placeholder:(0,d.SU)(t)("domain.form.domainPlaceholder")},null,8,["value","disabled","placeholder"])]),_:1}),(0,d.kq)("",!0),(0,d.Wm)(W,{label:(0,d.SU)(t)("domain.form.quota")},{default:(0,d.w5)(()=>[(0,d.Wm)(z,{value:(0,d.SU)(f).quota,"onUpdate:value":o[2]||(o[2]=e=>(0,d.SU)(f).quota=e),class:"flex-1",min:0,"show-button":!1},null,8,["value"]),(0,d._)("div",j,[(0,d.Wm)(H,{value:(0,d.SU)(f).quota_unit,"onUpdate:value":o[3]||(o[3]=e=>(0,d.SU)(f).quota_unit=e),options:F},null,8,["value"])])]),_:1},8,["label"]),(0,d.Wm)(W,{label:(0,d.SU)(t)("domain.form.mailboxCount")},{default:(0,d.w5)(()=>[(0,d.Wm)(z,{value:(0,d.SU)(f).mailboxes,"onUpdate:value":o[4]||(o[4]=e=>(0,d.SU)(f).mailboxes=e),class:"flex-1",min:0,"show-button":!1},null,8,["value"])]),_:1},8,["label"]),(0,d.Wm)(W,{label:(0,d.SU)(t)("domain.form.globalCatch")},{default:(0,d.w5)(()=>[(0,d.Wm)(v,{value:(0,d.SU)(f).email,"onUpdate:value":o[5]||(o[5]=e=>(0,d.SU)(f).email=e),placeholder:(0,d.SU)(t)("domain.form.globalCatchPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,d.Wm)(W,null,{label:(0,d.w5)(()=>[(0,d._)("div",D,[o[8]||(o[8]=(0,d._)("i",{class:"i-domain:brand-info w-5 h-5 mr-1.25"},null,-1)),(0,d._)("span",null,(0,d.zw)(e.$t("domain.form.createBrandInfo")),1)])]),default:(0,d.w5)(()=>[(0,d.Wm)(B,{value:(0,d.SU)(r),"onUpdate:value":o[6]||(o[6]=e=>(0,d.dq)(r)?r.value=e:null),disabled:!(0,d.SU)(n)},null,8,["value","disabled"])]),_:1}),(0,d.SU)(n)?(0,d.kq)("",!0):((0,d.wg)(),(0,d.j4)(K,{key:1,style:{margin:"0 0 15px 0"},type:"warning","show-icon":!1},{default:(0,d.w5)(()=>[(0,d._)("div",P,[(0,d._)("span",$,(0,d.zw)(e.$t("domain.form.modelNotice")),1),(0,d.Wm)(R,{type:"primary",onClick:G},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("domain.form.integrateImmediately")),1)]),_:1})])]),_:1})),(0,d._)("div",T,[o[9]||(o[9]=(0,d._)("span",null,[(0,d._)("i",{class:"i-domain:brand-info w-5 h-5 mr-1.25"})],-1)),(0,d._)("span",null,(0,d.zw)(e.$t("domain.form.modelDescription")),1)]),(0,d.Wm)(c,{style:{"margin-bottom":"15px"}},{default:(0,d.w5)(()=>[(0,d._)("li",null,(0,d.zw)(e.$t("domain.form.extractBrand")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.form.analyzeStructure")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.form.importContent")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.form.customLogo")),1)]),_:1}),(0,d.Wm)(W,{label:e.$t("domain.form.specifyDomain")},{default:(0,d.w5)(()=>[(0,d._)("div",M,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)((0,d.SU)(m),(e,a)=>((0,d.wg)(),(0,d.iD)("div",{key:a,class:"flex justify-start items-center gap-2.5"},[(0,d.Wm)(v,{value:(0,d.SU)(m)[a],"onUpdate:value":e=>(0,d.SU)(m)[a]=e,placeholder:(0,d.SU)(t)("domain.form.urlsPlacement"),disabled:!(0,d.SU)(n)},null,8,["value","onUpdate:value","placeholder","disabled"]),0!=a?((0,d.wg)(),(0,d.iD)("div",{key:0,class:"close",onClick:e=>L(a)},o[10]||(o[10]=[(0,d._)("i",{class:"i-material-symbols:close-rounded text-5"},null,-1)]),8,O)):(0,d.kq)("",!0)]))),128))])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"]),(0,d.Wm)(k.Z,{ref_key:"waitAndCheckDomainStatusRef",ref:l},null,512)],64)}}});var A=a(41748);let B=(0,A.default)(F,[["__scopeId","data-v-29d787c6"]]);var I=a(10320);let L=(0,d.aZ)({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){let t=(0,d.tT)(e,"value");return(e,a)=>{let l=I.Z;return(0,d.wg)(),(0,d.j4)(l,{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),class:"bt-tabs h-full",type:"card",placement:"top"},{default:(0,d.w5)(()=>[(0,d.WI)(e.$slots,"default")]),_:3},8,["value"])}}}),J=(0,A.default)(L,[["__scopeId","data-v-53057eda"]]);var R=a(43751),G=a(60579);let K={class:"ssl-cert-container"},V={class:"brand-info"},E={class:"info-label"},Q={class:"info-value"},X={class:"info-label"},N={class:"info-value font-normal!"},Y={class:"cert-content"},ee={class:"cert-section"},et={class:"section-title"},ea={class:"cert-section"},el={class:"section-title"},ei={class:"cert-actions"},en=(0,d.aZ)({__name:"OtherCert",props:{domain:{type:Object,required:!0},refresh:{type:Function,required:!0}},setup(e){let t=(0,d.iH)(!1),a=(0,d.iH)({subject:"",issuer:"",not_before:"",not_after:"",dns:[],endtime:0,key_pem:"",cert_pem:""}),l=(0,d.Fl)(()=>a.value.dns||[]),i=async()=>{try{t.value=!0;let l=await (0,v.Au)({domain:e.domain.domain});(0,c.Kn)(l)&&(a.value=l)}finally{t.value=!1}},n=async()=>{await (0,v.OV)({domain:e.domain.domain,key:a.value.key_pem,certificate:a.value.cert_pem}),i(),e.refresh()},o=async()=>{await (0,v.yW)({domain:e.domain.domain}),i(),e.refresh()};return a.value=e.domain.cert_info,(e,i)=>{let s=r.ZP,m=w.Z,c=U.Z,p=u.ZP,f=G.Z,v=x.Z;return(0,d.wg)(),(0,d.iD)("div",K,[(0,d.Wm)(f,{show:(0,d.SU)(t)},{default:(0,d.w5)(()=>[(0,d.SU)(a).endtime>0?((0,d.wg)(),(0,d.j4)(m,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:(0,d.w5)(()=>[(0,d._)("div",V,[(0,d._)("div",E,(0,d.zw)(e.$t("domain.ssl.cert.brand"))+"：",1),(0,d._)("div",Q,(0,d.zw)((0,d.SU)(a).issuer),1),(0,d._)("div",X,(0,d.zw)(e.$t("domain.ssl.cert.domains"))+"：",1),(0,d._)("div",N,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)((0,d.SU)(l),(e,t)=>((0,d.wg)(),(0,d.j4)(s,{key:t,size:"small"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e),1)]),_:2},1024))),128))])])]),_:1})):(0,d.kq)("",!0),(0,d._)("div",Y,[(0,d._)("div",ee,[(0,d._)("div",et,(0,d.zw)(e.$t("domain.ssl.cert.privateKey")),1),(0,d.Wm)(c,{value:(0,d.SU)(a).key_pem,"onUpdate:value":i[0]||(i[0]=e=>(0,d.SU)(a).key_pem=e),type:"textarea",placeholder:e.$t("domain.ssl.cert.keyPlaceholder"),rows:14,"input-props":{spellcheck:!1}},null,8,["value","placeholder"])]),(0,d._)("div",ea,[(0,d._)("div",el,(0,d.zw)(e.$t("domain.ssl.cert.certificate")),1),(0,d.Wm)(c,{value:(0,d.SU)(a).cert_pem,"onUpdate:value":i[1]||(i[1]=e=>(0,d.SU)(a).cert_pem=e),type:"textarea",placeholder:e.$t("domain.ssl.cert.certPlaceholder"),"input-props":{spellcheck:!1},rows:14},null,8,["value","placeholder"])])]),(0,d._)("div",ei,[(0,d.Wm)(p,{type:"primary",onClick:n},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("common.actions.save")),1)]),_:1}),(0,d.Wm)(p,{type:"primary",onClick:o},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("domain.ssl.actions.applyFree")),1)]),_:1})])]),_:1},8,["show"]),(0,d.Wm)(v,null,{default:(0,d.w5)(()=>[(0,d._)("li",null,(0,d.zw)(e.$t("domain.ssl.tips.paste")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.ssl.tips.chainCheck")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.ssl.tips.pemFormat")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.ssl.tips.defaultSite")),1)]),_:1})])}}}),eo=(0,A.default)(en,[["__scopeId","data-v-bd7d6d60"]]),es=(0,d.aZ)({__name:"index",setup(e){let t=(0,d.iH)("other"),a=(0,d.iH)(null),[l,i]=(0,p.d)({onChangeState:e=>{if(e){let{row:e}=i.getState();e&&(a.value=e)}}}),n=()=>{i.getState().refresh()};return(e,i)=>{let o=R.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(l),{title:e.$t("domain.ssl.title"),width:650,footer:!1},{default:(0,d.w5)(()=>[(0,d.Wm)(J,{value:(0,d.SU)(t),"onUpdate:value":i[0]||(i[0]=e=>(0,d.dq)(t)?t.value=e:null)},{default:(0,d.w5)(()=>[(0,d.Wm)(o,{name:"other",tab:e.$t("domain.ssl.tabs.otherCertificate")},{default:(0,d.w5)(()=>[(0,d.SU)(a)?((0,d.wg)(),(0,d.j4)(eo,{key:0,domain:(0,d.SU)(a),refresh:n},null,8,["domain"])):(0,d.kq)("",!0)]),_:1},8,["tab"])]),_:1},8,["value"])]),_:1},8,["title"])}}});var ed=a(35409),eu=a(50039),er=a(56357),em=a(87075),ec=a(62198),ep=a(77984);let ef={class:"record-title"},ev={width:"140"},e_={width:"160"},ew={class:"record-title"},eh={class:"record-desc"},ey={width:"140"},eS={width:"160"},eg={class:"record-title"},eU={class:"record-desc"},eb={width:"140"},ex={width:"160"},ek={class:"record-title"},eW={class:"record-desc"},ez={class:"record-desc"},eH={class:"flex justify-center mt-24px"},eZ=(0,d.aZ)({__name:"DomainDns",setup(e){let{t}=(0,H.QT)(),{copyText:a}=(0,ep.F)(),l=(0,d.iH)([]),i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return l.value.length>0?l.value[0].dns_records[e][t]:""},o=(0,d.Fl)(()=>i("dkim")),s=(0,d.Fl)(()=>i("a")),r=(0,d.Fl)(()=>i("a","host")),m=(0,d.Fl)(()=>i("mx")),f=(0,d.Fl)(()=>i("mx","host")),_=(0,d.Fl)(()=>i("dmarc")),w=(0,d.Fl)(()=>i("spf")),h=e=>{let{status:a}=e;return(0,d.Wm)("div",{class:["inline-flex items-center",a?"text-primary":"text-error"]},[(0,d.Wm)(er.g,{size:"16"},{default:()=>[a?(0,d.Wm)(em.Z,null,null):(0,d.Wm)(ec.Z,null,null)]}),(0,d.Wm)("span",{class:"ml-4px"},[a?t("domain.dns.status.ok"):t("domain.dns.status.notSet")])])},y=(0,d.iH)([{key:"domain",title:t("domain.dns.columns.domain"),width:"20%",ellipsis:{tooltip:!0}},{key:"mx",title:"MX",render:e=>{let t=e.dns_records.mx;return(0,d.Wm)(h,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"a",title:"A record",render:e=>{let t=e.dns_records.a;return(0,d.Wm)(h,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"spf",title:"SPF",render:e=>{let t=e.dns_records.spf;return(0,d.Wm)(h,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"dkim",title:"DKIM",render:e=>{let t=e.dns_records.dkim;return(0,d.Wm)(h,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"dmarc",title:"DMARC",render:e=>{let t=e.dns_records.dmarc;return(0,d.Wm)(h,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"ptr",title:"PTR",render:e=>{let t=e.dns_records.ptr;return(0,d.Wm)(h,{status:(null==t?void 0:t.valid)||!1},null)}}]),S=async()=>{let e=await (0,v.v1)({domain:l.value[0].domain});(0,c.Kn)(e)&&(l.value[0].dns_records=e);let{refresh:t}=U.getState();t()},[g,U]=(0,p.d)({onChangeState:e=>{if(e){let{row:e}=U.getState();e&&(l.value=[e])}}});return(e,i)=>{let c=n.Z,p=eu.Z,v=ed.ZP,h=u.ZP;return(0,d.wg)(),(0,d.j4)((0,d.SU)(g),{title:(0,d.SU)(t)("domain.dns.title"),width:750,footer:!1},{default:(0,d.w5)(()=>[(0,d._)("div",null,[(0,d.Wm)(c,{size:"small",class:"mb-20px",data:(0,d.SU)(l),columns:(0,d.SU)(y)},null,8,["data","columns"]),(0,d._)("div",ef,(0,d.zw)((0,d.SU)(t)("domain.dns.step1.title")),1),(0,d.Wm)(p,{size:"small",class:"mb-24px"},{default:(0,d.w5)(()=>[(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",ev,(0,d.zw)((0,d.SU)(t)("domain.dns.table.recordType")),1),(0,d._)("th",e_,(0,d.zw)((0,d.SU)(t)("domain.dns.table.host")),1),(0,d._)("th",null,(0,d.zw)((0,d.SU)(t)("domain.dns.table.value")),1)])]),(0,d._)("tbody",null,[(0,d._)("tr",null,[i[3]||(i[3]=(0,d._)("td",null,"A",-1)),(0,d._)("td",null,(0,d.zw)((0,d.SU)(r)),1),(0,d._)("td",null,(0,d.zw)((0,d.SU)(s)),1)])])]),_:1}),(0,d._)("div",ew,(0,d.zw)((0,d.SU)(t)("domain.dns.step2.title")),1),(0,d._)("div",eh,(0,d.zw)((0,d.SU)(t)("domain.dns.step2.description")),1),(0,d.Wm)(p,{size:"small",class:"mb-24px"},{default:(0,d.w5)(()=>[(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",ey,(0,d.zw)((0,d.SU)(t)("domain.dns.table.recordType")),1),(0,d._)("th",eS,(0,d.zw)((0,d.SU)(t)("domain.dns.table.host")),1),(0,d._)("th",null,(0,d.zw)((0,d.SU)(t)("domain.dns.table.value")),1),(0,d._)("th",null,(0,d.zw)((0,d.SU)(t)("domain.dns.table.mxPriority")),1)])]),(0,d._)("tbody",null,[(0,d._)("tr",null,[i[4]||(i[4]=(0,d._)("td",null,"MX",-1)),(0,d._)("td",null,(0,d.zw)((0,d.SU)(f)),1),(0,d._)("td",null,(0,d.zw)((0,d.SU)(m)),1),i[5]||(i[5]=(0,d._)("td",null,"10",-1))])])]),_:1}),(0,d._)("div",eg,(0,d.zw)((0,d.SU)(t)("domain.dns.step3.title")),1),(0,d._)("div",eU,(0,d.zw)((0,d.SU)(t)("domain.dns.step3.description")),1),(0,d.Wm)(p,{size:"small",class:"mb-24px"},{default:(0,d.w5)(()=>[(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",eb,(0,d.zw)((0,d.SU)(t)("domain.dns.table.recordType")),1),(0,d._)("th",ex,(0,d.zw)((0,d.SU)(t)("domain.dns.table.host")),1),(0,d._)("th",null,(0,d.zw)((0,d.SU)(t)("domain.dns.table.value")),1)])]),(0,d._)("tbody",null,[(0,d._)("tr",null,[i[6]||(i[6]=(0,d._)("td",null,"TXT",-1)),i[7]||(i[7]=(0,d._)("td",null,"@",-1)),(0,d._)("td",null,[(0,d.Wm)(v,{class:"mr-4px max-w-320px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(w)),1)]),_:1}),(0,d.Wm)(h,{text:"",type:"primary",onClick:i[0]||(i[0]=()=>(0,d.SU)(a)((0,d.SU)(w)))},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(t)("common.actions.copy")),1)]),_:1})])]),(0,d._)("tr",null,[i[8]||(i[8]=(0,d._)("td",null,"TXT",-1)),i[9]||(i[9]=(0,d._)("td",null,"default._domainkey",-1)),(0,d._)("td",null,[(0,d.Wm)(v,{class:"mr-4px max-w-320px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(o)||"--"),1)]),_:1}),(0,d.SU)(o)?((0,d.wg)(),(0,d.j4)(h,{key:0,text:"",type:"primary",onClick:i[1]||(i[1]=()=>(0,d.SU)(a)((0,d.SU)(o)))},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(t)("common.actions.copy")),1)]),_:1})):(0,d.kq)("",!0)])]),(0,d._)("tr",null,[i[10]||(i[10]=(0,d._)("td",null,"TXT",-1)),i[11]||(i[11]=(0,d._)("td",null,"_dmarc",-1)),(0,d._)("td",null,[(0,d.Wm)(v,{class:"mr-4px max-w-320px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(_)),1)]),_:1}),(0,d.SU)(_)?((0,d.wg)(),(0,d.j4)(h,{key:0,text:"",type:"primary",onClick:i[2]||(i[2]=()=>(0,d.SU)(a)((0,d.SU)(_)))},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(t)("common.actions.copy")),1)]),_:1})):(0,d.kq)("",!0)])])])]),_:1}),(0,d._)("div",ek,(0,d.zw)((0,d.SU)(t)("domain.dns.step4.title")),1),(0,d._)("div",eW,(0,d.zw)((0,d.SU)(t)("domain.dns.step4.description1")),1),(0,d._)("div",ez,(0,d.zw)((0,d.SU)(t)("domain.dns.step4.description2")),1)]),(0,d._)("div",eH,[(0,d.Wm)(h,{type:"primary",onClick:S},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(t)("domain.dns.verify")),1)]),_:1})])]),_:1},8,["title"])}}}),eC=(0,A.default)(eZ,[["__scopeId","data-v-8094e116"]]);var eq=a(65965);let ej={class:"p-24px"},eD={class:"bt-title"};function eP(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,d.lA)(e)}let e$=(0,d.aZ)({__name:"index",setup(e){let{t}=(0,H.QT)(),{tableParams:a,tableList:_,loading:w,tableTotal:h,getTableData:y}=(0,f.Z)({immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:v.i7}),S=(0,eq.tv)(),g=(0,eq.yj)(),U=(0,d.iH)([{key:"domain",title:t("domain.columns.domain"),minWidth:130,ellipsis:{tooltip:!0},render:e=>(0,d.Wm)(d.HY,null,[(0,d.Wm)("div",{class:"inline-flex items-center"},[1==e.hasbrandinfo&&(0,d.Wm)("i",{class:"i-domain:brand-info w-4 h-4 mr-1.25"},null),(0,d.Wm)(u.ZP,{text:!0,type:"primary",onClick:()=>P(e)},{default:()=>[e.domain]})]),e.default?(0,d.Wm)(r.ZP,{size:"small",class:"ml-8px",bordered:!1},{default:()=>[(0,d.Uk)("Default")]}):""])},{key:"quota",title:t("domain.columns.quota"),render:e=>(0,c.UO)(e.quota)},{key:"mailboxes",title:t("domain.columns.mailboxes")},{key:"mailbox_quota",title:t("domain.columns.defaultMailboxSize"),render:e=>(0,c.UO)(e.mailbox_quota)},{key:"ssl",title:"SSL",render:e=>{let a;if(e.cert_info&&e.cert_info.endtime){let a=Math.floor((1e3*e.cert_info.endtime-Date.now())/1e3/60/60/24);return(0,d.Wm)(u.ZP,{type:a<0?"error":"primary",text:!0,onClick:()=>{Z(e)}},{default:()=>[a<0?t("domain.ssl.expired"):t("domain.ssl.daysLeft",{days:a})]})}return(0,d.Wm)(u.ZP,{type:"warning",text:!0,onClick:()=>{Z(e)}},eP(a=t("domain.ssl.notSet"))?a:{default:()=>[a]})}},{title:t("domain.columns.actions"),key:"actions",align:"right",width:260,render:e=>{let a,l,i;return(0,d.Wm)(m.Z,{inline:!0},{default:()=>[(0,d.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{j(e)}},eP(a=t("domain.actions.dnsRecord"))?a:{default:()=>[a]}),(0,d.Wm)(u.ZP,{type:"primary",text:!0,onClick:()=>{P(e)}},eP(l=t("common.actions.edit"))?l:{default:()=>[l]}),(0,d.Wm)(u.ZP,{type:"primary",text:!0,disabled:1===e.default,onClick:()=>{D(e)}},{default:()=>[(0,d.Uk)("Set Default")]}),(0,d.Wm)(u.ZP,{type:"error",text:!0,onClick:()=>{$(e)}},eP(i=t("common.actions.delete"))?i:{default:()=>[i]})]})}}]),[b,x]=(0,p.d)({component:B,state:{isEdit:!1,refresh:y}}),k=()=>{x.setState({row:null,isEdit:!1}),x.open()},[W,z]=(0,p.d)({component:es,state:{refresh:y}}),Z=e=>{z.setState({row:e}),z.open()},[C,q]=(0,p.d)({component:eC,state:{refresh:y}}),j=e=>{q.setState({row:e}),q.open()},D=e=>{(0,c.iG)({title:`Set Default [${e.domain}]`,content:"Are you sure to set this domain as default?",onConfirm:async()=>{await (0,v.xh)({domain:e.domain}),y()}})},P=e=>{S.push({name:"EditDomain",params:{domain:e.domain}})},$=e=>{(0,c.iG)({title:t("domain.delete.title"),content:t("domain.delete.confirm",{domain:e.domain}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,v.dj)({domain:e.domain}),y()}})},T=(0,d.iH)("");return(0,d.bv)(()=>{T.value=g.query.init,"init-domain"===T.value&&k()}),(e,r)=>{let m=s.Z,c=o.Z,p=n.Z,f=i.Z,v=l.Z;return(0,d.wg)(),(0,d.iD)("div",ej,[(0,d._)("div",eD,(0,d.zw)((0,d.SU)(t)("layout.menu.domain")),1),(0,d.Wm)(v,null,{toolsLeft:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(u.ZP),{type:"primary",onClick:k},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(t)("domain.addDomain")),1)]),_:1}),(0,d.Wm)(m,{href:"https://www.billionmail.com/start/domain.html",text:(0,d.SU)(t)("domain.help")},null,8,["text"])]),table:(0,d.w5)(()=>[(0,d.Wm)(p,{loading:(0,d.SU)(w),columns:(0,d.SU)(U),data:(0,d.SU)(_)},{empty:(0,d.w5)(()=>[(0,d.Wm)(c)]),_:1},8,["loading","columns","data"])]),pageRight:(0,d.w5)(()=>[(0,d.Wm)(f,{page:(0,d.SU)(a).page,"onUpdate:page":r[0]||(r[0]=e=>(0,d.SU)(a).page=e),"page-size":(0,d.SU)(a).page_size,"onUpdate:pageSize":r[1]||(r[1]=e=>(0,d.SU)(a).page_size=e),"item-count":(0,d.SU)(h),onRefresh:(0,d.SU)(y)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(b)),(0,d.Wm)((0,d.SU)(W)),(0,d.Wm)((0,d.SU)(C))]),_:1})])}}}),eT=(0,A.default)(e$,[["__scopeId","data-v-70f57330"]])}}]);