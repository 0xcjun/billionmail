"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["1430"],{66236:function(e,t,l){l.d(t,{W3:()=>d,ZP:()=>v});var i=l(58786),n=l(56946),a=l(54470),o=l(53198),r=l(19050),u=l(55456),s=l(71309);let c=(0,s.cB)("breadcrumb",`
 white-space: nowrap;
 cursor: default;
 line-height: var(--n-item-line-height);
`,[(0,s.c)("ul",`
 list-style: none;
 padding: 0;
 margin: 0;
 `),(0,s.c)("a",`
 color: inherit;
 text-decoration: inherit;
 `),(0,s.cB)("breadcrumb-item",`
 font-size: var(--n-font-size);
 transition: color .3s var(--n-bezier);
 display: inline-flex;
 align-items: center;
 `,[(0,s.cB)("icon",`
 font-size: 18px;
 vertical-align: -.2em;
 transition: color .3s var(--n-bezier);
 color: var(--n-item-text-color);
 `),(0,s.c)("&:not(:last-child)",[(0,s.cM)("clickable",[(0,s.cE)("link",`
 cursor: pointer;
 `,[(0,s.c)("&:hover",`
 background-color: var(--n-item-color-hover);
 `),(0,s.c)("&:active",`
 background-color: var(--n-item-color-pressed); 
 `)])])]),(0,s.cE)("link",`
 padding: 4px;
 border-radius: var(--n-item-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 color: var(--n-item-text-color);
 position: relative;
 `,[(0,s.c)("&:hover",`
 color: var(--n-item-text-color-hover);
 `,[(0,s.cB)("icon",`
 color: var(--n-item-text-color-hover);
 `)]),(0,s.c)("&:active",`
 color: var(--n-item-text-color-pressed);
 `,[(0,s.cB)("icon",`
 color: var(--n-item-text-color-pressed);
 `)])]),(0,s.cE)("separator",`
 margin: 0 8px;
 color: var(--n-separator-color);
 transition: color .3s var(--n-bezier);
 user-select: none;
 -webkit-user-select: none;
 `),(0,s.c)("&:last-child",[(0,s.cE)("link",`
 font-weight: var(--n-font-weight-active);
 cursor: unset;
 color: var(--n-item-text-color-active);
 `,[(0,s.cB)("icon",`
 color: var(--n-item-text-color-active);
 `)]),(0,s.cE)("separator",`
 display: none;
 `)])])]),d=(0,r.U)("n-breadcrumb"),m=Object.assign(Object.assign({},n.Z.props),{separator:{type:String,default:"/"}}),v=(0,i.aZ)({name:"Breadcrumb",props:m,setup(e){let{mergedClsPrefixRef:t,inlineThemeDisabled:l}=(0,a.ZP)(e),r=(0,n.Z)("Breadcrumb","-breadcrumb",c,u.Z,e,t);(0,i.JJ)(d,{separatorRef:(0,i.Vh)(e,"separator"),mergedClsPrefixRef:t});let s=(0,i.Fl)(()=>{let{common:{cubicBezierEaseInOut:e},self:{separatorColor:t,itemTextColor:l,itemTextColorHover:i,itemTextColorPressed:n,itemTextColorActive:a,fontSize:o,fontWeightActive:u,itemBorderRadius:s,itemColorHover:c,itemColorPressed:d,itemLineHeight:m}}=r.value;return{"--n-font-size":o,"--n-bezier":e,"--n-item-text-color":l,"--n-item-text-color-hover":i,"--n-item-text-color-pressed":n,"--n-item-text-color-active":a,"--n-separator-color":t,"--n-item-color-hover":c,"--n-item-color-pressed":d,"--n-item-border-radius":s,"--n-font-weight-active":u,"--n-item-line-height":m}}),m=l?(0,o.F)("breadcrumb",void 0,s,e):void 0;return{mergedClsPrefix:t,cssVars:l?void 0:s,themeClass:null==m?void 0:m.themeClass,onRender:null==m?void 0:m.onRender}},render(){var e;return null==(e=this.onRender)||e.call(this),(0,i.h)("nav",{class:[`${this.mergedClsPrefix}-breadcrumb`,this.themeClass],style:this.cssVars,"aria-label":"Breadcrumb"},(0,i.h)("ul",null,this.$slots))}})},70958:function(e,t,l){l.d(t,{Z:()=>r});var i=l(58786),n=l(93950),a=l(68574),o=l(66236);let r=(0,i.aZ)({name:"BreadcrumbItem",props:{separator:String,href:String,clickable:{type:Boolean,default:!0},onClick:Function},slots:Object,setup(e,{slots:t}){let l=(0,i.f3)(o.W3,null);if(!l)return()=>null;let{separatorRef:r,mergedClsPrefixRef:u}=l,s=function(e=a.j?window:null){let t=()=>{let{hash:t,host:l,hostname:i,href:n,origin:a,pathname:o,port:r,protocol:u,search:s}=(null==e?void 0:e.location)||{};return{hash:t,host:l,hostname:i,href:n,origin:a,pathname:o,port:r,protocol:u,search:s}},l=(0,i.iH)(t()),n=()=>{l.value=t()};return(0,i.bv)(()=>{e&&(e.addEventListener("popstate",n),e.addEventListener("hashchange",n))}),(0,i.SK)(()=>{e&&(e.removeEventListener("popstate",n),e.removeEventListener("hashchange",n))}),l}(),c=(0,i.Fl)(()=>e.href?"a":"span"),d=(0,i.Fl)(()=>s.value.href===e.href?"location":null);return()=>{let{value:l}=u;return(0,i.h)("li",{class:[`${l}-breadcrumb-item`,e.clickable&&`${l}-breadcrumb-item--clickable`]},(0,i.h)(c.value,{class:`${l}-breadcrumb-item__link`,"aria-current":d.value,href:e.href,onClick:e.onClick},t),(0,i.h)("span",{class:`${l}-breadcrumb-item__separator`,"aria-hidden":"true"},(0,n.gI)(t.separator,()=>{var t;return[null!=(t=e.separator)?t:r.value]})))}}})},92314:function(e,t,l){l.d(t,{AB:()=>s,CI:()=>r,Re:()=>c,a3:()=>v,cu:()=>u,de:()=>d,ou:()=>a,uJ:()=>o,v_:()=>m});var i=l(34541);let{t:n}=l(76882).Z.global,a=e=>i.e.get("/overview",{params:e}),o=e=>i.e.get("/overview/failed",{params:e}),r=()=>i.e.get("/postfix_queue/list"),u=e=>i.e.get("/postfix_queue/queue_info",{params:e}),s=e=>i.e.post("/postfix_queue/flush_by_id",e,{fetchOptions:{loading:n("overview.api.loading.resendQueue"),successMessage:!0}}),c=e=>i.e.post("/postfix_queue/delete_by_id",e,{fetchOptions:{loading:n("overview.api.loading.deleteQueue"),successMessage:!0}}),d=()=>i.e.get("/postfix_queue/get_config"),m=e=>i.e.post("/postfix_queue/set_all_config",e,{fetchOptions:{loading:n("overview.api.loading.setQueueConfig"),successMessage:!0}}),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.e.post("/postfix_queue/delete",e,{fetchOptions:{loading:n("overview.api.loading.clearQueue"),successMessage:!0}})}},90337:function(e,t,l){l.r(t),l.d(t,{default:()=>S});var i=l(39244),n=l(15496),a=l(23685),o=l(58786);let r={class:"flex gap-10px"},u={class:"flex-center w-40px"},s=(0,o.aZ)({__name:"index",props:{data:{type:Array,default:()=>[]},rowKey:{type:Function,required:!0},options:{type:Array,default:()=>[]},checkedRowKeys:{type:Array,default:()=>[]}},emits:["updateCheckedRowKeys","select"],setup(e,t){let{emit:l}=t,i=(0,o.Fl)({get:()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length===e.data.length,set(t){l("updateCheckedRowKeys",t?e.data.map(t=>e.rowKey(t)):[])}}),s=(0,o.Fl)(()=>0===e.data.length),c=(0,o.Fl)(()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length<e.data.length),d=(0,o.Fl)(()=>0===e.checkedRowKeys.length),m=t=>{l("select",t,e.checkedRowKeys)};return(t,l)=>{let v=a.Z,f=n.ZP;return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",u,[(0,o.Wm)(v,{checked:(0,o.SU)(i),"onUpdate:checked":l[0]||(l[0]=e=>(0,o.dq)(i)?i.value=e:null),disabled:(0,o.SU)(s),indeterminate:(0,o.SU)(c)},null,8,["checked","disabled","indeterminate"])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,e=>((0,o.wg)(),(0,o.j4)(f,{key:e.value,disabled:(0,o.SU)(d),onClick:t=>m(e.value)},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.label),1)]),_:2},1032,["disabled","onClick"]))),128))])}}});var c=l(60424),d=l(66236),m=l(70958),v=l(93953),f=l(68271),p=l(80947),w=l(92314),h=l(49247),_=l(46244),b=l(6455),g=l(73084);let y=(0,o.aZ)({__name:"param-config",setup(e,t){let{expose:l}=t,i=(0,o.iH)(!1),n=(0,o.qj)({bounce_queue_lifetime:"",maximal_queue_lifetime:"",minimal_backoff_time:"",maximal_backoff_time:"",queue_run_delay:"",trigger_timeout:""}),a=async()=>{let e=await (0,w.de)();(0,f.Kn)(e)&&Object.assign(n,e)},r=async()=>{await (0,w.v_)((0,o.IU)(n))};return l({open:()=>{i.value=!0,a()}}),(e,t)=>{let l=g.Z,a=b.ZP,u=_.Z,s=h.Z;return(0,o.wg)(),(0,o.j4)(s,{show:(0,o.SU)(i),"onUpdate:show":t[6]||(t[6]=e=>(0,o.dq)(i)?i.value=e:null),width:520,title:e.$t("overview.sendQueue.buttons.paramConfig"),onConfirm:r},{default:(0,o.w5)(()=>[(0,o.Wm)(u,{class:"pt-8px"},{default:(0,o.w5)(()=>[(0,o.Wm)(a,{label:"Bounce Queue Lifetime"},{default:(0,o.w5)(()=>[(0,o.Wm)(l,{value:(0,o.SU)(n).bounce_queue_lifetime,"onUpdate:value":t[0]||(t[0]=e=>(0,o.SU)(n).bounce_queue_lifetime=e)},null,8,["value"])]),_:1}),(0,o.Wm)(a,{label:"Maximal Queue Lifetime"},{default:(0,o.w5)(()=>[(0,o.Wm)(l,{value:(0,o.SU)(n).maximal_queue_lifetime,"onUpdate:value":t[1]||(t[1]=e=>(0,o.SU)(n).maximal_queue_lifetime=e)},null,8,["value"])]),_:1}),(0,o.Wm)(a,{label:"Minimal Backoff Time"},{default:(0,o.w5)(()=>[(0,o.Wm)(l,{value:(0,o.SU)(n).minimal_backoff_time,"onUpdate:value":t[2]||(t[2]=e=>(0,o.SU)(n).minimal_backoff_time=e)},null,8,["value"])]),_:1}),(0,o.Wm)(a,{label:"Maximal Backoff Time"},{default:(0,o.w5)(()=>[(0,o.Wm)(l,{value:(0,o.SU)(n).maximal_backoff_time,"onUpdate:value":t[3]||(t[3]=e=>(0,o.SU)(n).maximal_backoff_time=e)},null,8,["value"])]),_:1}),(0,o.Wm)(a,{label:"Queue Run Delay"},{default:(0,o.w5)(()=>[(0,o.Wm)(l,{value:(0,o.SU)(n).queue_run_delay,"onUpdate:value":t[4]||(t[4]=e=>(0,o.SU)(n).queue_run_delay=e)},null,8,["value"])]),_:1}),(0,o.Wm)(a,{label:"Trigger Timeout"},{default:(0,o.w5)(()=>[(0,o.Wm)(l,{value:(0,o.SU)(n).trigger_timeout,"onUpdate:value":t[5]||(t[5]=e=>(0,o.SU)(n).trigger_timeout=e)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["show","title"])}}});var k=l(60579),x=l(86667);let U=(0,o.aZ)({__name:"queue-logs",setup(e,t){let{expose:l}=t,i=(0,o.iH)(!1),n=(0,o.iH)(!1),a=(0,o.iH)("");return l({open:async e=>{i.value=!0,n.value=!0,a.value="";try{let t=await (0,w.cu)({queue_id:e});(0,f.HD)(t)&&(a.value=t)}finally{n.value=!1}}}),(e,t)=>{let l=x.Z,r=k.Z,u=h.Z;return(0,o.wg)(),(0,o.j4)(u,{show:(0,o.SU)(i),"onUpdate:show":t[0]||(t[0]=e=>(0,o.dq)(i)?i.value=e:null),title:"队列日志",width:800,footer:!1},{default:(0,o.w5)(()=>[(0,o.Wm)(r,{show:(0,o.SU)(n)},{default:(0,o.w5)(()=>[(0,o.Wm)(l,{height:"520px",code:(0,o.SU)(a)},null,8,["code"])]),_:1},8,["show"])]),_:1},8,["show"])}}});var W=l(52495);let q={class:"p-20px"};function C(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,o.lA)(e)}let S=(0,o.aZ)({__name:"index",setup(e){let{t}=(0,W.QT)(),l=(0,o.AE)("configModalRef"),a=(0,o.AE)("logsModalRef"),r=()=>{var e;null==(e=l.value)||e.open()},u=()=>{(0,f.iG)({title:t("overview.sendQueue.confirm.quickClear.title"),content:t("overview.sendQueue.confirm.quickClear.content"),confirmType:"error",onConfirm:async()=>{await (0,w.a3)(),b()}})},{tableProps:h,batchProps:_,fetchTable:b}=(0,p.N)({params:{},fetchFn:w.CI,rowKey:e=>e.queue_id}),g=(0,o.iH)([{width:40,type:"selection"},{key:"queue_id",title:"ID",width:"8%",minWidth:"90px",render:e=>(0,o.Wm)(n.ZP,{type:"primary",text:!0,onClick:()=>{var t;null==(t=a.value)||t.open(e.queue_id)}},{default:()=>[e.queue_id]})},{key:"sender",title:t("overview.sendQueue.table.columns.sender"),width:"10%",minWidth:"120px"},{key:"recipient",title:t("overview.sendQueue.table.columns.recipient"),width:"10%",minWidth:"120px",ellipsis:{tooltip:!0}},{key:"arrival_time",title:t("overview.sendQueue.table.columns.arrivalTime"),width:"12%",minWidth:"130px",render:e=>(0,f.mr)(e.arrival_time)},{key:"message_size",title:t("overview.sendQueue.table.columns.messageSize"),width:"8%",minWidth:"80px",render:e=>(0,f.UO)(e.message_size)},{key:"delay_reason",title:t("overview.sendQueue.table.columns.delayReason"),ellipsis:{tooltip:!0}},{key:"action",title:t("overview.sendQueue.table.columns.action"),align:"right",width:120,render:e=>{let l,i;return(0,o.Wm)(v.Z,{inline:!0},{default:()=>[(0,o.Wm)(n.ZP,{type:"primary",text:!0,onClick:()=>{k(e)}},C(l=t("overview.sendQueue.buttons.resend"))?l:{default:()=>[l]}),(0,o.Wm)(n.ZP,{type:"error",text:!0,onClick:()=>{x(e)}},C(i=t("common.actions.delete"))?i:{default:()=>[i]})]})}}]),k=async e=>{(0,f.iG)({title:t("overview.sendQueue.confirm.resend.title"),content:t("overview.sendQueue.confirm.resend.content"),onConfirm:async()=>{await (0,w.AB)({queue_ids:[e.queue_id]}),b()}})},x=async e=>{(0,f.iG)({title:t("overview.sendQueue.confirm.delete.title"),content:t("overview.sendQueue.confirm.delete.content"),confirmType:"error",onConfirm:async()=>{await (0,w.Re)({queue_ids:[e.queue_id]}),b()}})},S=[{label:t("overview.sendQueue.buttons.batchDelete"),value:"delete"},{label:t("overview.sendQueue.buttons.batchResend"),value:"resend"}],Z=(e,t)=>{switch(e){case"delete":Q(t);break;case"resend":R(t)}},Q=async e=>{(0,f.iG)({title:t("overview.sendQueue.confirm.batchDelete.title"),content:t("overview.sendQueue.confirm.batchDelete.content",{count:e.length}),confirmType:"error",onConfirm:async()=>{await (0,w.Re)({queue_ids:e}),b()}})},R=async e=>{(0,f.iG)({title:t("overview.sendQueue.confirm.batchResend.title"),content:t("overview.sendQueue.confirm.batchResend.content",{count:e.length}),onConfirm:async()=>{await (0,w.AB)({queue_ids:e}),b()}})};return(e,t)=>{let v=(0,o.up)("router-link"),f=m.Z,p=d.ZP,w=c.Z,k=i.Z;return(0,o.wg)(),(0,o.iD)("div",q,[(0,o.Wm)(p,{class:"mb-16px"},{default:(0,o.w5)(()=>[(0,o.Wm)(f,null,{default:(0,o.w5)(()=>[(0,o.Wm)(v,{to:"/overview"},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("layout.menu.overview")),1)]),_:1})]),_:1}),(0,o.Wm)(f,null,{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("overview.sendQueue.title")),1)]),_:1})]),_:1}),(0,o.Wm)(k,null,{toolsLeft:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(n.ZP),{type:"primary",onClick:t[0]||(t[0]=e=>(0,o.SU)(b)())},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("overview.sendQueue.buttons.refresh")),1)]),_:1}),(0,o.Wm)((0,o.SU)(n.ZP),{onClick:u},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("overview.sendQueue.buttons.quickClear")),1)]),_:1}),(0,o.Wm)((0,o.SU)(n.ZP),{onClick:r},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("overview.sendQueue.buttons.paramConfig")),1)]),_:1})]),table:(0,o.w5)(()=>[(0,o.Wm)(w,(0,o.dG)((0,o.SU)(h),{columns:(0,o.SU)(g)}),null,16,["columns"])]),pageLeft:(0,o.w5)(()=>[(0,o.Wm)(s,(0,o.dG)((0,o.SU)(_),{options:S,onSelect:Z}),null,16)]),modal:(0,o.w5)(()=>[(0,o.Wm)(y,{ref_key:"configModalRef",ref:l},null,512),(0,o.Wm)(U,{ref_key:"logsModalRef",ref:a},null,512)]),_:1})])}}})}}]);