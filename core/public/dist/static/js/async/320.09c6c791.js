"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["320"],{6471:function(e,t,a){a.d(t,{Z:()=>m});var l=a(2510),n=a(1792),i=a(5266),r=a(3073),o=a(7737),d=a(4339),u=a(8168),s=a(3754),p=Object.prototype.hasOwnProperty;let m=function(e){if(null==e)return!0;if((0,o.Z)(e)&&((0,r.Z)(e)||"string"==typeof e||"function"==typeof e.splice||(0,d.Z)(e)||(0,s.Z)(e)||(0,i.Z)(e)))return!e.length;var t=(0,n.Z)(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if((0,u.Z)(e))return!(0,l.Z)(e).length;for(var a in e)if(p.call(e,a))return!1;return!0}},2822:function(e,t,a){a.d(t,{Z:()=>i});var l=a(1452),n=a(2398);let i=function(e){return"number"==typeof e||(0,n.Z)(e)&&"[object Number]"==(0,l.Z)(e)}},7714:function(e,t,a){a.d(t,{Z:()=>f});var l=a(5083),n=a(209),i=a(1321),r=a(4124),o=a(2931),d=a(2249),u=a(6253),s=a(3876),p=a(8713);let m={name:"Flex",self:function(){return p.Z}},c=Object.assign(Object.assign({},i.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),f=(0,n.aZ)({name:"Flex",props:c,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:a}=(0,r.ZP)(e),u=(0,i.Z)("Flex","-flex",void 0,m,e,t);return{rtlEnabled:(0,o.V)("Flex",a,t),mergedClsPrefix:t,margin:(0,n.Fl)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,d.Tl)("gap",t)]:a}}=u.value,{row:n,col:i}=(0,l.yU)(a);return{horizontal:(0,l.fQ)(i),vertical:(0,l.fQ)(n)}})}},render(){let{vertical:e,reverse:t,align:a,inline:l,justify:i,margin:r,wrap:o,mergedClsPrefix:d,rtlEnabled:p}=this,m=(0,u.x)((0,s.z)(this),!1);return m.length?(0,n.h)("div",{role:"none",class:[`${d}-flex`,p&&`${d}-flex--rtl`],style:{display:l?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:i,flexWrap:!o||e?"nowrap":"wrap",alignItems:a,gap:`${r.vertical}px ${r.horizontal}px`}},m):null}})},8943:function(e,t,a){a.d(t,{Z:()=>r});var l=a(209),n=a(8282),i=a(8842);let r=(0,l.aZ)({name:"RadioButton",props:i.xu,setup:i.cY,render(){let{mergedClsPrefix:e}=this;return(0,l.h)("label",{class:[`${e}-radio-button`,this.mergedDisabled&&`${e}-radio-button--disabled`,this.renderSafeChecked&&`${e}-radio-button--checked`,this.focus&&[`${e}-radio-button--focus`]]},(0,l.h)("input",{ref:"inputRef",type:"radio",class:`${e}-radio-input`,value:this.value,name:this.mergedName,checked:this.renderSafeChecked,disabled:this.mergedDisabled,onChange:this.handleRadioInputChange,onFocus:this.handleRadioInputFocus,onBlur:this.handleRadioInputBlur}),(0,l.h)("div",{class:`${e}-radio-button__state-border`}),(0,n.K9)(this.$slots.default,t=>t||this.label?(0,l.h)("div",{ref:"labelRef",class:`${e}-radio__label`},t||this.label):null))}})},1555:function(e,t,a){a.d(t,{A8:()=>n,NI:()=>i,QB:()=>d,WF:()=>o,Xc:()=>s,ef:()=>u,ij:()=>r});var l=a(4203);function n(e){return l.e.get("/email_template/list",{params:e})}function i(){return l.e.get("/email_template/all")}function r(e){return l.e.get("/email_template/get",{params:e})}function o(e){return l.e.post("/email_template/create",e,{fetchOptions:{loading:"Creating template, please wait...",successMessage:!0}})}function d(e){return l.e.post("/email_template/update",e,{fetchOptions:{loading:"Updating template, please wait...",successMessage:!0}})}function u(e){return l.e.post("/email_template/copy",e,{fetchOptions:{loading:"Copying template, please wait...",successMessage:!0}})}function s(e){return l.e.post("/email_template/delete",e,{fetchOptions:{loading:"Deleting template, please wait...",successMessage:!0}})}},9217:function(e,t,a){a.d(t,{Z:()=>i});var l=a(209);let n=["height","srcdoc"],i=(0,l.aZ)({__name:"index",props:{value:{type:String,default:""},height:{type:[String,Number],default:"100%"}},setup:e=>(t,a)=>((0,l.wg)(),(0,l.iD)("iframe",{width:"100%",height:e.height,srcdoc:e.value,style:{border:"none",borderRadius:"4px"}},null,8,n))})},2748:function(e,t,a){a.d(t,{Z:()=>i});var l=a(8454),n=a(209);let i=(0,n.aZ)({__name:"index",props:(0,n.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,n.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:i}=t,r=(0,n.iH)(null),o=(0,n.tT)(e,"value"),d=()=>{i("search",o.value)};return a({focus:()=>{var e;null===(e=r.value)||void 0===e||e.focus()}}),(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,(0,n.dG)({ref_key:"inputRef",ref:r,value:o.value,"onUpdate:value":t[0]||(t[0]=e=>o.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,n.D2)(d,["enter"])}),(0,n.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:d},t[1]||(t[1]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:d},t[2]||(t[2]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},8569:function(e,t,a){a.r(t),a.d(t,{default:()=>F});var l=a(4652),n=a(6818),i=a(3435),r=a(6635),o=a(2748),d=a(209),u=a(7714),s=a(3447),p=a(3312),m=a(6949),c=a(2965),f=a(1555),h=a(3951),v=a(6714),g=a(2171),_=a(8943),y=a(6883),w=a(8454),Z=a(6471),k=a(5778);let b={class:"pt-12px"},x={class:"flex-1"},S={key:0,class:"mt-16px"},U=(0,d.aZ)({__name:"TemplateAdd",setup(e){let{t}=(0,k.QT)(),a=(0,d.AE)("formRef"),l=(0,d.qj)({temp_name:"",add_type:0,content:"",render:"",file_data:""}),n={temp_name:{required:!0,trigger:["input","blur"],message:t("market.template.add.validation.nameRequired")}},i=e=>{let t=new FileReader;t.onload=e=>{var t;l.file_data=null===(t=e.target)||void 0===t?void 0:t.result},e.file&&t.readAsText(e.file)},r=async()=>{var e;if(await (null===(e=a.value)||void 0===e?void 0:e.validate()),2===l.add_type&&(0,Z.Z)(l.file_data))return c.v0.error(t("market.template.add.validation.uploadRequired")),Promise.reject()},[o,u]=(0,p.d)({onChangeState:e=>{e&&(l.temp_name=`template_${(0,c.mr)(new Date,"yyyyMMddHHmmss")}`,l.add_type=0,l.content="",l.render="",l.file_data="")},onConfirm:async()=>{await r(),await (0,f.WF)((0,d.IU)(l));let e=u.getState();null==e||e.refresh()}});return(e,t)=>{let r=w.Z,u=y.ZP,s=_.Z,p=g.Z,m=v.Z,c=h.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(o),{title:e.$t("market.template.add.title"),width:"480"},{default:(0,d.w5)(()=>[(0,d._)("div",b,[(0,d.Wm)(c,{ref_key:"formRef",ref:a,model:(0,d.SU)(l),rules:n},{default:(0,d.w5)(()=>[(0,d.Wm)(u,{label:e.$t("market.template.name"),path:"temp_name"},{default:(0,d.w5)(()=>[(0,d.Wm)(r,{value:(0,d.SU)(l).temp_name,"onUpdate:value":t[0]||(t[0]=e=>(0,d.SU)(l).temp_name=e),placeholder:e.$t("market.template.add.namePlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,d.Wm)(u,{label:e.$t("market.template.file"),path:"mode"},{default:(0,d.w5)(()=>[(0,d._)("div",x,[(0,d.Wm)(p,{value:(0,d.SU)(l).add_type,"onUpdate:value":t[1]||(t[1]=e=>(0,d.SU)(l).add_type=e)},{default:(0,d.w5)(()=>[(0,d.Wm)(s,{value:0},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("market.template.uploadHtml")),1)]),_:1})]),_:1},8,["value"]),0===(0,d.SU)(l).add_type?((0,d.wg)(),(0,d.iD)("div",S,[(0,d.Wm)(m,{"is-upload":!1,accept:["html"],onChange:i})])):(0,d.kq)("",!0)])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"])}}});var W=a(5115);let $=(0,W.default)(U,[["__scopeId","data-v-6e6b9528"]]);var C=a(9217);let j=(0,d.aZ)({__name:"TemplatePreview",setup(e){let t=(0,d.iH)(""),a=async e=>{let a=await (0,f.ij)({id:e});(0,c.Kn)(a)&&(t.value=a.content)},[l,n]=(0,p.d)({onChangeState:e=>{if(e){let{row:e}=n.getState();e&&a(`${e.id}`)}}});return(e,a)=>{let n=C.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(l),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,d.w5)(()=>[(0,d.Wm)(n,{height:580,value:(0,d.SU)(t)},null,8,["value"])]),_:1},8,["title"])}}});var R=a(5e3);function z(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,d.lA)(e)}let P=(0,d.aZ)({__name:"index",setup(e){let{t}=(0,k.QT)(),{tableParams:a,tableList:h,loading:v,tableTotal:g,getTableData:_}=(0,m.Z)({loading:!0,immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:f.A8}),y=(0,d.iH)([{key:"temp_name",title:t("market.template.columns.name"),minWidth:120,ellipsis:{tooltip:!0}},{key:"create_time",title:t("market.template.columns.createdAt"),minWidth:140,render:e=>(0,c.mr)(e.create_time)},{title:t("common.columns.actions"),key:"actions",align:"right",width:240,render:e=>{let a,l,n,i;return(0,d.Wm)(u.Z,{inline:!0},{default:()=>[(0,d.Wm)(s.ZP,{type:"primary",text:!0,onClick:()=>{C(e)}},z(a=t("common.actions.preview"))?a:{default:()=>[a]}),(0,d.Wm)(s.ZP,{type:"primary",text:!0,onClick:()=>{S(e)}},z(l=t("common.actions.edit"))?l:{default:()=>[l]}),(0,d.Wm)(s.ZP,{type:"primary",text:!0,onClick:()=>{P(e)}},z(n=t("market.template.actions.duplicate"))?n:{default:()=>[n]}),(0,d.Wm)(s.ZP,{type:"error",text:!0,onClick:()=>{F(e)}},z(i=t("common.actions.delete"))?i:{default:()=>[i]})]})}}]),[w,Z]=(0,p.d)({component:$,state:{refresh:_}}),b=()=>{Z.open()},x=(0,R.tv)(),S=e=>{x.push({path:`/market/template/edit/${e.id}`})},[U,W]=(0,p.d)({component:j}),C=e=>{W.setState({row:e}),W.open()},P=async e=>{await (0,f.ef)({id:e.id}),_()},F=e=>{(0,c.iG)({title:t("market.template.delete.title"),content:t("market.template.delete.confirm",{name:e.temp_name}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,f.Xc)({id:e.id}),_()}})};return(e,u)=>{let p=o.Z,m=r.Z,c=i.Z,f=n.Z,Z=l.Z;return(0,d.wg)(),(0,d.iD)("div",null,[(0,d.Wm)(Z,null,{toolsLeft:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(s.ZP),{type:"primary",onClick:b},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(t)("market.template.actions.add")),1)]),_:1})]),toolsRight:(0,d.w5)(()=>[(0,d.Wm)(p,{value:(0,d.SU)(a).keyword,"onUpdate:value":u[0]||(u[0]=e=>(0,d.SU)(a).keyword=e),width:240,placeholder:(0,d.SU)(t)("market.template.search.namePlaceholder"),onSearch:u[1]||(u[1]=()=>(0,d.SU)(_)(!0))},null,8,["value","placeholder"])]),table:(0,d.w5)(()=>[(0,d.Wm)(c,{loading:(0,d.SU)(v),columns:(0,d.SU)(y),data:(0,d.SU)(h)},{empty:(0,d.w5)(()=>[(0,d.Wm)(m)]),_:1},8,["loading","columns","data"])]),pageRight:(0,d.w5)(()=>[(0,d.Wm)(f,{page:(0,d.SU)(a).page,"onUpdate:page":u[2]||(u[2]=e=>(0,d.SU)(a).page=e),"page-size":(0,d.SU)(a).page_size,"onUpdate:pageSize":u[3]||(u[3]=e=>(0,d.SU)(a).page_size=e),"item-count":(0,d.SU)(g),onRefresh:(0,d.SU)(_)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(w)),(0,d.Wm)((0,d.SU)(U))]),_:1})])}}}),F=(0,W.default)(P,[["__scopeId","data-v-2297c46d"]])}}]);