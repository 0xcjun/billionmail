"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["3067"],{29875:function(e,t,a){let n;a.d(t,{Z:()=>x});var o=a(65083),l=a(20013),i=a(58786),s=a(76128),c=a(62594),r=a(56946),u=a(54470),d=a(32196),p=a(53198),h=a(44267),v=a(71309),g=a(93950),f=a(19595),m=a(9798),b=a(30951);let w={name:"Switch",common:m.Z,self:function(e){let{primaryColor:t,opacityDisabled:a,borderRadius:n,textColor3:o}=e;return Object.assign(Object.assign({},b.Z),{iconColor:o,textColor:"white",loadingColor:t,opacityDisabled:a,railColor:"rgba(0, 0, 0, .14)",railColorActive:t,buttonBoxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.3), inset 0 0 1px 0 rgba(0, 0, 0, 0.05)",buttonColor:"#FFF",railBorderRadiusSmall:n,railBorderRadiusMedium:n,railBorderRadiusLarge:n,buttonBorderRadiusSmall:n,buttonBorderRadiusMedium:n,buttonBorderRadiusLarge:n,boxShadowFocus:`0 0 0 2px ${(0,f.zX)(t,{alpha:.2})}`})}};var k=a(28632);let _=(0,v.cB)("switch",`
 height: var(--n-height);
 min-width: var(--n-width);
 vertical-align: middle;
 user-select: none;
 -webkit-user-select: none;
 display: inline-flex;
 outline: none;
 justify-content: center;
 align-items: center;
`,[(0,v.cE)("children-placeholder",`
 height: var(--n-rail-height);
 display: flex;
 flex-direction: column;
 overflow: hidden;
 pointer-events: none;
 visibility: hidden;
 `),(0,v.cE)("rail-placeholder",`
 display: flex;
 flex-wrap: none;
 `),(0,v.cE)("button-placeholder",`
 width: calc(1.75 * var(--n-rail-height));
 height: var(--n-rail-height);
 `),(0,v.cB)("base-loading",`
 position: absolute;
 top: 50%;
 left: 50%;
 transform: translateX(-50%) translateY(-50%);
 font-size: calc(var(--n-button-width) - 4px);
 color: var(--n-loading-color);
 transition: color .3s var(--n-bezier);
 `,[(0,k.c)({left:"50%",top:"50%",originalTransform:"translateX(-50%) translateY(-50%)"})]),(0,v.cE)("checked, unchecked",`
 transition: color .3s var(--n-bezier);
 color: var(--n-text-color);
 box-sizing: border-box;
 position: absolute;
 white-space: nowrap;
 top: 0;
 bottom: 0;
 display: flex;
 align-items: center;
 line-height: 1;
 `),(0,v.cE)("checked",`
 right: 0;
 padding-right: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),(0,v.cE)("unchecked",`
 left: 0;
 justify-content: flex-end;
 padding-left: calc(1.25 * var(--n-rail-height) - var(--n-offset));
 `),(0,v.c)("&:focus",[(0,v.cE)("rail",`
 box-shadow: var(--n-box-shadow-focus);
 `)]),(0,v.cM)("round",[(0,v.cE)("rail","border-radius: calc(var(--n-rail-height) / 2);",[(0,v.cE)("button","border-radius: calc(var(--n-button-height) / 2);")])]),(0,v.u4)("disabled",[(0,v.u4)("icon",[(0,v.cM)("rubber-band",[(0,v.cM)("pressed",[(0,v.cE)("rail",[(0,v.cE)("button","max-width: var(--n-button-width-pressed);")])]),(0,v.cE)("rail",[(0,v.c)("&:active",[(0,v.cE)("button","max-width: var(--n-button-width-pressed);")])]),(0,v.cM)("active",[(0,v.cM)("pressed",[(0,v.cE)("rail",[(0,v.cE)("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])]),(0,v.cE)("rail",[(0,v.c)("&:active",[(0,v.cE)("button","left: calc(100% - var(--n-offset) - var(--n-button-width-pressed));")])])])])])]),(0,v.cM)("active",[(0,v.cE)("rail",[(0,v.cE)("button","left: calc(100% - var(--n-button-width) - var(--n-offset))")])]),(0,v.cE)("rail",`
 overflow: hidden;
 height: var(--n-rail-height);
 min-width: var(--n-rail-width);
 border-radius: var(--n-rail-border-radius);
 cursor: pointer;
 position: relative;
 transition:
 opacity .3s var(--n-bezier),
 background .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 background-color: var(--n-rail-color);
 `,[(0,v.cE)("button-icon",`
 color: var(--n-icon-color);
 transition: color .3s var(--n-bezier);
 font-size: calc(var(--n-button-height) - 4px);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 display: flex;
 justify-content: center;
 align-items: center;
 line-height: 1;
 `,[(0,k.c)()]),(0,v.cE)("button",`
 align-items: center; 
 top: var(--n-offset);
 left: var(--n-offset);
 height: var(--n-button-height);
 width: var(--n-button-width-pressed);
 max-width: var(--n-button-width);
 border-radius: var(--n-button-border-radius);
 background-color: var(--n-button-color);
 box-shadow: var(--n-button-box-shadow);
 box-sizing: border-box;
 cursor: inherit;
 content: "";
 position: absolute;
 transition:
 background-color .3s var(--n-bezier),
 left .3s var(--n-bezier),
 opacity .3s var(--n-bezier),
 max-width .3s var(--n-bezier),
 box-shadow .3s var(--n-bezier);
 `)]),(0,v.cM)("active",[(0,v.cE)("rail","background-color: var(--n-rail-color-active);")]),(0,v.cM)("loading",[(0,v.cE)("rail",`
 cursor: wait;
 `)]),(0,v.cM)("disabled",[(0,v.cE)("rail",`
 cursor: not-allowed;
 opacity: .5;
 `)])]),y=Object.assign(Object.assign({},r.Z.props),{size:{type:String,default:"medium"},value:{type:[String,Number,Boolean],default:void 0},loading:Boolean,defaultValue:{type:[String,Number,Boolean],default:!1},disabled:{type:Boolean,default:void 0},round:{type:Boolean,default:!0},"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],checkedValue:{type:[String,Number,Boolean],default:!0},uncheckedValue:{type:[String,Number,Boolean],default:!1},railStyle:Function,rubberBand:{type:Boolean,default:!0},onChange:[Function,Array]}),x=(0,i.aZ)({name:"Switch",props:y,slots:Object,setup(e){void 0===n&&(n="undefined"==typeof CSS||void 0!==CSS.supports&&CSS.supports("width","max(1px)"));let{mergedClsPrefixRef:t,inlineThemeDisabled:a}=(0,u.ZP)(e),s=(0,r.Z)("Switch","-switch",_,w,e,t),c=(0,d.Z)(e),{mergedSizeRef:g,mergedDisabledRef:f}=c,m=(0,i.iH)(e.defaultValue),b=(0,i.Vh)(e,"value"),k=(0,l.Z)(b,m),y=(0,i.Fl)(()=>k.value===e.checkedValue),x=(0,i.iH)(!1),S=(0,i.iH)(!1),z=(0,i.Fl)(()=>{let{railStyle:t}=e;if(t)return t({focused:S.value,checked:y.value})});function U(t){let{"onUpdate:value":a,onChange:n,onUpdateValue:o}=e,{nTriggerFormInput:l,nTriggerFormChange:i}=c;a&&(0,h.R)(a,t),o&&(0,h.R)(o,t),n&&(0,h.R)(n,t),m.value=t,l(),i()}let $=(0,i.Fl)(()=>{let e,t,a,{value:l}=g,{self:{opacityDisabled:i,railColor:c,railColorActive:r,buttonBoxShadow:u,buttonColor:d,boxShadowFocus:p,loadingColor:h,textColor:f,iconColor:m,[(0,v.Tl)("buttonHeight",l)]:b,[(0,v.Tl)("buttonWidth",l)]:w,[(0,v.Tl)("buttonWidthPressed",l)]:k,[(0,v.Tl)("railHeight",l)]:_,[(0,v.Tl)("railWidth",l)]:y,[(0,v.Tl)("railBorderRadius",l)]:x,[(0,v.Tl)("buttonBorderRadius",l)]:S},common:{cubicBezierEaseInOut:z}}=s.value;return n?(e=`calc((${_} - ${b}) / 2)`,t=`max(${_}, ${b})`,a=`max(${y}, calc(${y} + ${b} - ${_}))`):(e=(0,o.BL)(((0,o.fQ)(_)-(0,o.fQ)(b))/2),t=(0,o.BL)(Math.max((0,o.fQ)(_),(0,o.fQ)(b))),a=(0,o.fQ)(_)>(0,o.fQ)(b)?y:(0,o.BL)((0,o.fQ)(y)+(0,o.fQ)(b)-(0,o.fQ)(_))),{"--n-bezier":z,"--n-button-border-radius":S,"--n-button-box-shadow":u,"--n-button-color":d,"--n-button-width":w,"--n-button-width-pressed":k,"--n-button-height":b,"--n-height":t,"--n-offset":e,"--n-opacity-disabled":i,"--n-rail-border-radius":x,"--n-rail-color":c,"--n-rail-color-active":r,"--n-rail-height":_,"--n-rail-width":y,"--n-width":a,"--n-box-shadow-focus":p,"--n-loading-color":h,"--n-text-color":f,"--n-icon-color":m}}),Z=a?(0,p.F)("switch",(0,i.Fl)(()=>g.value[0]),$,e):void 0;return{handleClick:function(){e.loading||f.value||(k.value!==e.checkedValue?U(e.checkedValue):U(e.uncheckedValue))},handleBlur:function(){S.value=!1;let{nTriggerFormBlur:e}=c;e(),x.value=!1},handleFocus:function(){S.value=!0;let{nTriggerFormFocus:e}=c;e()},handleKeyup:function(t){e.loading||f.value||" "===t.key&&(k.value!==e.checkedValue?U(e.checkedValue):U(e.uncheckedValue),x.value=!1)},handleKeydown:function(t){e.loading||f.value||" "===t.key&&(t.preventDefault(),x.value=!0)},mergedRailStyle:z,pressed:x,mergedClsPrefix:t,mergedValue:k,checked:y,mergedDisabled:f,cssVars:a?void 0:$,themeClass:null==Z?void 0:Z.themeClass,onRender:null==Z?void 0:Z.onRender}},render(){let{mergedClsPrefix:e,mergedDisabled:t,checked:a,mergedRailStyle:n,onRender:o,$slots:l}=this;null==o||o();let{checked:r,unchecked:u,icon:d,"checked-icon":p,"unchecked-icon":h}=l,v=!((0,g.aD)(d)&&(0,g.aD)(p)&&(0,g.aD)(h));return(0,i.h)("div",{role:"switch","aria-checked":a,class:[`${e}-switch`,this.themeClass,v&&`${e}-switch--icon`,a&&`${e}-switch--active`,t&&`${e}-switch--disabled`,this.round&&`${e}-switch--round`,this.loading&&`${e}-switch--loading`,this.pressed&&`${e}-switch--pressed`,this.rubberBand&&`${e}-switch--rubber-band`],tabindex:this.mergedDisabled?void 0:0,style:this.cssVars,onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur,onKeyup:this.handleKeyup,onKeydown:this.handleKeydown},(0,i.h)("div",{class:`${e}-switch__rail`,"aria-hidden":"true",style:n},(0,g.K9)(r,t=>(0,g.K9)(u,a=>t||a?(0,i.h)("div",{"aria-hidden":!0,class:`${e}-switch__children-placeholder`},(0,i.h)("div",{class:`${e}-switch__rail-placeholder`},(0,i.h)("div",{class:`${e}-switch__button-placeholder`}),t),(0,i.h)("div",{class:`${e}-switch__rail-placeholder`},(0,i.h)("div",{class:`${e}-switch__button-placeholder`}),a)):null)),(0,i.h)("div",{class:`${e}-switch__button`},(0,g.K9)(d,t=>(0,g.K9)(p,a=>(0,g.K9)(h,n=>(0,i.h)(s.Z,null,{default:()=>this.loading?(0,i.h)(c.Z,{key:"loading",clsPrefix:e,strokeWidth:20}):this.checked&&(a||t)?(0,i.h)("div",{class:`${e}-switch__button-icon`,key:a?"checked-icon":"icon"},a||t):!this.checked&&(n||t)?(0,i.h)("div",{class:`${e}-switch__button-icon`,key:n?"unchecked-icon":"icon"},n||t):null})))),(0,g.K9)(r,t=>t&&(0,i.h)("div",{key:"checked",class:`${e}-switch__checked`},t)),(0,g.K9)(u,t=>t&&(0,i.h)("div",{key:"unchecked",class:`${e}-switch__unchecked`},t)))))}})},84075:function(e,t,a){a.d(t,{WH:()=>s,hI:()=>i,iE:()=>d,mD:()=>u,sS:()=>r,uz:()=>v,vi:()=>p,yG:()=>h,yL:()=>c});var n=a(76882),o=a(34541);let{t:l}=n.Z.global,i=e=>o.e.get("/contact/group/list",{params:e}),s=()=>o.e.get("/contact/group/all"),c=e=>o.e.get("/contact/group/info",{params:e}),r=e=>o.e.post("/contact/group/create",e,{fetchOptions:{loading:l("contacts.group.loading.createGroup"),successMessage:!0}}),u=e=>o.e.post("/contact/group/update",e,{fetchOptions:{loading:l("contacts.group.loading.updateGroup"),successMessage:!0}}),d=e=>o.e.post("/contact/group/delete",e,{fetchOptions:{loading:l("contacts.group.loading.deleteGroup"),successMessage:!0}}),p=e=>o.e.post("/contact/group/contact_count",e),h=e=>o.e.post("/contact/group/export",e,{fetchOptions:{loading:l("contacts.group.loading.exportGroup"),successMessage:!0}}),v=e=>o.e.post("/contact/group/update",e,{fetchOptions:{loading:l("contacts.group.loading.saveSettings"),successMessage:!0}})},51169:function(e,t,a){a.d(t,{d:()=>i});var n=a(58786),o=a(49247);let l=Symbol("MODAL_INJECT"),i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:i,onConfirm:s}=e,c=(0,n.qj)({});return a?[(0,n.aZ)({setup(o,i){let{attrs:s,slots:r}=i;return(0,n.JJ)(l,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(c,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,n.h)(a,{...o,...s},r)}}),c]:[(0,n.aZ)({setup(t,a){let{attrs:r,slots:u}=a,d=(0,n.f3)(l),p=(0,n.iH)(!1);return c.open=()=>{var t;p.value=!0,null==(t=e.onChangeState)||t.call(e,p.value)},c.close=()=>{p.value=!1},c.setState=t=>{var a;null==d||d.setState(t),null==(a=e.onChangeState)||a.call(e,p.value)},c.getState=()=>(null==d?void 0:d.state)??{},null==d||d.extendApi(c),()=>(0,n.Wm)(o.Z,(0,n.dG)({show:p.value},t,r,{onCancel:i,onConfirm:s,"onUpdate:show":e=>{p.value=e??!1}}),u)}}),c]}},86559:function(e,t,a){a.d(t,{Z:()=>l});var n=a(73084),o=a(58786);let l=(0,o.aZ)({__name:"index",props:(0,o.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,o.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:l}=t,i=(0,o.iH)(null),s=(0,o.tT)(e,"value"),c=()=>{l("search",s.value)};return a({focus:()=>{var e;null==(e=i.value)||e.focus()}}),(e,t)=>{let a=n.Z;return(0,o.wg)(),(0,o.j4)(a,(0,o.dG)({ref_key:"inputRef",ref:i,value:s.value,"onUpdate:value":t[0]||(t[0]=e=>s.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,o.D2)(c,["enter"])}),(0,o.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,o.w5)(()=>[(0,o._)("div",{class:"flex items-center cursor-pointer",onClick:c},t[1]||(t[1]=[(0,o._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,o.w5)(()=>[(0,o._)("div",{class:"flex items-center cursor-pointer",onClick:c},t[2]||(t[2]=[(0,o._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},25170:function(e,t,a){a.d(t,{Z:()=>s});var n=a(75459),o=a(58786),l=a(68271);let i={class:"ml-8px text-14px"},s=(0,o.aZ)({__name:"index",props:(0,o.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,o.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:a}=t,s=(0,o.Fl)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),c=(0,o.tT)(e,"page"),r=(0,o.tT)(e,"pageSize"),u=t=>{var n;null==(n=e.onUpdatePage)||n.call(e,t),a("refresh")},d=t=>{var n;c.value=1,null==(n=e.onUpdatePage)||n.call(e,1),p(t),a("refresh")},p=e=>{s.value&&(0,l.qQ)(s.value,String(e))};if(s.value){let e=(0,l.$o)(s.value);e&&(r.value=(0,l.Dx)(e))}return(e,t)=>{let a=n.Z;return(0,o.wg)(),(0,o.j4)(a,(0,o.dG)(e.$attrs,{page:c.value,"onUpdate:page":[t[0]||(t[0]=e=>c.value=e),u],"page-size":r.value,"onUpdate:pageSize":[t[1]||(t[1]=e=>r.value=e),d],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,o.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,o.w5)(e=>{let{itemCount:t}=e;return[(0,o._)("span",i," Total "+(0,o.zw)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},58689:function(e,t,a){a.r(t),a.d(t,{default:()=>P});var n=a(39244),o=a(25170),l=a(60424),i=a(86559),s=a(29875),c=a(58786),r=a(93953),u=a(15496),d=a(68271),p=a(80947),h=a(51169),v=a(34541);let{t:g}=a(76882).Z.global,f=e=>v.e.get("/abnormal_recipient/list",{params:e}),m=()=>v.e.get("/abnormal_recipient/check_switch"),b=e=>v.e.post("/abnormal_recipient/delete",e,{fetchOptions:{loading:g("contacts.suspend.api.loading.deleting"),successMessage:!0}}),w=()=>v.e.post("/abnormal_recipient/get_scan_log"),k=e=>v.e.post("/abnormal_recipient/check_group",e,{fetchOptions:{loading:g("contacts.suspend.api.loading.scanning"),successMessage:!0}}),_=()=>v.e.post("/abnormal_recipient/clear_abnormal",{},{fetchOptions:{loading:g("contacts.suspend.api.loading.clearing"),successMessage:!0}}),y=e=>v.e.post("/abnormal_recipient/set_check_switch",e,{fetchOptions:{loading:g("contacts.suspend.api.loading.setting"),successMessage:!0}});var x=a(46244),S=a(16715),z=a(2352),U=a(6455),$=a(8490),Z=a(84075),C=a(52495);let B={class:"pt-12px"},E={class:"h-32px flex items-center"},W={class:"h-32px flex items-center"},M={class:"h-32px flex items-center"},T=(0,c.aZ)({__name:"Scan",setup(e){let{t}=(0,C.QT)(),a=(0,c.AE)("formRef"),n=(0,c.qj)({group_id:null,oper:1}),o={group_id:{trigger:"change",validator:()=>!!n.group_id||Error(t("contacts.suspend.scan.form.groupRequired"))}},l=(0,c.iH)([]),i=async()=>{let e=await (0,Z.WH)();(0,d.Kn)(e)&&(l.value=e.list.map(e=>({label:e.name,value:e.id})))},[s,r]=(0,h.d)({onChangeState:e=>{e?i():(n.group_id=null,n.oper=1)},onConfirm:async()=>{var e;await (null==(e=a.value)?void 0:e.validate()),await k({group_id:n.group_id||0,oper:n.oper}),setTimeout(()=>{let{showLogs:e}=r.getState();e()},1500)}});return(e,t)=>{let i=$.Z,r=U.ZP,u=z.Z,d=S.Z,p=x.Z;return(0,c.wg)(),(0,c.j4)((0,c.SU)(s),{title:e.$t("contacts.suspend.scan.title"),width:"480","confirm-text":"Scan"},{default:(0,c.w5)(()=>[(0,c._)("div",B,[(0,c.Wm)(p,{ref_key:"formRef",ref:a,form:(0,c.SU)(n),rules:o},{default:(0,c.w5)(()=>[(0,c.Wm)(r,{label:"Group",path:"group_id"},{default:(0,c.w5)(()=>[(0,c.Wm)(i,{value:(0,c.SU)(n).group_id,"onUpdate:value":t[0]||(t[0]=e=>(0,c.SU)(n).group_id=e),options:(0,c.SU)(l)},null,8,["value","options"])]),_:1}),(0,c.Wm)(r,{label:"Method"},{default:(0,c.w5)(()=>[(0,c.Wm)(d,{value:(0,c.SU)(n).oper,"onUpdate:value":t[1]||(t[1]=e=>(0,c.SU)(n).oper=e)},{default:(0,c.w5)(()=>[(0,c._)("div",E,[(0,c.Wm)(u,{value:1},{default:(0,c.w5)(()=>[(0,c.Uk)((0,c.zw)(e.$t("contacts.suspend.scan.methods.noOperation")),1)]),_:1})]),(0,c._)("div",W,[(0,c.Wm)(u,{value:2},{default:(0,c.w5)(()=>[(0,c.Uk)((0,c.zw)(e.$t("contacts.suspend.scan.methods.addToExceptionTable")),1)]),_:1})]),(0,c._)("div",M,[(0,c.Wm)(u,{value:3},{default:(0,c.w5)(()=>[(0,c.Uk)((0,c.zw)(e.$t("contacts.suspend.scan.methods.deleteFromGroup")),1)]),_:1})])]),_:1},8,["value"])]),_:1})]),_:1},8,["form"])])]),_:1},8,["title"])}}});var j=a(60579),R=a(59362);let O={class:"pt-12px mb-8px"},F=(0,c.aZ)({__name:"ScanLogs",setup(e){let{t}=(0,C.QT)(),a=(0,c.iH)(!1),n=(0,c.iH)(t("contacts.suspend.scanLogs.none")),o=null,l=(0,c.iH)(!1),i=(0,c.iH)(0),s=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e&&(a.value=!0);let t=await w();(0,d.HD)(t)?(n.value=t,i.value=0,n.value.includes("Check finished")||n.value.includes("扫描完成")?v():l.value&&p()):r()}finally{e&&(a.value=!1)}},r=()=>{i.value++,i.value>=3?v():l.value&&p()},p=()=>{l.value&&(null!==o&&clearTimeout(o),o=window.setTimeout(()=>{s(!1)},1e3))},v=()=>{null!==o&&(clearTimeout(o),o=null),l.value=!1},[g]=(0,h.d)({onChangeState:e=>{e?s(!0):(n.value=t("contacts.suspend.scanLogs.none"),v())}});return(e,t)=>{let o=u.ZP,l=R.Z,i=j.Z;return(0,c.wg)(),(0,c.j4)((0,c.SU)(g),{title:e.$t("contacts.suspend.scanLogs.title"),width:"820",footer:!1},{default:(0,c.w5)(()=>[(0,c._)("div",O,[(0,c.Wm)(o,{type:"primary",onClick:t[0]||(t[0]=e=>s(!0))},{default:(0,c.w5)(()=>[(0,c.Uk)((0,c.zw)(e.$t("common.actions.refresh")),1)]),_:1})]),(0,c.Wm)(i,{show:(0,c.SU)(a)},{default:(0,c.w5)(()=>[(0,c.Wm)(l,{height:"480px",code:(0,c.SU)(n)},null,8,["code"])]),_:1},8,["show"])]),_:1},8,["title"])}}}),V={class:"ml-8px"},H={class:"mr-12px"},P=(0,c.aZ)({__name:"index",setup(e){let{t}=(0,C.QT)(),a=(0,c.iH)(!1);(async()=>{let e=await m();(0,d.hj)(e)&&(a.value=1===e)})();let v=async e=>{await y({oper:+!!e})},[g,w]=(0,h.d)({component:T,state:{showLogs:()=>{S.open()}}}),k=()=>{w.open()},[x,S]=(0,h.d)({component:F}),z=()=>{S.open()},U=()=>{(0,d.iG)({title:t("contacts.suspend.confirm.clear.title"),content:t("contacts.suspend.confirm.clear.content"),onConfirm:async()=>{await _(),E()}})},{tableParams:$,tableProps:Z,pageProps:B,fetchTable:E,resetTable:W}=(0,p.N)({params:{page:1,page_size:10,status:1,keyword:""},fetchFn:f}),M=(0,c.iH)([{key:"recipient",title:t("contacts.suspend.columns.email")},{key:"description",title:t("contacts.suspend.columns.description")},{key:"state",title:t("contacts.suspend.columns.status"),render:e=>e.state||e.count>=3?t("contacts.suspend.status.invalid"):t("contacts.suspend.status.checking")},{key:"create_time",title:t("contacts.suspend.columns.addTime"),render:e=>(0,d.mr)(e.create_time)},{title:t("common.columns.actions"),key:"actions",align:"right",width:100,render:e=>{let a;return(0,c.Wm)(r.Z,{inline:!0},{default:()=>{var n;return[(0,c.Wm)(u.ZP,{type:"error",text:!0,onClick:()=>{j(e)}},"function"!=typeof(n=a=t("common.actions.delete"))&&("[object Object]"!==Object.prototype.toString.call(n)||(0,c.lA)(n))?{default:()=>[a]}:a)]}})}}]),j=e=>{(0,d.iG)({title:t("contacts.suspend.confirm.delete.title"),content:t("contacts.suspend.confirm.delete.content",{email:e.recipient}),onConfirm:async()=>{await b({id:e.id}),E()}})};return(e,t)=>{let r=s.Z,d=i.Z,p=l.Z,h=o.Z,f=n.Z;return(0,c.wg)(),(0,c.iD)("div",null,[(0,c.Wm)(f,null,{toolsLeft:(0,c.w5)(()=>[(0,c.Wm)((0,c.SU)(u.ZP),{type:"primary",onClick:k},{default:(0,c.w5)(()=>[(0,c.Uk)((0,c.zw)(e.$t("contacts.suspend.buttons.scanInvalidDomains")),1)]),_:1}),(0,c.Wm)((0,c.SU)(u.ZP),{onClick:z},{default:(0,c.w5)(()=>[(0,c.Uk)((0,c.zw)(e.$t("contacts.suspend.buttons.scanLogs")),1)]),_:1}),(0,c.Wm)((0,c.SU)(u.ZP),{onClick:U},{default:(0,c.w5)(()=>[(0,c.Uk)((0,c.zw)(e.$t("common.actions.clear")),1)]),_:1}),(0,c._)("div",V,[(0,c._)("span",H,(0,c.zw)(e.$t("contacts.suspend.buttons.autoBlockFailedEmails")),1),(0,c.Wm)(r,{value:(0,c.SU)(a),"onUpdate:value":[t[0]||(t[0]=e=>(0,c.dq)(a)?a.value=e:null),v]},null,8,["value"])])]),toolsRight:(0,c.w5)(()=>[(0,c.Wm)(d,{value:(0,c.SU)($).keyword,"onUpdate:value":t[1]||(t[1]=e=>(0,c.SU)($).keyword=e),width:240,placeholder:e.$t("contacts.suspend.search.emailPlaceholder"),onSearch:(0,c.SU)(W)},null,8,["value","placeholder","onSearch"])]),table:(0,c.w5)(()=>[(0,c.Wm)(p,(0,c.dG)((0,c.SU)(Z),{columns:(0,c.SU)(M)}),null,16,["columns"])]),pageRight:(0,c.w5)(()=>[(0,c.Wm)(h,(0,c.dG)((0,c.SU)(B),{onRefresh:(0,c.SU)(E)}),null,16,["onRefresh"])]),modal:(0,c.w5)(()=>[(0,c.Wm)((0,c.SU)(g)),(0,c.Wm)((0,c.SU)(x))]),_:1})])}}})}}]);