"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2910"],{39432:function(e,t,a){a.d(t,{Au:()=>r,Fj:()=>o,LC:()=>d,Lb:()=>_,OV:()=>m,dj:()=>p,gK:()=>s,i7:()=>i,rU:()=>g,v1:()=>u,xh:()=>f,yW:()=>c});var l=a(34541);let{t:n}=a(76882).Z.global,i=e=>l.e.get("/domains/list",{params:e}),d=()=>l.e.get("/domains/all"),o=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:n("domain.api.loading.creating"),successMessage:!0}}),s=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:n("domain.api.loading.updating"),successMessage:!0}}),p=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:n("domain.api.loading.deleting"),successMessage:!0}}),m=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:n("domain.api.loading.settingSSL"),successMessage:!0}}),r=e=>l.e.get("/domains/get_ssl",{params:e}),u=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:n("domain.api.loading.refreshingDns"),successMessage:!0}}),c=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:n("domain.api.loading.applyingCert"),successMessage:!0}}),f=e=>l.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}}),g=e=>l.e.post("/askai/project/create",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}}),_=()=>l.e.post("/askai/supplier/status")},31651:function(e,t,a){a.d(t,{A8:()=>d,NI:()=>o,QB:()=>p,WF:()=>s,Xc:()=>r,ef:()=>m});var l=a(76882),n=a(34541);let{t:i}=l.Z.global;function d(e){return n.e.get("/email_template/list",{params:e})}function o(){return n.e.get("/email_template/all")}function s(e){return n.e.post("/email_template/create",e,{fetchOptions:{loading:i("market.template.loading.creating"),successMessage:!0}})}function p(e){return n.e.post("/email_template/update",e,{fetchOptions:{loading:i("market.template.loading.updating"),successMessage:!0}})}function m(e){return n.e.post("/email_template/copy",e,{fetchOptions:{loading:i("market.template.loading.copying"),successMessage:!0}})}function r(e){return n.e.post("/email_template/delete",e,{fetchOptions:{loading:i("market.template.loading.deleting"),successMessage:!0}})}},88253:function(e,t,a){a.d(t,{Z:()=>o});var l=a(60579),n=a(58786),i=a(6768);let d=(0,n.aZ)({__name:"index",props:(0,n.Vf)({language:{type:String,default:"html"},theme:{type:String,default:"vs-dark"},options:{type:Object,default:()=>({})}},{value:{default:""},valueModifiers:{}}),emits:(0,n.Vf)(["save"],["update:value"]),setup(e,t){let{expose:a,emit:d}=t,o=(0,n.tT)(e,"value"),s=(0,n.iH)(null),p=null,m=(0,n.iH)(!1);i.Z.config({paths:{vs:`${location.origin}/static/plugin/monaco`}});let r=async()=>{if(s.value&&!p)try{m.value=!0;let t=await i.Z.init();(p=t.editor.create(s.value,{value:o.value,language:e.language,theme:e.theme,minimap:{enabled:!1},automaticLayout:!0,scrollBeyondLastLine:!1,fontSize:14,tabSize:2,wordWrap:"on",...e.options})).onDidChangeModelContent(()=>{o.value=(null==p?void 0:p.getValue())||""}),p.addCommand(t.KeyMod.CtrlCmd|t.KeyCode.KeyS,function(){d("save")})}finally{m.value=!1}},u=()=>{p&&(p.dispose(),p=null)};return(0,n.YP)(()=>o.value,e=>{p&&e!==p.getValue()&&p.setValue(e)}),(0,n.bv)(()=>{r()}),(0,n.Jd)(()=>{u()}),a({getEditor:()=>p}),(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,{class:"h-full",show:(0,n.SU)(m)},{default:(0,n.w5)(()=>[(0,n._)("div",{ref_key:"containerRef",ref:s,class:"monaco-editor-container"},null,512)]),_:1},8,["show"])}}}),o=(0,a(41748).default)(d,[["__scopeId","data-v-72ffe419"]])},53472:function(e,t,a){a.d(t,{Z:()=>i});var l=a(58786);let n=["height","srcdoc"],i=(0,l.aZ)({__name:"index",props:{value:{type:String,default:""},height:{type:[String,Number],default:"100%"}},setup:e=>(t,a)=>((0,l.wg)(),(0,l.iD)("iframe",{width:"100%",height:e.height,srcdoc:e.value,style:{border:"none",borderRadius:"4px"}},null,8,n))})},86559:function(e,t,a){a.d(t,{Z:()=>i});var l=a(73084),n=a(58786);let i=(0,n.aZ)({__name:"index",props:(0,n.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,n.Vf)(["search"],["update:value"]),setup(e,t){let{expose:a,emit:i}=t,d=(0,n.iH)(null),o=(0,n.tT)(e,"value"),s=()=>{i("search",o.value)};return a({focus:()=>{var e;null==(e=d.value)||e.focus()}}),(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,(0,n.dG)({ref_key:"inputRef",ref:d,value:o.value,"onUpdate:value":t[0]||(t[0]=e=>o.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,n.D2)(s,["enter"])}),(0,n.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:s},t[1]||(t[1]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,n.w5)(()=>[(0,n._)("div",{class:"flex items-center cursor-pointer",onClick:s},t[2]||(t[2]=[(0,n._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},13269:function(e,t,a){a.r(t),a.d(t,{default:()=>D});var l=a(39244),n=a(25170),i=a(60424),d=a(66760),o=a(86559),s=a(15496),p=a(73084),m=a(58786),r=a(53903),u=a(93953),c=a(51169),f=a(67512),g=a(68271),_=a(31651),h=a(46244),v=a(6455),y=a(88253),w=a(3179),S=a(81833),k=a(8490),U=a(37864);let x={class:"flex flex-col flex-1 h-580px"},Z={class:"flex justify-end gap-12px mb-8px"},W={class:"flex-1"},b=(0,m.aZ)({__name:"TemplateForm",setup(e){let t=(0,m.RC)(()=>Promise.all([a.e("5274"),a.e("7303"),a.e("5867"),a.e("587"),a.e("9380")]).then(a.bind(a,48555))),l=(0,m.iH)(!1),n=(0,m.Fl)(()=>l.value?"Edit template":"New template"),i=(0,m.iH)(0),d=(0,m.qj)({temp_name:"",add_type:0,html_content:"",drag_data:""}),o=[{label:"HTML",value:0},{label:"Drag",value:1}],r=(0,m.Fl)(()=>{var e;return(null==(e=o.find(e=>e.value===d.add_type))?void 0:e.label)||""}),u=e=>{let t=new FileReader;t.onload=e=>{var t;d.html_content=null==(t=e.target)?void 0:t.result},e.file&&t.readAsText(e.file)},f=()=>{let e=b.getState();e.preview&&e.preview(d.html_content)},[g,b]=(0,c.d)({onChangeState:e=>{if(e){let e=b.getState(),{row:t}=e;l.value=e.isEdit,e.type&&(d.add_type=e.type),t&&(i.value=t.id,d.temp_name=t.temp_name,d.add_type=t.add_type,d.html_content=t.html_content,d.drag_data=t.drag_data)}else i.value=0,d.temp_name="",d.add_type=0,d.html_content="",d.drag_data=""},onConfirm:async()=>{l.value?await (0,_.QB)({id:i.value,...(0,m.IU)(d)}):await (0,_.WF)((0,m.IU)(d)),b.getState().refresh()}});return(e,a)=>{let i=p.Z,c=U.ZP,_=k.Z,b=S.Z,C=w.Z,M=s.ZP,P=y.Z,j=v.ZP,O=h.Z;return(0,m.wg)(),(0,m.j4)((0,m.SU)(g),{title:(0,m.SU)(n),width:1200},{default:(0,m.w5)(()=>[(0,m.Wm)(O,{class:"pt-8px",model:(0,m.SU)(d)},{default:(0,m.w5)(()=>[(0,m.Wm)(b,{cols:24,"x-gap":24},{default:(0,m.w5)(()=>[(0,m.Wm)(c,{span:18,label:"Name",path:"temp_name"},{default:(0,m.w5)(()=>[(0,m.Wm)(i,{value:(0,m.SU)(d).temp_name,"onUpdate:value":a[0]||(a[0]=e=>(0,m.SU)(d).temp_name=e),placeholder:e.$t("market.template.add.namePlaceholder")},null,8,["value","placeholder"])]),_:1}),(0,m.Wm)(c,{span:6,label:"Type",path:"add_type"},{default:(0,m.w5)(()=>[(0,m.Wm)(_,{value:(0,m.SU)(d).add_type,"onUpdate:value":a[1]||(a[1]=e=>(0,m.SU)(d).add_type=e),disabled:(0,m.SU)(l),options:o},null,8,["value","disabled"])]),_:1})]),_:1}),(0,m.Wm)(j,{label:(0,m.SU)(r),"show-feedback":!1},{default:(0,m.w5)(()=>[(0,m._)("div",x,[(0,m._)("div",Z,[(0,m._)("div",null,[(0,m.Wm)(C,{mode:"button","button-type":"primary","is-upload":!1,accept:["html"],onChange:u},{default:(0,m.w5)(()=>[(0,m.Uk)((0,m.zw)(e.$t("market.template.uploadHtml")),1)]),_:1})]),(0,m.Wm)(M,{type:"primary",ghost:"",onClick:f},{default:(0,m.w5)(()=>[(0,m.Uk)((0,m.zw)(e.$t("common.actions.preview")),1)]),_:1})]),(0,m._)("div",W,[1===(0,m.SU)(d).add_type?((0,m.wg)(),(0,m.j4)((0,m.SU)(t),{key:0,config:(0,m.SU)(d).drag_data,"onUpdate:config":a[2]||(a[2]=e=>(0,m.SU)(d).drag_data=e),html:(0,m.SU)(d).html_content,"onUpdate:html":a[3]||(a[3]=e=>(0,m.SU)(d).html_content=e)},null,8,["config","html"])):(0,m.kq)("",!0),0===(0,m.SU)(d).add_type?((0,m.wg)(),(0,m.j4)(P,{key:1,value:(0,m.SU)(d).html_content,"onUpdate:value":a[4]||(a[4]=e=>(0,m.SU)(d).html_content=e),language:"html"},null,8,["value"])):(0,m.kq)("",!0)])])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title"])}}});var C=a(53472);let M=(0,m.aZ)({__name:"TemplatePreview",setup(e){let t=(0,m.iH)(""),[a,l]=(0,c.d)({onChangeState:e=>{e&&(t.value=l.getState().html||"")}});return(e,l)=>{let n=C.Z;return(0,m.wg)(),(0,m.j4)((0,m.SU)(a),{title:e.$t("market.template.preview.title"),width:"820",footer:!1},{default:(0,m.w5)(()=>[(0,m.Wm)(n,{height:580,value:(0,m.SU)(t)},null,8,["value"])]),_:1},8,["title"])}}});var P=a(67153),j=a(65965),O=a(52495);let z={class:"p-24px"},E={class:"bt-title"};function T(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,m.lA)(e)}let H=(0,m.aZ)({__name:"index",setup(e){let t=(0,j.tv)(),{t:a}=(0,O.QT)(),h=(0,m.iH)(),{tableParams:v,tableList:y,loading:w,tableTotal:S,getTableData:k}=(0,f.Z)({loading:!0,immediate:!1,params:{page:1,page_size:10,keyword:""},fetchFn:_.A8});(async()=>{await k(),y.value.forEach(e=>{e.isEdit=!1,e.edit_name=""})})();let U=(0,m.iH)([{key:"temp_name",title:a("market.template.columns.name"),minWidth:120,ellipsis:{tooltip:!0},render:e=>{if(!e.isEdit)return(0,m.Wm)("div",{class:"flex justify-start gap-1.25 items-center"},[(0,m.Wm)(s.ZP,{type:"primary",text:!0,onClick:()=>{D(e)}},{default:()=>[e.temp_name]}),(0,m.Wm)("i",{class:"i-ci:edit-pencil-line-01 text-14px cursor-pointer",onClick:()=>{e.isEdit=!0,e.edit_name=e.temp_name}},null)]);{let t,l;return(0,m.Wm)("div",{class:"flex justify-start gap-1.25 items-center"},[(0,m.Wm)(p.Z,{class:"edit-domain-input",value:e.edit_name,"onUpdate:value":t=>e.edit_name=t},null),(0,m.Wm)(s.ZP,{text:!0,type:"info",class:"text-12px",onClick:()=>H(e)},T(t=a("market.template.edit.confirm"))?t:{default:()=>[t]}),(0,m.Wm)(s.ZP,{text:!0,type:"default",onClick:()=>{e.isEdit=!1,e.edit_name=""}},T(l=a("market.template.edit.cancel"))?l:{default:()=>[l]})])}}},{key:"add_type",title:a("market.template.columns.type"),minWidth:140,render:e=>{if(1===e.add_type){let e;return(0,m.Wm)(r.ZP,{size:"small",bordered:!1,type:"primary"},T(e=a("market.template.types.drag"))?e:{default:()=>[e]})}if(0===e.add_type){let e;return(0,m.Wm)(r.ZP,{size:"small",bordered:!1,type:"info"},T(e=a("market.template.types.html"))?e:{default:()=>[e]})}if(2==e.add_type){let e;return(0,m.Wm)(r.ZP,{size:"small",bordered:!1,type:"success"},T(e=a("market.template.types.ai"))?e:{default:()=>[e]})}}},{key:"create_time",title:a("market.template.columns.createdAt"),minWidth:140,render:e=>(0,g.mr)(e.create_time)},{title:a("common.columns.actions"),key:"actions",align:"right",width:240,render:e=>{let t,l,n,i;return(0,m.Wm)(u.Z,{inline:!0},{default:()=>[(0,m.Wm)(s.ZP,{type:"primary",text:!0,onClick:()=>{F(e.html_content)}},T(t=a("common.actions.preview"))?t:{default:()=>[t]}),(0,m.Wm)(s.ZP,{type:"primary",text:!0,onClick:()=>{D(e)}},T(l=a("common.actions.edit"))?l:{default:()=>[l]}),(0,m.Wm)(s.ZP,{type:"primary",text:!0,disabled:2==e.add_type,onClick:()=>{V(e)}},T(n=a("market.template.actions.duplicate"))?n:{default:()=>[n]}),(0,m.Wm)(s.ZP,{type:"error",text:!0,onClick:()=>{$(e)}},T(i=a("common.actions.delete"))?i:{default:()=>[i]})]})}}]),[x,Z]=(0,c.d)({component:b,state:{isEdit:!1,refresh:k,preview:e=>{F(e)}}}),W=()=>{h.value.open()},C=e=>{"Drag"==e?Z.setState({isEdit:!1,type:1,row:null}):"HTML"==e&&Z.setState({isEdit:!1,type:0,row:null}),Z.open()},H=async e=>{e.temp_name=e.edit_name,await (0,_.QB)(e),e.isEdit=!1},D=e=>{2==e.add_type&&e.chat_id?t.push({name:"ai-template",params:{chatId:e.chat_id}}):(Z.setState({isEdit:!0,row:e}),Z.open())},[R,L]=(0,c.d)({component:M}),F=e=>{L.setState({html:e}),L.open()},V=async e=>{await (0,_.ef)({id:e.id}),k()},$=e=>{(0,g.iG)({title:a("market.template.delete.title"),content:a("market.template.delete.confirm",{name:e.temp_name}),confirmText:a("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,_.Xc)({id:e.id}),k()}})};return(e,t)=>{let p=o.Z,r=d.Z,u=i.Z,c=n.Z,f=l.Z;return(0,m.wg)(),(0,m.iD)(m.HY,null,[(0,m._)("div",z,[(0,m._)("div",E,(0,m.zw)((0,m.SU)(a)("template.template")),1),(0,m.Wm)(f,null,{toolsLeft:(0,m.w5)(()=>[(0,m.Wm)((0,m.SU)(s.ZP),{type:"primary",onClick:W},{default:(0,m.w5)(()=>[(0,m.Uk)((0,m.zw)((0,m.SU)(a)("market.template.actions.add")),1)]),_:1})]),toolsRight:(0,m.w5)(()=>[(0,m.Wm)(p,{value:(0,m.SU)(v).keyword,"onUpdate:value":t[0]||(t[0]=e=>(0,m.SU)(v).keyword=e),width:240,placeholder:(0,m.SU)(a)("market.template.search.namePlaceholder"),onSearch:t[1]||(t[1]=()=>(0,m.SU)(k)(!0))},null,8,["value","placeholder"])]),table:(0,m.w5)(()=>[(0,m.Wm)(u,{loading:(0,m.SU)(w),columns:(0,m.SU)(U),data:(0,m.SU)(y)},{empty:(0,m.w5)(()=>[(0,m.Wm)(r)]),_:1},8,["loading","columns","data"])]),pageRight:(0,m.w5)(()=>[(0,m.Wm)(c,{page:(0,m.SU)(v).page,"onUpdate:page":t[2]||(t[2]=e=>(0,m.SU)(v).page=e),"page-size":(0,m.SU)(v).page_size,"onUpdate:pageSize":t[3]||(t[3]=e=>(0,m.SU)(v).page_size=e),"item-count":(0,m.SU)(S),onRefresh:(0,m.SU)(k)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,m.w5)(()=>[(0,m.Wm)((0,m.SU)(x)),(0,m.Wm)((0,m.SU)(R))]),_:1})]),(0,m.Wm)(P.Z,{ref_key:"createTemplateModalRef",ref:h,onConfirmType:C},null,512)],64)}}}),D=(0,a(41748).default)(H,[["__scopeId","data-v-0e970b7e"]])}}]);