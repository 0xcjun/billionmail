"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2265"],{17987:function(e,a,l){l.d(a,{E:()=>i});var t=l(87499),s=l(5969);function i(e,a,l){let i=(0,s.Q)(e,l?.in);return isNaN(a)?(0,t.L)(l?.in||e,NaN):(a&&i.setDate(i.getDate()+a),i)}},93953:function(e,a,l){l.d(a,{Z:()=>f});var t=l(65083),s=l(58786),i=l(56946),n=l(54470),r=l(51048),u=l(71309),o=l(60951),d=l(6445),p=l(73238);let c={name:"Flex",self:function(){return p.Z}},v=Object.assign(Object.assign({},i.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),f=(0,s.aZ)({name:"Flex",props:v,setup(e){let{mergedClsPrefixRef:a,mergedRtlRef:l}=(0,n.ZP)(e),o=(0,i.Z)("Flex","-flex",void 0,c,e,a);return{rtlEnabled:(0,r.V)("Flex",l,a),mergedClsPrefix:a,margin:(0,s.Fl)(()=>{let{size:a}=e;if(Array.isArray(a))return{horizontal:a[0],vertical:a[1]};if("number"==typeof a)return{horizontal:a,vertical:a};let{self:{[(0,u.Tl)("gap",a)]:l}}=o.value,{row:s,col:i}=(0,t.yU)(l);return{horizontal:(0,t.fQ)(i),vertical:(0,t.fQ)(s)}})}},render(){let{vertical:e,reverse:a,align:l,inline:t,justify:i,margin:n,wrap:r,mergedClsPrefix:u,rtlEnabled:p}=this,c=(0,o.x)((0,d.z)(this),!1);return c.length?(0,s.h)("div",{role:"none",class:[`${u}-flex`,p&&`${u}-flex--rtl`],style:{display:t?"inline-flex":"flex",flexDirection:e&&!a?"column":e&&a?"column-reverse":!e&&a?"row-reverse":"row",justifyContent:i,flexWrap:!r||e?"nowrap":"wrap",alignItems:l,gap:`${n.vertical}px ${n.horizontal}px`}},c):null}})},39244:function(e,a,l){l.d(a,{Z:()=>i});var t=l(93953),s=l(58786);let i=(0,s.aZ)({__name:"index",setup(e){let a=!!(0,s.Rr)().toolsLeft,l=!!(0,s.Rr)().toolsRight,i=!!(0,s.Rr)().pageLeft||!!(0,s.Rr)().pageRight;return(e,n)=>{let r=t.Z;return(0,s.wg)(),(0,s.iD)("div",null,[a||l?((0,s.wg)(),(0,s.j4)(r,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,s.w5)(()=>[(0,s.Wm)(r,{class:"items-center",size:12},{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"toolsLeft")]),_:3}),(0,s.Wm)(r,{class:"items-center",size:12},{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,s.kq)("",!0),(0,s.WI)(e.$slots,"table"),(0,s.SU)(i)?((0,s.wg)(),(0,s.j4)(r,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,s.w5)(()=>[(0,s._)("div",null,[(0,s.WI)(e.$slots,"pageLeft")]),(0,s.Wm)(r,null,{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,s.kq)("",!0),(0,s.WI)(e.$slots,"modal")])}}})},25170:function(e,a,l){l.d(a,{Z:()=>r});var t=l(75459),s=l(58786),i=l(68271);let n={class:"ml-8px text-14px"},r=(0,s.aZ)({__name:"index",props:(0,s.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,s.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,a){let{emit:l}=a,r=(0,s.Fl)(()=>{let{storeKey:a}=e;return a?`${a}-page`:""}),u=(0,s.tT)(e,"page"),o=(0,s.tT)(e,"pageSize"),d=e=>{u.value=e,l("refresh")},p=e=>{u.value=1,o.value=e,c(e),l("refresh")},c=e=>{r.value&&(0,i.qQ)(r.value,String(e))};if(r.value){let e=(0,i.$o)(r.value);e&&(o.value=(0,i.Dx)(e))}return(e,a)=>{let l=t.Z;return(0,s.wg)(),(0,s.j4)(l,(0,s.dG)(e.$attrs,{page:u.value,"onUpdate:page":[a[0]||(a[0]=e=>u.value=e),d],"page-size":o.value,"onUpdate:pageSize":[a[1]||(a[1]=e=>o.value=e),p],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,s.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,s.w5)(e=>{let{itemCount:a}=e;return[(0,s._)("span",n," Total "+(0,s.zw)(a),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},93219:function(e,a,l){l.r(a),l.d(a,{default:()=>A});var t=l(39244),s=l(25170),i=l(75754),n=l(57869),r=l(73084),u=l(8490),o=l(17977),d=l(58786),p=l(68271),c=l(49468),v=l(36760),f=l(17987),g=l(52495);let m={class:"date-filters"},_={class:"w-120px"},w={class:"w-240px"},x=(0,d.aZ)({__name:"index",props:{dateRange:{},dateRangeModifiers:{}},emits:["update:dateRange"],setup(e){let{t:a}=(0,g.QT)(),l=(0,d.tT)(e,"dateRange"),t=(0,d.iH)("today"),s=[{label:a("common.time.today"),value:"today"},{label:a("common.time.yesterday"),value:"yesterday"},{label:a("common.time.last7days"),value:"last7days"},{label:a("common.time.custom"),value:"custom"}],i=()=>{let e=new Date,a=(0,c.i)(e);return[(0,v.b)((0,f.E)(e,-6)).getTime(),a.getTime()]},n=e=>{switch(e){case"today":l.value=(0,p.wb)();break;case"yesterday":l.value=(0,p.wb)((0,f.E)(new Date,-1));break;case"last7days":l.value=i()}},r=e=>{let a=new Date,l=(0,f.E)(a,-30);return(0,v.b)(l).getTime()>e||(0,c.i)(a).getTime()<e},x=e=>{t.value="custom",l.value=[(0,v.b)(e[0]).getTime(),(0,c.i)(e[1]).getTime()]};return(e,a)=>{let i=u.Z,p=o.Z;return(0,d.wg)(),(0,d.iD)("div",m,[(0,d._)("div",_,[(0,d.Wm)(i,{value:(0,d.SU)(t),"onUpdate:value":[a[0]||(a[0]=e=>(0,d.dq)(t)?t.value=e:null),n],options:s},null,8,["value"])]),(0,d._)("div",w,[(0,d.Wm)(p,{value:l.value,type:"daterange","is-date-disabled":r,"onUpdate:value":x},null,8,["value"])])])}}});var y=l(41748);let h=(0,y.default)(x,[["__scopeId","data-v-e229312a"]]);var b=l(67655),k=l(22895);let z=e=>{let{fetchFn:a,params:l,rowKey:t=e=>e.id,immediate:s=!0,autoRefresh:i=!1,refreshInterval:n=3e4}=e,r=(0,d.qj)({loading:s}),u=(0,d.iH)([]),o=(0,d.iH)(0),c=(0,d.iH)(l),v=null,f=(0,k.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(c.value.page=1),r.loading=!0;try{let e=await a(c.value);(0,p.Kn)(e)&&(0,p.kJ)(e.list)&&(u.value=e.list,o.value=(0,p.hj)(e.total)?e.total:0)}finally{r.loading=!1}},300),g=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return f(e)},m=()=>g(),_=()=>{w(),i&&n>0&&(v=setInterval(()=>{r.loading||m()},n))},w=()=>{v&&(clearInterval(v),v=null)},x=(0,d.Fl)(()=>u.value.length>0);return(0,d.bv)(()=>{s&&g(),i&&_()}),(0,d.SK)(()=>{w()}),{data:(0,d.OT)(u),total:(0,d.OT)(o),loading:(0,d.Fl)(()=>r.loading),hasData:x,tableParams:c,fetch:g,resetTable:()=>g(!0),refreshTable:m,changeSort:(e,a)=>{c.value.sort_field=e,c.value.sort_order=a,g(!0)},changeFilter:e=>{Object.assign(c.value,e),g(!0)},tableConfig:(0,d.Fl)(()=>({rowKey:t,data:u.value,loading:r.loading})),pageConfig:(0,d.Fl)(()=>({page:c.value.page,pageSize:c.value.page_size,itemCount:o.value}))}};var S=l(34541);let W=e=>S.e.get("/batch_mail/api/list",{params:e}),Z={class:"flex gap-16px mb-24px"},U=(0,y.default)({},[["render",function(e,a){let l=n.ZP;return(0,d.wg)(),(0,d.iD)("div",Z,[(0,d.Wm)(l,{class:"flex-1"},{default:(0,d.w5)(()=>a[0]||(a[0]=[(0,d._)("div",{class:"title"},[(0,d._)("i",{class:"i-fa:paper-plane"}),(0,d._)("span",null,"发送总量")],-1),(0,d._)("div",{class:"value"},"84,200",-1)])),_:1,__:[0]}),(0,d.Wm)(l,{class:"flex-1"},{default:(0,d.w5)(()=>a[1]||(a[1]=[(0,d._)("div",{class:"title"},[(0,d._)("i",{class:"i-fa:envelope-open"}),(0,d._)("span",null,"平均打开率")],-1),(0,d._)("div",{class:"value"},"32.4%",-1)])),_:1,__:[1]}),(0,d.Wm)(l,{class:"flex-1"},{default:(0,d.w5)(()=>a[2]||(a[2]=[(0,d._)("div",{class:"title"},[(0,d._)("i",{class:"i-fa:mouse-pointer"}),(0,d._)("span",null,"平均点击率")],-1),(0,d._)("div",{class:"value"},"15.7%",-1)])),_:1,__:[2]}),(0,d.Wm)(l,{class:"flex-1"},{default:(0,d.w5)(()=>a[3]||(a[3]=[(0,d._)("div",{class:"title"},[(0,d._)("i",{class:"i-fa:ban"}),(0,d._)("span",null,"平均退信率")],-1),(0,d._)("div",{class:"value"},"0.5%",-1)])),_:1,__:[3]})])}],["__scopeId","data-v-8c0a8c50"]]),T={class:"p-24px"},j={class:"flex items-center justify-between mb-24px"},I={class:"flex gap-12px"},$={class:"flex flex-wrap items-center gap-16px"},R={class:"flex items-center"},D={class:"flex items-center"},F={class:"w-120px"},P={class:"flex items-center"},q={class:"w-200px"},A=(0,d.aZ)({__name:"index",setup(e){let a=[{label:"全部",value:-1},{label:"可用",value:1},{label:"停用",value:0}],l=(0,d.iH)([{key:"api_name",title:"API名称"},{key:"send_count",title:"发送量"},{key:"open_rate",title:"打开率",render:e=>`${e.open_rate}%`},{key:"click_rate",title:"点击率",render:e=>`${e.click_rate}%`},{key:"bounce_rate",title:"退信率",render:e=>`${e.bounce_rate}%`}]),{tableParams:o,tableConfig:p,pageConfig:c,refreshTable:v}=z({params:{page:1,page_size:10,keyword:"",active:-1},fetchFn:W});return(e,f)=>{let g=b.ZP,m=u.Z,_=r.Z,w=n.ZP,x=i.Z,y=s.Z,k=t.Z;return(0,d.wg)(),(0,d.iD)("div",T,[(0,d._)("div",j,[f[4]||(f[4]=(0,d._)("div",{class:"bt-title mb-0px!"},"Send API",-1)),(0,d._)("div",I,[(0,d.Wm)(g,{type:"primary",ghost:""},{default:(0,d.w5)(()=>f[2]||(f[2]=[(0,d.Uk)("刷新数据")])),_:1,__:[2]}),(0,d.Wm)(g,{type:"primary"},{default:(0,d.w5)(()=>f[3]||(f[3]=[(0,d.Uk)("新建API")])),_:1,__:[3]})])]),(0,d.Wm)(w,{class:"mb-24px","content-style":{padding:"16px 24px"}},{default:(0,d.w5)(()=>[(0,d._)("div",$,[(0,d._)("div",R,[f[5]||(f[5]=(0,d._)("span",{class:"text-default"},"时间范围：",-1)),(0,d.Wm)(h)]),(0,d._)("div",D,[f[6]||(f[6]=(0,d._)("span",{class:"text-default"},"状态：",-1)),(0,d._)("div",F,[(0,d.Wm)(m,{value:(0,d.SU)(o).active,"onUpdate:value":f[0]||(f[0]=e=>(0,d.SU)(o).active=e),options:a},null,8,["value"])])]),(0,d._)("div",P,[f[7]||(f[7]=(0,d._)("span",{class:"text-default"},"搜索：",-1)),(0,d._)("div",q,[(0,d.Wm)(_,{value:(0,d.SU)(o).keyword,"onUpdate:value":f[1]||(f[1]=e=>(0,d.SU)(o).keyword=e),placeholder:"请输入API名称"},null,8,["value"])])]),(0,d._)("div",null,[(0,d.Wm)(g,{type:"primary",ghost:""},{default:(0,d.w5)(()=>f[8]||(f[8]=[(0,d.Uk)("搜索")])),_:1,__:[8]})])])]),_:1}),(0,d.Wm)(U),(0,d.Wm)(k,null,{table:(0,d.w5)(()=>[(0,d.Wm)(x,(0,d.dG)((0,d.SU)(p),{columns:(0,d.SU)(l)}),null,16,["columns"])]),pageRight:(0,d.w5)(()=>[(0,d.Wm)(y,(0,d.dG)((0,d.SU)(c),{onRefresh:(0,d.SU)(v)}),null,16,["onRefresh"])]),_:1})])}}})}}]);