"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["8364"],{25464:function(e,t,a){a.d(t,{Au:()=>m,Fj:()=>o,LC:()=>s,Lb:()=>w,OV:()=>u,dj:()=>r,gK:()=>d,i7:()=>i,rU:()=>_,v1:()=>c,xh:()=>f,yW:()=>p});var l=a(86244);let{t:n}=a(77527).Z.global,i=e=>l.e.get("/domains/list",{params:e}),s=()=>l.e.get("/domains/all"),o=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:n("domain.api.loading.creating"),successMessage:!0}}),d=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:n("domain.api.loading.updating"),successMessage:!0}}),r=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:n("domain.api.loading.deleting"),successMessage:!0}}),u=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:n("domain.api.loading.settingSSL"),successMessage:!0}}),m=e=>l.e.get("/domains/get_ssl",{params:e}),c=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:n("domain.api.loading.refreshingDns"),successMessage:!0}}),p=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:n("domain.api.loading.applyingCert"),successMessage:!0}}),f=e=>l.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}}),_=e=>l.e.post("/askai/project/create",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}}),w=()=>l.e.post("/askai/supplier/status")},93208:function(e,t,a){a.d(t,{F:()=>s});var l=a(43407),n=a(267),i=a(77527);let s=()=>{let{t:e}=i.Z.global,{copy:t,isSupported:a,copied:s}=(0,n.VPI)({legacy:!0});return{copied:s,copyText:async n=>{if(!n)return void l.v0.error(e("common.useCopy.noText"));a.value?(await t(n),l.v0.success(e("common.useCopy.success"))):l.v0.error(e("common.useCopy.failed"))}}}},3449:function(e,t,a){a.d(t,{Z:()=>s});var l=a(33),n=a(43407),i=a(25595);let s=e=>{let{fetchFn:t,params:a,loading:s=!1,immediate:o=!1}=e,d=(0,i.iH)(s),r=(0,i.iH)([]),u=(0,i.iH)(0),m=(0,i.iH)(a),c=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e&&(a.page=1),t){d.value=!0;try{let e=await t(m.value);(0,n.Kn)(e)&&(r.value=(0,n.kJ)(e.list)?e.list:[],u.value=(0,l.Z)(e.total)?e.total:0)}finally{d.value=!1}}};return o&&c(),{loading:d,tableList:r,tableTotal:u,tableParams:m,getTableData:c}}},16821:function(e,t,a){a.d(t,{d:()=>s});var l=a(25595),n=a(30295);let i=Symbol("MODAL_INJECT"),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:t={},component:a,onCancel:s,onConfirm:o}=e,d=(0,l.qj)({});return a?[(0,l.aZ)({setup(n,s){let{attrs:o,slots:r}=s;return(0,l.JJ)(i,{state:t,options:e,extendApi:e=>{Object.setPrototypeOf(d,e)},setState:e=>{Object.assign(t,e)}}),()=>(0,l.h)(a,{...n,...o},r)}}),d]:[(0,l.aZ)({setup(t,a){let{attrs:r,slots:u}=a,m=(0,l.f3)(i),c=(0,l.iH)(!1);return d.open=()=>{var t;c.value=!0,null==(t=e.onChangeState)||t.call(e,c.value)},d.close=()=>{c.value=!1},d.setState=t=>{var a;null==m||m.setState(t),null==(a=e.onChangeState)||a.call(e,c.value)},d.getState=()=>(null==m?void 0:m.state)??{},null==m||m.extendApi(d),()=>(0,l.Wm)(n.Z,(0,l.dG)({show:c.value},t,r,{onCancel:s,onConfirm:o,"onUpdate:show":e=>{c.value=e??!1}}),u)}}),d]}},65528:function(e,t,a){a.d(t,{Z:()=>s});var l=a(99833),n=a(25595);let i={class:"mr-4px"},s=(0,n.aZ)({__name:"index",props:{href:{type:String,default:""},text:{type:String,default:""}},setup(e){let t=()=>{window.open(e.href)};return(a,s)=>{let o=l.ZP;return(0,n.wg)(),(0,n.j4)(o,{text:"",onClick:t},{default:(0,n.w5)(()=>[(0,n._)("span",i,(0,n.zw)(e.text||a.$t("common.actions.help")),1),s[0]||(s[0]=(0,n._)("i",{class:"i-custom:help text-primary"},null,-1))]),_:1,__:[0]})}}})},22851:function(e,t,a){a.d(t,{Z:()=>o});var l=a(69820),n=a(99833),i=a(25595);let s={class:"leading-22px text-13px text-desc text-center"},o=(0,i.aZ)({__name:"index",setup(e){let t=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},a=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,o)=>{let d=n.ZP,r=(0,i.up)("i18n-t"),u=l.Z;return(0,i.wg)(),(0,i.j4)(u,null,{default:(0,i.w5)(()=>[(0,i._)("div",s,[(0,i.Wm)(r,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,i.w5)(()=>[(0,i.Wm)(d,{class:"text-13px",type:"primary",text:"",onClick:t},{default:(0,i.w5)(()=>o[0]||(o[0]=[(0,i._)("span",null,"Issues",-1),(0,i._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[0]})]),star:(0,i.w5)(()=>[(0,i.Wm)(d,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,i.w5)(()=>o[1]||(o[1]=[(0,i.Uk)(" Star "),(0,i._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[1]})]),_:1}),o[2]||(o[2]=(0,i._)("br",null,null,-1)),(0,i._)("span",null,(0,i.zw)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},25322:function(e,t,a){a.d(t,{Z:()=>i});var l=a(44971),n=a(25595);let i=(0,n.aZ)({__name:"index",setup(e){let t=!!(0,n.Rr)().toolsLeft,a=!!(0,n.Rr)().toolsRight,i=!!(0,n.Rr)().pageLeft||!!(0,n.Rr)().pageRight;return(e,s)=>{let o=l.Z;return(0,n.wg)(),(0,n.iD)("div",null,[t||a?((0,n.wg)(),(0,n.j4)(o,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,n.w5)(()=>[(0,n.Wm)(o,{class:"items-center",size:12},{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"toolsLeft")]),_:3}),(0,n.Wm)(o,{class:"items-center",size:12},{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,n.kq)("",!0),(0,n.WI)(e.$slots,"table"),(0,n.SU)(i)?((0,n.wg)(),(0,n.j4)(o,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,n.w5)(()=>[(0,n._)("div",null,[(0,n.WI)(e.$slots,"pageLeft")]),(0,n.Wm)(o,null,{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,n.kq)("",!0),(0,n.WI)(e.$slots,"modal")])}}})},18296:function(e,t,a){a.d(t,{Z:()=>i});var l=a(25595);let n={class:"bt-tips flex flex-col gap-4px list-outside list-disc leading-20px text-[#777]"},i=(0,a(83744).default)({},[["render",function(e,t){return(0,l.wg)(),(0,l.iD)("ul",n,[(0,l.WI)(e.$slots,"default",{},void 0,!0)])}],["__scopeId","data-v-8731a1b4"]])},21921:function(e,t,a){a.d(t,{Z:()=>i});var l=a(72281),n=a(25595);let i=(0,n.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:a}=t,i=(0,n.iH)(null);return a({validate:()=>{var e;return null==(e=i.value)?void 0:e.validate()},restoreValidation:()=>{var e;return null==(e=i.value)?void 0:e.restoreValidation()}}),(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,(0,n.dG)(e.$attrs,{ref_key:"formRef",ref:i,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,n.w5)(()=>[(0,n.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},80837:function(e,t,a){a.d(t,{Z:()=>o});var l=a(51559),n=a(25595),i=a(43407);let s={class:"ml-8px text-14px"},o=(0,n.aZ)({__name:"index",props:(0,n.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,n.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:a}=t,o=(0,n.Fl)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),d=(0,n.tT)(e,"page"),r=(0,n.tT)(e,"pageSize"),u=t=>{var l;null==(l=e.onUpdatePage)||l.call(e,t),a("refresh")},m=t=>{var l;d.value=1,null==(l=e.onUpdatePage)||l.call(e,1),c(t),a("refresh")},c=e=>{o.value&&(0,i.qQ)(o.value,String(e))};if(o.value){let e=(0,i.$o)(o.value);e&&(r.value=(0,i.Dx)(e))}return(e,t)=>{let a=l.Z;return(0,n.wg)(),(0,n.j4)(a,(0,n.dG)(e.$attrs,{page:d.value,"onUpdate:page":[t[0]||(t[0]=e=>d.value=e),u],"page-size":r.value,"onUpdate:pageSize":[t[1]||(t[1]=e=>r.value=e),m],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,n.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,n.w5)(e=>{let{itemCount:t}=e;return[(0,n._)("span",s," Total "+(0,n.zw)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},80831:function(e,t,a){a.d(t,{Z:()=>p});var l=a(24950),n=a(64657),i=a(25595),s=a(18106),o=a(86695),d=a(86244),r=a(43407),u=a(23865);let m={class:"flex justify-start gap-2.5 bg-transparent items-center"},c={class:"flex items-center text-4"},p=(0,i.aZ)({__name:"WaitAndCheckDomainStatus",setup(e,t){let{expose:a}=t,{t:p}=(0,u.QT)(),f=(0,i.iH)(!1),_=(0,o.s6)(),w=(0,i.iH)();function v(){f.value=!1}function g(e,t){let a=setInterval(async()=>{await h(e)&&(r.v0.success(p("domain.waitAndCheckDomainStatus.success")),t&&t(),v(),clearInterval(a),w.value.open())},1e3)}async function h(e){try{if((await d.e.post("/askai/project/get_base_info",{domain:e})).update_time)return!0;return!1}catch(e){return console.warn(e),r.v0.error(p("domain.waitAndCheckDomainStatus.error")),!1}}return a({open:function(e,t){g(e,t),_.domainSource=e,f.value=!0},close:v,checkStatus:g}),(e,t)=>{let a=n.ZP,o=l.Z;return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(o,{show:(0,i.SU)(f),"onUpdate:show":t[0]||(t[0]=e=>(0,i.dq)(f)?f.value=e:null),"close-on-esc":!1,"mask-closable":!1},{default:(0,i.w5)(()=>[(0,i.Wm)(a,{style:{width:"auto"}},{default:(0,i.w5)(()=>[(0,i._)("div",m,[t[1]||(t[1]=(0,i._)("i",{class:"i-svg-spinners:bars-scale text-[var(--color-primary-1)] text-6"},null,-1)),(0,i._)("span",c,(0,i.zw)(e.$t("domain.waitAndCheckDomainStatus.loading")),1)])]),_:1})]),_:1},8,["show"]),(0,i.Wm)(s.Z,{ref_key:"createTplModal",ref:w,"only-ai":!0},null,512)],64)}}})},66740:function(e,t,a){a.r(t),a.d(t,{default:()=>eT});var l=a(25322),n=a(80837),i=a(19232),s=a(22851),o=a(65528),d=a(25595),r=a(99833),u=a(17127),m=a(44971),c=a(43407),p=a(16821),f=a(3449),_=a(25464),w=a(21921),v=a(28878),g=a(29403),h=a(46126),S=a(67905),y=a(34909),U=a(85068),x=a(87),b=a(18296),k=a(80831),W=a(85486),z=a(86695),Z=a(23865);let C={class:"pt-16px"},q={class:"flex items-center justify-start gap-1.25"},j={class:"text-error"},$={class:"w-100px ml-20px"},P={class:"flex justify-start items-center"},D={class:"w-100% flex justify-between items-center"},H={class:"mr-5"},T={class:"text-[#777] flex justify-start"},M={class:"w-100% flex flex-col gap-2.5"},I=["onClick"],F=(0,d.aZ)({__name:"DomainForm",setup(e){let{t}=(0,Z.QT)(),a=(0,d.iH)(!1),l=(0,d.iH)(),n=(0,d.Fl)(()=>a.value?t("domain.form.editTitle"):t("domain.form.addTitle")),i=(0,d.iH)(!1),s=(0,z.s6)(),o=(0,d.AE)("formRef"),u=(0,d.iH)(!1),m=(0,d.iH)(["https://"]),f=(0,d.qj)({domain:"",a_record:"",quota:5,quota_unit:"GB",mailboxes:50,email:""}),F=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],O={domain:{trigger:["blur","input"],validator:()=>""!==f.domain.trim()||Error(t("domain.form.validation.domainRequired"))}},R=(e,t)=>{switch(t){case"GB":return 1024*e*1048576;case"MB":return 1024*e*1024;default:return e}},A=e=>{let t=m.value[0].match(/http:\/\/?/g),a=m.value[0].match(/https:\/\/?/g);t&&(m.value[0]=t[0]+e),a&&(m.value[0]=a[0]+e),t||a||(m.value[0]="https://"+e)},B=e=>{m.value.splice(e,1)},[L,G]=(0,p.d)({onChangeState:async e=>{if(e){let e=G.getState();if(a.value=e.isEdit,i.value=(await (0,_.Lb)()).is_configured,e.row){let{row:t}=e;f.domain=t.domain,f.a_record=t.a_record;let a=(0,c.UO)(t.quota);f.quota=(0,c.Dx)(a.split(" ")[0]),f.quota_unit=a.split(" ")[1],f.mailboxes=t.mailboxes,f.email=t.email}}else f.domain="",f.a_record="",f.quota=5,f.quota_unit="GB",f.mailboxes=50,f.email="",m.value=["https://"]},onConfirm:async()=>{var e;await (null==(e=o.value)?void 0:e.validate()),a.value?await (0,_.gK)({domain:f.domain,quota:R(f.quota,f.quota_unit),mailboxes:f.mailboxes,email:f.email,urls:m.value}):(await (0,_.Fj)({domain:f.domain,quota:R(f.quota,f.quota_unit),mailboxes:f.mailboxes,email:f.email,urls:m.value,hasbrandinfo:Number(u.value)}),u.value?(await (0,_.rU)({domain:f.domain,urls:m.value}),l.value.open(f.domain),s.domainSource=f.domain):s.domainSource=""),G.getState().refresh()}});function K(){W.Z.push({name:"AiModel"})}return(e,s)=>{let c=b.Z,p=x.ZP,_=U.Z,W=y.ZP,z=S.Z,Z=h.Z,R=g.Z,G=r.ZP,E=v.Z,Q=w.Z;return(0,d.wg)(),(0,d.iD)(d.HY,null,[(0,d.Wm)((0,d.SU)(L),{title:(0,d.SU)(n),width:600},{default:(0,d.w5)(()=>[(0,d._)("div",C,[(0,d.Wm)(Q,{ref_key:"formRef",ref:o,model:(0,d.SU)(f),rules:O},{default:(0,d.w5)(()=>[(0,d.Wm)(W,{path:"domain"},{label:(0,d.w5)(()=>[(0,d._)("div",q,[(0,d._)("span",null,(0,d.zw)((0,d.SU)(t)("domain.form.domain")),1),(0,d.Wm)(p,{trigger:"hover"},{trigger:(0,d.w5)(()=>s[7]||(s[7]=[(0,d._)("i",{class:"i-custom:help text-primary cursor-pointer"},null,-1)])),default:(0,d.w5)(()=>[(0,d.Wm)(c,null,{default:(0,d.w5)(()=>[(0,d._)("li",j,(0,d.zw)((0,d.SU)(t)("domain.form.tips.aRecordFailed")),1),(0,d._)("li",null,(0,d.zw)((0,d.SU)(t)("domain.form.tips.dnsSetup")),1),(0,d._)("li",null,(0,d.zw)((0,d.SU)(t)("domain.form.tips.cloudflare")),1)]),_:1})]),_:1})])]),default:(0,d.w5)(()=>[(0,d.Wm)(_,{value:(0,d.SU)(f).domain,"onUpdate:value":[s[0]||(s[0]=e=>(0,d.SU)(f).domain=e),A],disabled:(0,d.SU)(a),placeholder:(0,d.SU)(t)("domain.form.domainPlaceholder")},null,8,["value","disabled","placeholder"])]),_:1}),(0,d.kq)("",!0),(0,d.Wm)(W,{label:(0,d.SU)(t)("domain.form.quota")},{default:(0,d.w5)(()=>[(0,d.Wm)(z,{value:(0,d.SU)(f).quota,"onUpdate:value":s[2]||(s[2]=e=>(0,d.SU)(f).quota=e),class:"flex-1",min:0,"show-button":!1},null,8,["value"]),(0,d._)("div",$,[(0,d.Wm)(Z,{value:(0,d.SU)(f).quota_unit,"onUpdate:value":s[3]||(s[3]=e=>(0,d.SU)(f).quota_unit=e),options:F},null,8,["value"])])]),_:1},8,["label"]),(0,d.Wm)(W,{label:(0,d.SU)(t)("domain.form.mailboxCount")},{default:(0,d.w5)(()=>[(0,d.Wm)(z,{value:(0,d.SU)(f).mailboxes,"onUpdate:value":s[4]||(s[4]=e=>(0,d.SU)(f).mailboxes=e),class:"flex-1",min:0,"show-button":!1},null,8,["value"])]),_:1},8,["label"]),(0,d.Wm)(W,{label:(0,d.SU)(t)("domain.form.globalCatch")},{default:(0,d.w5)(()=>[(0,d.Wm)(_,{value:(0,d.SU)(f).email,"onUpdate:value":s[5]||(s[5]=e=>(0,d.SU)(f).email=e),placeholder:(0,d.SU)(t)("domain.form.globalCatchPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,d.Wm)(W,null,{label:(0,d.w5)(()=>[(0,d._)("div",P,[s[8]||(s[8]=(0,d._)("i",{class:"i-domain:brand-info w-5 h-5 mr-1.25"},null,-1)),(0,d._)("span",null,(0,d.zw)(e.$t("domain.form.createBrandInfo")),1)])]),default:(0,d.w5)(()=>[(0,d.Wm)(R,{value:(0,d.SU)(u),"onUpdate:value":s[6]||(s[6]=e=>(0,d.dq)(u)?u.value=e:null),disabled:!(0,d.SU)(i)},null,8,["value","disabled"])]),_:1}),(0,d.SU)(i)?(0,d.kq)("",!0):((0,d.wg)(),(0,d.j4)(E,{key:1,style:{margin:"0 0 15px 0"},type:"warning","show-icon":!1},{default:(0,d.w5)(()=>[(0,d._)("div",D,[(0,d._)("span",H,(0,d.zw)(e.$t("domain.form.modelNotice")),1),(0,d.Wm)(G,{type:"primary",onClick:K},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("domain.form.integrateImmediately")),1)]),_:1})])]),_:1})),(0,d._)("div",T,[s[9]||(s[9]=(0,d._)("span",null,[(0,d._)("i",{class:"i-domain:brand-info w-5 h-5 mr-1.25"})],-1)),(0,d._)("span",null,(0,d.zw)(e.$t("domain.form.modelDescription")),1)]),(0,d.Wm)(c,{style:{"margin-bottom":"15px"}},{default:(0,d.w5)(()=>[(0,d._)("li",null,(0,d.zw)(e.$t("domain.form.extractBrand")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.form.analyzeStructure")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.form.importContent")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.form.customLogo")),1)]),_:1}),(0,d.Wm)(W,{label:e.$t("domain.form.specifyDomain")},{default:(0,d.w5)(()=>[(0,d._)("div",M,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)((0,d.SU)(m),(e,a)=>((0,d.wg)(),(0,d.iD)("div",{key:a,class:"flex justify-start items-center gap-2.5"},[(0,d.Wm)(_,{value:(0,d.SU)(m)[a],"onUpdate:value":e=>(0,d.SU)(m)[a]=e,placeholder:(0,d.SU)(t)("domain.form.urlsPlacement"),disabled:!(0,d.SU)(i)},null,8,["value","onUpdate:value","placeholder","disabled"]),0!=a?((0,d.wg)(),(0,d.iD)("div",{key:0,class:"close",onClick:e=>B(a)},s[10]||(s[10]=[(0,d._)("i",{class:"i-material-symbols:close-rounded text-5"},null,-1)]),8,I)):(0,d.kq)("",!0)]))),128))])]),_:1},8,["label"])]),_:1},8,["model"])])]),_:1},8,["title"]),(0,d.Wm)(k.Z,{ref_key:"waitAndCheckDomainStatusRef",ref:l},null,512)],64)}}});var O=a(83744);let R=(0,O.default)(F,[["__scopeId","data-v-29d787c6"]]);var A=a(45129);let B=(0,d.aZ)({__name:"index",props:{value:{},valueModifiers:{}},emits:["update:value"],setup(e){let t=(0,d.tT)(e,"value");return(e,a)=>{let l=A.Z;return(0,d.wg)(),(0,d.j4)(l,{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),class:"bt-tabs h-full",type:"card",placement:"top"},{default:(0,d.w5)(()=>[(0,d.WI)(e.$slots,"default")]),_:3},8,["value"])}}}),L=(0,O.default)(B,[["__scopeId","data-v-53057eda"]]);var G=a(57923),K=a(20993);let E={class:"ssl-cert-container"},Q={class:"brand-info"},V={class:"info-label"},J={class:"info-value"},X={class:"info-label"},Y={class:"info-value font-normal!"},N={class:"cert-content"},ee={class:"cert-section"},et={class:"section-title"},ea={class:"cert-section"},el={class:"section-title"},en={class:"cert-actions"},ei=(0,d.aZ)({__name:"OtherCert",props:{domain:{type:Object,required:!0},refresh:{type:Function,required:!0}},setup(e){let t=(0,d.iH)(!1),a=(0,d.iH)({subject:"",issuer:"",not_before:"",not_after:"",dns:[],endtime:0,key_pem:"",cert_pem:""}),l=(0,d.Fl)(()=>a.value.dns||[]),n=async()=>{try{t.value=!0;let l=await (0,_.Au)({domain:e.domain.domain});(0,c.Kn)(l)&&(a.value=l)}finally{t.value=!1}},i=async()=>{await (0,_.OV)({domain:e.domain.domain,key:a.value.key_pem,certificate:a.value.cert_pem}),n(),e.refresh()},s=async()=>{await (0,_.yW)({domain:e.domain.domain}),n(),e.refresh()};return a.value=e.domain.cert_info,(e,n)=>{let o=u.ZP,m=v.Z,c=U.Z,p=r.ZP,f=K.Z,_=b.Z;return(0,d.wg)(),(0,d.iD)("div",E,[(0,d.Wm)(f,{show:(0,d.SU)(t)},{default:(0,d.w5)(()=>[(0,d.SU)(a).endtime>0?((0,d.wg)(),(0,d.j4)(m,{key:0,class:"mb-16px",type:"success","show-icon":!1},{default:(0,d.w5)(()=>[(0,d._)("div",Q,[(0,d._)("div",V,(0,d.zw)(e.$t("domain.ssl.cert.brand"))+"：",1),(0,d._)("div",J,(0,d.zw)((0,d.SU)(a).issuer),1),(0,d._)("div",X,(0,d.zw)(e.$t("domain.ssl.cert.domains"))+"：",1),(0,d._)("div",Y,[((0,d.wg)(!0),(0,d.iD)(d.HY,null,(0,d.Ko)((0,d.SU)(l),(e,t)=>((0,d.wg)(),(0,d.j4)(o,{key:t,size:"small"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e),1)]),_:2},1024))),128))])])]),_:1})):(0,d.kq)("",!0),(0,d._)("div",N,[(0,d._)("div",ee,[(0,d._)("div",et,(0,d.zw)(e.$t("domain.ssl.cert.privateKey")),1),(0,d.Wm)(c,{value:(0,d.SU)(a).key_pem,"onUpdate:value":n[0]||(n[0]=e=>(0,d.SU)(a).key_pem=e),type:"textarea",placeholder:e.$t("domain.ssl.cert.keyPlaceholder"),rows:14,"input-props":{spellcheck:!1}},null,8,["value","placeholder"])]),(0,d._)("div",ea,[(0,d._)("div",el,(0,d.zw)(e.$t("domain.ssl.cert.certificate")),1),(0,d.Wm)(c,{value:(0,d.SU)(a).cert_pem,"onUpdate:value":n[1]||(n[1]=e=>(0,d.SU)(a).cert_pem=e),type:"textarea",placeholder:e.$t("domain.ssl.cert.certPlaceholder"),"input-props":{spellcheck:!1},rows:14},null,8,["value","placeholder"])])]),(0,d._)("div",en,[(0,d.Wm)(p,{type:"primary",onClick:i},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("common.actions.save")),1)]),_:1}),(0,d.Wm)(p,{type:"primary",onClick:s},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)(e.$t("domain.ssl.actions.applyFree")),1)]),_:1})])]),_:1},8,["show"]),(0,d.Wm)(_,null,{default:(0,d.w5)(()=>[(0,d._)("li",null,(0,d.zw)(e.$t("domain.ssl.tips.paste")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.ssl.tips.chainCheck")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.ssl.tips.pemFormat")),1),(0,d._)("li",null,(0,d.zw)(e.$t("domain.ssl.tips.defaultSite")),1)]),_:1})])}}}),es=(0,O.default)(ei,[["__scopeId","data-v-bd7d6d60"]]),eo=(0,d.aZ)({__name:"index",setup(e){let t=(0,d.iH)("other"),a=(0,d.iH)(null),[l,n]=(0,p.d)({onChangeState:e=>{if(e){let{row:e}=n.getState();e&&(a.value=e)}}}),i=()=>{n.getState().refresh()};return(e,n)=>{let s=G.Z;return(0,d.wg)(),(0,d.j4)((0,d.SU)(l),{title:e.$t("domain.ssl.title"),width:650,footer:!1},{default:(0,d.w5)(()=>[(0,d.Wm)(L,{value:(0,d.SU)(t),"onUpdate:value":n[0]||(n[0]=e=>(0,d.dq)(t)?t.value=e:null)},{default:(0,d.w5)(()=>[(0,d.Wm)(s,{name:"other",tab:e.$t("domain.ssl.tabs.otherCertificate")},{default:(0,d.w5)(()=>[(0,d.SU)(a)?((0,d.wg)(),(0,d.j4)(es,{key:0,domain:(0,d.SU)(a),refresh:i},null,8,["domain"])):(0,d.kq)("",!0)]),_:1},8,["tab"])]),_:1},8,["value"])]),_:1},8,["title"])}}});var ed=a(44369),er=a(30105),eu=a(12021),em=a(4520),ec=a(97006),ep=a(93208);let ef={class:"record-title"},e_={width:"140"},ew={width:"160"},ev={class:"record-title"},eg={class:"record-desc"},eh={width:"140"},eS={width:"160"},ey={class:"record-title"},eU={class:"record-desc"},ex={width:"140"},eb={width:"160"},ek={class:"record-title"},eW={class:"record-desc"},ez={class:"record-desc"},eZ={class:"flex justify-center mt-24px"},eC=(0,d.aZ)({__name:"DomainDns",setup(e){let{t}=(0,Z.QT)(),{copyText:a}=(0,ep.F)(),l=(0,d.iH)([]),n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return l.value.length>0?l.value[0].dns_records[e][t]:""},s=(0,d.Fl)(()=>n("dkim")),o=(0,d.Fl)(()=>n("a")),u=(0,d.Fl)(()=>n("a","host")),m=(0,d.Fl)(()=>n("mx")),f=(0,d.Fl)(()=>n("mx","host")),w=(0,d.Fl)(()=>n("dmarc")),v=(0,d.Fl)(()=>n("spf")),g=e=>{let{status:a}=e;return(0,d.Wm)("div",{class:["inline-flex items-center",a?"text-primary":"text-error"]},[(0,d.Wm)(eu.g,{size:"16"},{default:()=>[a?(0,d.Wm)(em.Z,null,null):(0,d.Wm)(ec.Z,null,null)]}),(0,d.Wm)("span",{class:"ml-4px"},[a?t("domain.dns.status.ok"):t("domain.dns.status.notSet")])])},h=(0,d.iH)([{key:"domain",title:t("domain.dns.columns.domain"),width:"20%",ellipsis:{tooltip:!0}},{key:"mx",title:"MX",render:e=>{let t=e.dns_records.mx;return(0,d.Wm)(g,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"a",title:"A record",render:e=>{let t=e.dns_records.a;return(0,d.Wm)(g,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"spf",title:"SPF",render:e=>{let t=e.dns_records.spf;return(0,d.Wm)(g,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"dkim",title:"DKIM",render:e=>{let t=e.dns_records.dkim;return(0,d.Wm)(g,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"dmarc",title:"DMARC",render:e=>{let t=e.dns_records.dmarc;return(0,d.Wm)(g,{status:(null==t?void 0:t.valid)||!1},null)}},{key:"ptr",title:"PTR",render:e=>{let t=e.dns_records.ptr;return(0,d.Wm)(g,{status:(null==t?void 0:t.valid)||!1},null)}}]),S=async()=>{let e=await (0,_.v1)({domain:l.value[0].domain});(0,c.Kn)(e)&&(l.value[0].dns_records=e);let{refresh:t}=U.getState();t()},[y,U]=(0,p.d)({onChangeState:e=>{if(e){let{row:e}=U.getState();e&&(l.value=[e])}}});return(e,n)=>{let c=i.Z,p=er.Z,_=ed.ZP,g=r.ZP;return(0,d.wg)(),(0,d.j4)((0,d.SU)(y),{title:(0,d.SU)(t)("domain.dns.title"),width:750,footer:!1},{default:(0,d.w5)(()=>[(0,d._)("div",null,[(0,d.Wm)(c,{size:"small",class:"mb-20px",data:(0,d.SU)(l),columns:(0,d.SU)(h)},null,8,["data","columns"]),(0,d._)("div",ef,(0,d.zw)((0,d.SU)(t)("domain.dns.step1.title")),1),(0,d.Wm)(p,{size:"small",class:"mb-24px"},{default:(0,d.w5)(()=>[(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",e_,(0,d.zw)((0,d.SU)(t)("domain.dns.table.recordType")),1),(0,d._)("th",ew,(0,d.zw)((0,d.SU)(t)("domain.dns.table.host")),1),(0,d._)("th",null,(0,d.zw)((0,d.SU)(t)("domain.dns.table.value")),1)])]),(0,d._)("tbody",null,[(0,d._)("tr",null,[n[3]||(n[3]=(0,d._)("td",null,"A",-1)),(0,d._)("td",null,(0,d.zw)((0,d.SU)(u)),1),(0,d._)("td",null,(0,d.zw)((0,d.SU)(o)),1)])])]),_:1}),(0,d._)("div",ev,(0,d.zw)((0,d.SU)(t)("domain.dns.step2.title")),1),(0,d._)("div",eg,(0,d.zw)((0,d.SU)(t)("domain.dns.step2.description")),1),(0,d.Wm)(p,{size:"small",class:"mb-24px"},{default:(0,d.w5)(()=>[(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",eh,(0,d.zw)((0,d.SU)(t)("domain.dns.table.recordType")),1),(0,d._)("th",eS,(0,d.zw)((0,d.SU)(t)("domain.dns.table.host")),1),(0,d._)("th",null,(0,d.zw)((0,d.SU)(t)("domain.dns.table.value")),1),(0,d._)("th",null,(0,d.zw)((0,d.SU)(t)("domain.dns.table.mxPriority")),1)])]),(0,d._)("tbody",null,[(0,d._)("tr",null,[n[4]||(n[4]=(0,d._)("td",null,"MX",-1)),(0,d._)("td",null,(0,d.zw)((0,d.SU)(f)),1),(0,d._)("td",null,(0,d.zw)((0,d.SU)(m)),1),n[5]||(n[5]=(0,d._)("td",null,"10",-1))])])]),_:1}),(0,d._)("div",ey,(0,d.zw)((0,d.SU)(t)("domain.dns.step3.title")),1),(0,d._)("div",eU,(0,d.zw)((0,d.SU)(t)("domain.dns.step3.description")),1),(0,d.Wm)(p,{size:"small",class:"mb-24px"},{default:(0,d.w5)(()=>[(0,d._)("thead",null,[(0,d._)("tr",null,[(0,d._)("th",ex,(0,d.zw)((0,d.SU)(t)("domain.dns.table.recordType")),1),(0,d._)("th",eb,(0,d.zw)((0,d.SU)(t)("domain.dns.table.host")),1),(0,d._)("th",null,(0,d.zw)((0,d.SU)(t)("domain.dns.table.value")),1)])]),(0,d._)("tbody",null,[(0,d._)("tr",null,[n[6]||(n[6]=(0,d._)("td",null,"TXT",-1)),n[7]||(n[7]=(0,d._)("td",null,"@",-1)),(0,d._)("td",null,[(0,d.Wm)(_,{class:"mr-4px max-w-320px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(v)),1)]),_:1}),(0,d.Wm)(g,{text:"",type:"primary",onClick:n[0]||(n[0]=()=>(0,d.SU)(a)((0,d.SU)(v)))},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(t)("common.actions.copy")),1)]),_:1})])]),(0,d._)("tr",null,[n[8]||(n[8]=(0,d._)("td",null,"TXT",-1)),n[9]||(n[9]=(0,d._)("td",null,"default._domainkey",-1)),(0,d._)("td",null,[(0,d.Wm)(_,{class:"mr-4px max-w-320px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(s)||"--"),1)]),_:1}),(0,d.SU)(s)?((0,d.wg)(),(0,d.j4)(g,{key:0,text:"",type:"primary",onClick:n[1]||(n[1]=()=>(0,d.SU)(a)((0,d.SU)(s)))},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(t)("common.actions.copy")),1)]),_:1})):(0,d.kq)("",!0)])]),(0,d._)("tr",null,[n[10]||(n[10]=(0,d._)("td",null,"TXT",-1)),n[11]||(n[11]=(0,d._)("td",null,"_dmarc",-1)),(0,d._)("td",null,[(0,d.Wm)(_,{class:"mr-4px max-w-320px!"},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(w)),1)]),_:1}),(0,d.SU)(w)?((0,d.wg)(),(0,d.j4)(g,{key:0,text:"",type:"primary",onClick:n[2]||(n[2]=()=>(0,d.SU)(a)((0,d.SU)(w)))},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(t)("common.actions.copy")),1)]),_:1})):(0,d.kq)("",!0)])])])]),_:1}),(0,d._)("div",ek,(0,d.zw)((0,d.SU)(t)("domain.dns.step4.title")),1),(0,d._)("div",eW,(0,d.zw)((0,d.SU)(t)("domain.dns.step4.description1")),1),(0,d._)("div",ez,(0,d.zw)((0,d.SU)(t)("domain.dns.step4.description2")),1)]),(0,d._)("div",eZ,[(0,d.Wm)(g,{type:"primary",onClick:S},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(t)("domain.dns.verify")),1)]),_:1})])]),_:1},8,["title"])}}}),eq=(0,O.default)(eC,[["__scopeId","data-v-8094e116"]]);var ej=a(29938);let e$={class:"p-24px"},eP={class:"bt-title"};function eD(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,d.lA)(e)}let eH=(0,d.aZ)({__name:"index",setup(e){let{t}=(0,Z.QT)(),{tableParams:a,tableList:w,loading:v,tableTotal:g,getTableData:h}=(0,f.Z)({immediate:!0,params:{page:1,page_size:10,keyword:""},fetchFn:_.i7}),S=(0,ej.tv)(),y=(0,ej.yj)(),U=(0,d.iH)([{key:"domain",title:t("domain.columns.domain"),minWidth:130,ellipsis:{tooltip:!0},render:e=>(0,d.Wm)(d.HY,null,[(0,d.Wm)("div",{class:"inline-flex items-center"},[1==e.hasbrandinfo&&(0,d.Wm)("i",{class:"i-domain:brand-info w-4 h-4 mr-1.25"},null),(0,d.Wm)(r.ZP,{text:!0,type:"primary",onClick:()=>D(e)},{default:()=>[e.domain]})]),e.default?(0,d.Wm)(u.ZP,{size:"small",class:"ml-8px",bordered:!1},{default:()=>[(0,d.Uk)("Default")]}):""])},{key:"quota",title:t("domain.columns.quota"),render:e=>(0,c.UO)(e.quota)},{key:"mailboxes",title:t("domain.columns.mailboxes")},{key:"mailbox_quota",title:t("domain.columns.defaultMailboxSize"),render:e=>(0,c.UO)(e.mailbox_quota)},{key:"ssl",title:"SSL",render:e=>{let a;if(e.cert_info&&e.cert_info.endtime){let a=Math.floor((1e3*e.cert_info.endtime-Date.now())/1e3/60/60/24);return(0,d.Wm)(r.ZP,{type:a<0?"error":"primary",text:!0,onClick:()=>{C(e)}},{default:()=>[a<0?t("domain.ssl.expired"):t("domain.ssl.daysLeft",{days:a})]})}return(0,d.Wm)(r.ZP,{type:"warning",text:!0,onClick:()=>{C(e)}},eD(a=t("domain.ssl.notSet"))?a:{default:()=>[a]})}},{title:t("domain.columns.actions"),key:"actions",align:"right",width:260,render:e=>{let a,l,n;return(0,d.Wm)(m.Z,{inline:!0},{default:()=>[(0,d.Wm)(r.ZP,{type:"primary",text:!0,onClick:()=>{$(e)}},eD(a=t("domain.actions.dnsRecord"))?a:{default:()=>[a]}),(0,d.Wm)(r.ZP,{type:"primary",text:!0,onClick:()=>{D(e)}},eD(l=t("common.actions.edit"))?l:{default:()=>[l]}),(0,d.Wm)(r.ZP,{type:"primary",text:!0,disabled:1===e.default,onClick:()=>{P(e)}},{default:()=>[(0,d.Uk)("Set Default")]}),(0,d.Wm)(r.ZP,{type:"error",text:!0,onClick:()=>{H(e)}},eD(n=t("common.actions.delete"))?n:{default:()=>[n]})]})}}]),[x,b]=(0,p.d)({component:R,state:{isEdit:!1,refresh:h}}),k=()=>{b.setState({row:null,isEdit:!1}),b.open()},[W,z]=(0,p.d)({component:eo,state:{refresh:h}}),C=e=>{z.setState({row:e}),z.open()},[q,j]=(0,p.d)({component:eq,state:{refresh:h}}),$=e=>{j.setState({row:e}),j.open()},P=e=>{(0,c.iG)({title:`Set Default [${e.domain}]`,content:"Are you sure to set this domain as default?",onConfirm:async()=>{await (0,_.xh)({domain:e.domain}),h()}})},D=e=>{S.push({name:"EditDomain",params:{domain:e.domain}})},H=e=>{(0,c.iG)({title:t("domain.delete.title"),content:t("domain.delete.confirm",{domain:e.domain}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,_.dj)({domain:e.domain}),h()}})},T=(0,d.iH)("");return(0,d.bv)(()=>{T.value=y.query.init,"init-domain"===T.value&&k()}),(e,u)=>{let m=o.Z,c=s.Z,p=i.Z,f=n.Z,_=l.Z;return(0,d.wg)(),(0,d.iD)("div",e$,[(0,d._)("div",eP,(0,d.zw)((0,d.SU)(t)("layout.menu.domain")),1),(0,d.Wm)(_,null,{toolsLeft:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(r.ZP),{type:"primary",onClick:k},{default:(0,d.w5)(()=>[(0,d.Uk)((0,d.zw)((0,d.SU)(t)("domain.addDomain")),1)]),_:1}),(0,d.Wm)(m,{href:"https://www.billionmail.com/start/domain.html",text:(0,d.SU)(t)("domain.help")},null,8,["text"])]),table:(0,d.w5)(()=>[(0,d.Wm)(p,{loading:(0,d.SU)(v),columns:(0,d.SU)(U),data:(0,d.SU)(w)},{empty:(0,d.w5)(()=>[(0,d.Wm)(c)]),_:1},8,["loading","columns","data"])]),pageRight:(0,d.w5)(()=>[(0,d.Wm)(f,{page:(0,d.SU)(a).page,"onUpdate:page":u[0]||(u[0]=e=>(0,d.SU)(a).page=e),"page-size":(0,d.SU)(a).page_size,"onUpdate:pageSize":u[1]||(u[1]=e=>(0,d.SU)(a).page_size=e),"item-count":(0,d.SU)(g),onRefresh:(0,d.SU)(h)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,d.w5)(()=>[(0,d.Wm)((0,d.SU)(x)),(0,d.Wm)((0,d.SU)(W)),(0,d.Wm)((0,d.SU)(q))]),_:1})])}}}),eT=(0,O.default)(eH,[["__scopeId","data-v-70f57330"]])}}]);