"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["5026"],{25464:function(e,a,t){t.d(a,{Au:()=>v,Fj:()=>n,LC:()=>o,Lb:()=>_,OV:()=>r,dj:()=>u,gK:()=>d,i7:()=>s,rU:()=>g,v1:()=>c,xh:()=>m,yW:()=>p});var l=t(86244);let{t:i}=t(77527).Z.global,s=e=>l.e.get("/domains/list",{params:e}),o=()=>l.e.get("/domains/all"),n=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),d=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),u=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),r=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),v=e=>l.e.get("/domains/get_ssl",{params:e}),c=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),p=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}}),m=e=>l.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}}),g=e=>l.e.post("/askai/project/create",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}}),_=()=>l.e.post("/askai/supplier/status")},15911:function(e,a,t){t.d(a,{AB:()=>u,CI:()=>n,Re:()=>r,a3:()=>p,cu:()=>d,de:()=>v,ou:()=>s,uJ:()=>o,v_:()=>c});var l=t(86244);let{t:i}=t(77527).Z.global,s=e=>l.e.get("/overview",{params:e}),o=e=>l.e.get("/overview/failed",{params:e}),n=()=>l.e.get("/postfix_queue/list"),d=e=>l.e.get("/postfix_queue/queue_info",{params:e}),u=e=>l.e.post("/postfix_queue/flush_by_id",e,{fetchOptions:{loading:i("overview.api.loading.resendQueue"),successMessage:!0}}),r=e=>l.e.post("/postfix_queue/delete_by_id",e,{fetchOptions:{loading:i("overview.api.loading.deleteQueue"),successMessage:!0}}),v=()=>l.e.get("/postfix_queue/get_config"),c=e=>l.e.post("/postfix_queue/set_all_config",e,{fetchOptions:{loading:i("overview.api.loading.setQueueConfig"),successMessage:!0}}),p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return l.e.post("/postfix_queue/delete",e,{fetchOptions:{loading:i("overview.api.loading.clearQueue"),successMessage:!0}})}},16821:function(e,a,t){t.d(a,{d:()=>o});var l=t(25595),i=t(30295);let s=Symbol("MODAL_INJECT"),o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:a={},component:t,onCancel:o,onConfirm:n}=e,d=(0,l.qj)({});return t?[(0,l.aZ)({setup(i,o){let{attrs:n,slots:u}=o;return(0,l.JJ)(s,{state:a,options:e,extendApi:e=>{Object.setPrototypeOf(d,e)},setState:e=>{Object.assign(a,e)}}),()=>(0,l.h)(t,{...i,...n},u)}}),d]:[(0,l.aZ)({setup(a,t){let{attrs:u,slots:r}=t,v=(0,l.f3)(s),c=(0,l.iH)(!1);return d.open=()=>{var a;c.value=!0,null==(a=e.onChangeState)||a.call(e,c.value)},d.close=()=>{c.value=!1},d.setState=a=>{var t;null==v||v.setState(a),null==(t=e.onChangeState)||t.call(e,c.value)},d.getState=()=>(null==v?void 0:v.state)??{},null==v||v.extendApi(d),()=>(0,l.Wm)(i.Z,(0,l.dG)({show:c.value},a,u,{onCancel:o,onConfirm:n,"onUpdate:show":e=>{c.value=e??!1}}),r)}}),d]}},64128:function(e,a,t){t.r(a),t.d(a,{default:()=>R});var l=t(64657),i=t(25595),s=t(66671),o=t(43407),n=t(16821),d=t(15911),u=t(90767),r=t(79380),v=t(66192),c=t(46126),p=t(44078),m=t(7360),g=t(53545),_=t(25464),f=t(23865);let w={class:"filter-bar"},y={class:"w-260px"},h={class:"date-filters"},b={class:"w-240px"},S=(0,i.aZ)({__name:"FilterBar",props:{domain:{},domainModifiers:{},dateRange:{},dateRangeModifiers:{}},emits:["update:domain","update:dateRange"],setup(e){let{t:a}=(0,f.QT)(),t=(0,i.tT)(e,"domain"),l=(0,i.tT)(e,"dateRange"),s=(0,i.iH)([{label:a("common.all.domain"),value:""}]),n=(0,i.iH)("today"),d=e=>{let a=new Date,t=(0,p.E)(a,-30);return(0,m.b)(t).getTime()>e||(0,g.i)(a).getTime()<e},S=e=>{switch(e){case"today":l.value=(0,o.wb)();break;case"yesterday":l.value=(0,o.wb)((0,p.E)(new Date,-1));break;case"last7days":l.value=U()}},U=()=>{let e=new Date,a=(0,g.i)(e);return[(0,m.b)((0,p.E)(e,-6)).getTime(),a.getTime()]},k=e=>{n.value="custom",l.value=[(0,m.b)(e[0]).getTime(),(0,g.i)(e[1]).getTime()]},D=async()=>{let e=await (0,_.LC)();(0,o.kJ)(e)&&(s.value=e.map(e=>({label:e.domain,value:e.domain})),s.value.unshift({label:a("common.all.domain"),value:""}))};return(0,i.bv)(()=>{D()}),(e,a)=>{let o=c.Z,p=v.Z,m=r.Z,g=u.Z;return(0,i.wg)(),(0,i.iD)("div",w,[(0,i._)("div",y,[(0,i.Wm)(o,{value:t.value,"onUpdate:value":a[0]||(a[0]=e=>t.value=e),options:(0,i.SU)(s)},null,8,["value","options"])]),(0,i._)("div",h,[(0,i.Wm)(m,{value:(0,i.SU)(n),"onUpdate:value":[a[1]||(a[1]=e=>(0,i.dq)(n)?n.value=e:null),S]},{default:(0,i.w5)(()=>[(0,i.Wm)(p,{value:"today"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.today")),1)]),_:1}),(0,i.Wm)(p,{value:"yesterday"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.yesterday")),1)]),_:1}),(0,i.Wm)(p,{value:"last7days"},{default:(0,i.w5)(()=>[(0,i.Uk)((0,i.zw)(e.$t("common.time.last7days")),1)]),_:1})]),_:1},8,["value"]),(0,i._)("div",b,[(0,i.Wm)(g,{value:l.value,type:"daterange","is-date-disabled":d,"onUpdate:value":k},null,8,["value"])])])])}}});var U=t(83744);let k=(0,U.default)(S,[["__scopeId","data-v-1552f451"]]);var D=t(90755),Z=t(8206),W=t(4819),M=t(44332),O=t(19232),q=t(44369);let T=(0,i.aZ)({__name:"SendFailDetails",setup(e){let{t:a}=(0,f.QT)(),t=(0,i.iH)(!1),l=(0,i.iH)([]),s=(0,i.iH)([{key:"recipient",title:a("overview.sendFailDetails.columns.recipient"),width:160,render:e=>(0,i.Wm)(q.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?999:1,tooltip:!1},{default:()=>[e.recipient]})},{key:"dsn",title:a("overview.sendFailDetails.columns.dsn"),width:60},{key:"delay",title:a("overview.sendFailDetails.columns.delay"),width:70},{key:"delays",title:a("overview.sendFailDetails.columns.delays"),width:150},{key:"status",title:a("overview.sendFailDetails.columns.status"),width:100,ellipsis:{tooltip:!0},render:e=>e.status},{key:"relay",title:a("overview.sendFailDetails.columns.relay"),width:200,render:e=>(0,i.Wm)(q.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.relay]})},{key:"description",title:a("overview.sendFailDetails.columns.details"),render:e=>(0,i.Wm)(q.ZP,{class:e.tooltip?"":"break-all!","line-clamp":e.tooltip?9999:1,tooltip:!1},{default:()=>[e.description]})}]),u=e=>({onMousemove:()=>{e.tooltip=!0},onMouseleave:()=>{e.tooltip=!1}}),r=async(e,a,i)=>{try{t.value=!0;let s=await (0,d.uJ)({domain:e,start_time:a/1e3,end_time:i/1e3});l.value=(0,o.kJ)(s)?s:[]}finally{t.value=!1}},[v,c]=(0,n.d)({onChangeState:e=>{if(e){let e=c.getState();r(e.domain,e.startTime,e.endTime)}else l.value=[]}});return(e,o)=>{let n=O.Z;return(0,i.wg)(),(0,i.j4)((0,i.SU)(v),{title:(0,i.SU)(a)("overview.sendFailDetails.title"),width:1e3,footer:!1},{default:(0,i.w5)(()=>[(0,i.Wm)(n,{loading:(0,i.SU)(t),"max-height":600,data:(0,i.SU)(l),columns:(0,i.SU)(s),"row-props":u},null,8,["loading","data","columns"])]),_:1},8,["title"])}}});var H=t(29938);let x={class:"email-analytics-container"},C={class:"bt-title"},F={class:"metrics-cards"},j={class:"detail-row"},J={class:"rate-charts-card"},Q=(0,i.aZ)({__name:"index",setup(e){let{t:a}=(0,f.QT)(),t=(0,i.iH)(""),u=(0,i.iH)((0,o.wb)()),r=(0,i.iH)([]),v=(0,i.qj)({delivery_rate:{label:a("overview.delivered"),value:0,unit:"%"},open_rate:{label:a("overview.opened"),value:0,unit:"%"},click_rate:{label:a("overview.clicked"),value:0,unit:"%"},bounce_rate:{label:a("overview.bounced"),value:0,unit:"%"}}),c=(0,i.iH)(0),p=(0,i.iH)({column_type:"hourly",dashboard:{delivered:0,delivery_rate:0,failed:0,failure_rate:0,sends:0},data:[]}),m=(0,i.iH)({column_type:"hourly",data:[]}),g=(0,i.iH)({column_type:"hourly",data:[]}),_=(0,i.iH)({column_type:"hourly",data:[]}),w=(0,H.tv)(),y=()=>{w.push("/overview/send-queue")},[h,b]=(0,n.d)({component:T}),S=()=>{b.setState({domain:t.value,startTime:u.value[0],endTime:u.value[1]}),b.open()},U=(0,s.DI)(q,300),O=e=>{Object.entries(e).forEach(e=>{let[a,t]=e;a in v&&(v[a].value=t)}),c.value=e.delayed_queue};async function q(){let e=await (0,d.ou)({domain:t.value,start_time:Math.floor(u.value[0]/1e3),end_time:Math.floor(u.value[1]/1e3)});(0,o.Kn)(e)&&(O(e.dashboard),r.value=(0,o.kJ)(e.mail_providers)?e.mail_providers:[],p.value=e.send_mail_chart,m.value=e.bounce_rate_chart,g.value=e.click_rate_chart,_.value=e.open_rate_chart)}return(0,i.bv)(()=>{q()}),(e,s)=>{let o=l.ZP;return(0,i.wg)(),(0,i.iD)("div",x,[(0,i._)("div",C,(0,i.zw)((0,i.SU)(a)("layout.menu.overview")),1),(0,i.Wm)(k,{domain:(0,i.SU)(t),"onUpdate:domain":[s[0]||(s[0]=e=>(0,i.dq)(t)?t.value=e:null),(0,i.SU)(U)],"date-range":(0,i.SU)(u),"onUpdate:dateRange":[s[1]||(s[1]=e=>(0,i.dq)(u)?u.value=e:null),(0,i.SU)(U)]},null,8,["domain","date-range","onUpdate:domain","onUpdate:dateRange"]),(0,i._)("div",F,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)((0,i.SU)(v),(e,a)=>((0,i.wg)(),(0,i.j4)(D.Z,{key:a,title:e.label,value:e.value,unit:e.unit},null,8,["title","value","unit"]))),128)),(0,i.Wm)(D.Z,{class:"cursor-pointer",title:e.$t("overview.delayedQueue"),value:(0,i.SU)(c),onClick:y},null,8,["title","value"])]),(0,i._)("div",j,[(0,i.Wm)(o,{class:"provider-table-card",title:e.$t("overview.mailProviders")},{default:(0,i.w5)(()=>[(0,i.Wm)(Z.Z,{value:(0,i.SU)(r),"onUpdate:value":s[2]||(s[2]=e=>(0,i.dq)(r)?r.value=e:null)},null,8,["value"])]),_:1},8,["title"]),(0,i.Wm)(o,{class:"send-today-card",title:e.$t("overview.sendStats")},{default:(0,i.w5)(()=>[(0,i.Wm)(W.Z,{data:(0,i.SU)(p),onShowFail:S},null,8,["data"])]),_:1},8,["title"])]),(0,i._)("div",J,[(0,i.Wm)(M.Z,{bounce:(0,i.SU)(m),click:(0,i.SU)(g),open:(0,i.SU)(_)},null,8,["bounce","click","open"])]),(0,i.Wm)((0,i.SU)(h))])}}}),R=(0,U.default)(Q,[["__scopeId","data-v-61806c8c"]])}}]);