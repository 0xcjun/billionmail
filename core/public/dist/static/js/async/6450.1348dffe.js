"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["6450"],{93953:function(e,t,l){l.d(t,{Z:()=>f});var a=l(65083),r=l(58786),n=l(56946),o=l(54470),i=l(51048),s=l(71309),u=l(60951),p=l(6445),c=l(73238);let g={name:"Flex",self:function(){return c.Z}},d=Object.assign(Object.assign({},n.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),f=(0,r.aZ)({name:"Flex",props:d,setup(e){let{mergedClsPrefixRef:t,mergedRtlRef:l}=(0,o.ZP)(e),u=(0,n.Z)("Flex","-flex",void 0,g,e,t);return{rtlEnabled:(0,i.V)("Flex",l,t),mergedClsPrefix:t,margin:(0,r.Fl)(()=>{let{size:t}=e;if(Array.isArray(t))return{horizontal:t[0],vertical:t[1]};if("number"==typeof t)return{horizontal:t,vertical:t};let{self:{[(0,s.Tl)("gap",t)]:l}}=u.value,{row:r,col:n}=(0,a.yU)(l);return{horizontal:(0,a.fQ)(n),vertical:(0,a.fQ)(r)}})}},render(){let{vertical:e,reverse:t,align:l,inline:a,justify:n,margin:o,wrap:i,mergedClsPrefix:s,rtlEnabled:c}=this,g=(0,u.x)((0,p.z)(this),!1);return g.length?(0,r.h)("div",{role:"none",class:[`${s}-flex`,c&&`${s}-flex--rtl`],style:{display:a?"inline-flex":"flex",flexDirection:e&&!t?"column":e&&t?"column-reverse":!e&&t?"row-reverse":"row",justifyContent:n,flexWrap:!i||e?"nowrap":"wrap",alignItems:l,gap:`${o.vertical}px ${o.horizontal}px`}},g):null}})},84075:function(e,t,l){l.d(t,{WH:()=>o,hI:()=>n,sS:()=>i,vi:()=>s});var a=l(34541);let{t:r}=l(76882).Z.global,n=e=>a.e.get("/contact/group/list",{params:e}),o=()=>a.e.get("/contact/group/all"),i=e=>a.e.post("/contact/group/create",e,{fetchOptions:{loading:r("contacts.group.loading.createGroup"),successMessage:!0}}),s=e=>a.e.post("/contact/group/contact_count",e)},39244:function(e,t,l){l.d(t,{Z:()=>n});var a=l(93953),r=l(58786);let n=(0,r.aZ)({__name:"index",setup(e){let t=!!(0,r.Rr)().toolsLeft,l=!!(0,r.Rr)().toolsRight,n=!!(0,r.Rr)().pageLeft||!!(0,r.Rr)().pageRight;return(e,o)=>{let i=a.Z;return(0,r.wg)(),(0,r.iD)("div",null,[t||l?((0,r.wg)(),(0,r.j4)(i,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,r.w5)(()=>[(0,r.Wm)(i,{class:"items-center",size:12},{default:(0,r.w5)(()=>[(0,r.WI)(e.$slots,"toolsLeft")]),_:3}),(0,r.Wm)(i,{class:"items-center",size:12},{default:(0,r.w5)(()=>[(0,r.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,r.kq)("",!0),(0,r.WI)(e.$slots,"table"),(0,r.SU)(n)?((0,r.wg)(),(0,r.j4)(i,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,r.w5)(()=>[(0,r._)("div",null,[(0,r.WI)(e.$slots,"pageLeft")]),(0,r.Wm)(i,null,{default:(0,r.w5)(()=>[(0,r.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,r.kq)("",!0),(0,r.WI)(e.$slots,"modal")])}}})},25170:function(e,t,l){l.d(t,{Z:()=>i});var a=l(75459),r=l(58786),n=l(68271);let o={class:"ml-8px text-14px"},i=(0,r.aZ)({__name:"index",props:(0,r.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,r.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,t){let{emit:l}=t,i=(0,r.Fl)(()=>{let{storeKey:t}=e;return t?`${t}-page`:""}),s=(0,r.tT)(e,"page"),u=(0,r.tT)(e,"pageSize"),p=e=>{s.value=e,l("refresh")},c=e=>{s.value=1,u.value=e,g(e),l("refresh")},g=e=>{i.value&&(0,n.qQ)(i.value,String(e))};if(i.value){let e=(0,n.$o)(i.value);e&&(u.value=(0,n.Dx)(e))}return(e,t)=>{let l=a.Z;return(0,r.wg)(),(0,r.j4)(l,(0,r.dG)(e.$attrs,{page:s.value,"onUpdate:page":[t[0]||(t[0]=e=>s.value=e),p],"page-size":u.value,"onUpdate:pageSize":[t[1]||(t[1]=e=>u.value=e),c],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,r.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,r.w5)(e=>{let{itemCount:t}=e;return[(0,r._)("span",o," Total "+(0,r.zw)(t),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},4973:function(e,t,l){l.r(t),l.d(t,{default:()=>h});var a=l(39244),r=l(25170),n=l(75754),o=l(58786),i=l(67655),s=l(53903),u=l(93953),p=l(68271),c=l(84075),g=l(22895);let d=e=>{let{params:t,fetchFn:l,useParams:a,loading:r=!0,immediate:n=!0,rowKey:i=e=>e.id}=e,s=(0,o.iH)(r),u=(0,o.iH)([]),c=(0,o.iH)(0),d=(0,o.iH)(t),f=(0,o.iH)([]),m=()=>a?a(d.value):d.value,v=(0,g.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(d.value.page=1),s.value=!0;try{let e=m(),t=await l(e);(0,p.Kn)(t)&&(u.value=(0,p.kJ)(t.list)?t.list:[],c.value=(0,p.hj)(t.total)?t.total:0)}finally{s.value=!1}},300),h=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return v(e)},y=e=>{f.value=e},w=e=>{d.value.page=e},k=e=>{d.value.page_size=e};return(0,o.bv)(()=>{n&&h()}),{tableData:u,tableTotal:c,tableKeys:f,fetchTable:h,resetTable:()=>h(!0),tableProps:(0,o.Fl)(()=>({rowKey:i,data:u.value,loading:s.value,checkedRowKeys:f.value,onUpdateCheckedRowKeys:y})),pageProps:(0,o.Fl)(()=>({page:d.value.page,pageSize:d.value.page_size,itemCount:c.value,onUpdatePage:w,onUpdatePageSize:k}))}};var f=l(52495),m=l(65965);function v(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,o.lA)(e)}let h=(0,o.aZ)({__name:"index",setup(e){let{t}=(0,f.QT)(),l=(0,m.tv)(),{tableProps:g,pageProps:h,fetchTable:y}=d({params:{page:1,page_size:10,keyword:""},fetchFn:c.hI}),w=(0,o.iH)([{type:"selection"},{key:"name",title:t("contacts.group.columns.name"),minWidth:120,render:e=>(0,o.Wm)(i.ZP,{text:!0,type:"primary",onClick:()=>{l.push({path:"/contacts/subscribers",state:{group_id:e.id}})}},{default:()=>[e.name]})},{key:"total_count",title:t("contacts.group.columns.subscribers"),minWidth:100,render:e=>(0,o.Wm)(s.ZP,{size:"small",type:"primary",bordered:!1},{default:()=>[e.total_count||0]})},{key:"unsubscribe_count",title:t("contacts.group.columns.unsubscribe"),minWidth:100,render:e=>e.unsubscribe_count||0},{key:"create_time",title:t("contacts.group.columns.createdAt"),minWidth:140,render:e=>(0,p.mr)(e.create_time)},{title:t("common.columns.actions"),key:"actions",align:"right",width:120,render:e=>{let l,a;return(0,o.Wm)(u.Z,{inline:!0},{default:()=>[(0,o.Wm)(i.ZP,{type:"primary",text:!0,onClick:()=>{b(e)}},v(l=t("common.actions.edit"))?l:{default:()=>[l]}),(0,o.Wm)(i.ZP,{type:"error",text:!0,onClick:()=>{z(e)}},v(a=t("common.actions.delete"))?a:{default:()=>[a]})]})}}]),k=()=>{console.log(1)},b=e=>{console.log(e)},z=e=>{console.log(e)};return(e,t)=>{let l=n.Z,s=r.Z,u=a.Z;return(0,o.wg)(),(0,o.j4)(u,null,{toolsLeft:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(i.ZP),{type:"primary",onClick:k},{default:(0,o.w5)(()=>t[0]||(t[0]=[(0,o.Uk)("Add group")])),_:1,__:[0]})]),table:(0,o.w5)(()=>[(0,o.Wm)(l,(0,o.dG)((0,o.SU)(g),{columns:(0,o.SU)(w)}),null,16,["columns"])]),pageRight:(0,o.w5)(()=>[(0,o.Wm)(s,(0,o.dG)((0,o.SU)(h),{onRefresh:(0,o.SU)(y)}),null,16,["onRefresh"])]),_:1})}}})}}]);