"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2364"],{93953:function(e,a,t){t.d(a,{Z:()=>f});var l=t(65083),i=t(58786),o=t(56946),r=t(54470),n=t(51048),s=t(71309),u=t(60951),d=t(6445),p=t(73238);let m={name:"Flex",self:function(){return p.Z}},c=Object.assign(Object.assign({},o.Z.props),{align:String,justify:{type:String,default:"start"},inline:Boolean,vertical:Boolean,reverse:Boolean,size:{type:[String,Number,Array],default:"medium"},wrap:{type:Boolean,default:!0}}),f=(0,i.aZ)({name:"Flex",props:c,setup(e){let{mergedClsPrefixRef:a,mergedRtlRef:t}=(0,r.ZP)(e),u=(0,o.Z)("Flex","-flex",void 0,m,e,a);return{rtlEnabled:(0,n.V)("Flex",t,a),mergedClsPrefix:a,margin:(0,i.Fl)(()=>{let{size:a}=e;if(Array.isArray(a))return{horizontal:a[0],vertical:a[1]};if("number"==typeof a)return{horizontal:a,vertical:a};let{self:{[(0,s.Tl)("gap",a)]:t}}=u.value,{row:i,col:o}=(0,l.yU)(t);return{horizontal:(0,l.fQ)(o),vertical:(0,l.fQ)(i)}})}},render(){let{vertical:e,reverse:a,align:t,inline:l,justify:o,margin:r,wrap:n,mergedClsPrefix:s,rtlEnabled:p}=this,m=(0,u.x)((0,d.z)(this),!1);return m.length?(0,i.h)("div",{role:"none",class:[`${s}-flex`,p&&`${s}-flex--rtl`],style:{display:l?"inline-flex":"flex",flexDirection:e&&!a?"column":e&&a?"column-reverse":!e&&a?"row-reverse":"row",justifyContent:o,flexWrap:!n||e?"nowrap":"wrap",alignItems:t,gap:`${r.vertical}px ${r.horizontal}px`}},m):null}})},79537:function(e,a,t){t.d(a,{Z:()=>s});var l=t(58786),i=t(54470),o=t(27046),r=t(71309);let n=(0,r.cB)("input-group",`
 display: inline-flex;
 width: 100%;
 flex-wrap: nowrap;
 vertical-align: bottom;
`,[(0,r.c)(">",[(0,r.cB)("input",[(0,r.c)("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),(0,r.c)("&:not(:first-child)",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 margin-left: -1px!important;
 `)]),(0,r.cB)("button",[(0,r.c)("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `,[(0,r.cE)("state-border, border",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `)]),(0,r.c)("&:not(:first-child)",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `,[(0,r.cE)("state-border, border",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `)])]),(0,r.c)("*",[(0,r.c)("&:not(:last-child)",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `,[(0,r.c)(">",[(0,r.cB)("input",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),(0,r.cB)("base-selection",[(0,r.cB)("base-selection-label",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),(0,r.cB)("base-selection-tags",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `),(0,r.cE)("box-shadow, border, state-border",`
 border-top-right-radius: 0!important;
 border-bottom-right-radius: 0!important;
 `)])])]),(0,r.c)("&:not(:first-child)",`
 margin-left: -1px!important;
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `,[(0,r.c)(">",[(0,r.cB)("input",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),(0,r.cB)("base-selection",[(0,r.cB)("base-selection-label",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),(0,r.cB)("base-selection-tags",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `),(0,r.cE)("box-shadow, border, state-border",`
 border-top-left-radius: 0!important;
 border-bottom-left-radius: 0!important;
 `)])])])])])]),s=(0,l.aZ)({name:"InputGroup",props:{},setup(e){let{mergedClsPrefixRef:a}=(0,i.ZP)(e);return(0,o.Z)("-input-group",n,a),{mergedClsPrefix:a}},render(){let{mergedClsPrefix:e}=this;return(0,l.h)("div",{class:`${e}-input-group`},this.$slots)}})},39432:function(e,a,t){t.d(a,{Au:()=>p,Fj:()=>n,LC:()=>r,Lb:()=>b,OV:()=>d,dj:()=>u,gK:()=>s,i7:()=>o,rU:()=>v,v1:()=>m,xh:()=>f,yW:()=>c});var l=t(34541);let{t:i}=t(76882).Z.global,o=e=>l.e.get("/domains/list",{params:e}),r=()=>l.e.get("/domains/all"),n=e=>l.e.post("/domains/create",e,{fetchOptions:{loading:i("domain.api.loading.creating"),successMessage:!0}}),s=e=>l.e.post("/domains/update",e,{fetchOptions:{loading:i("domain.api.loading.updating"),successMessage:!0}}),u=e=>l.e.post("/domains/delete",e,{fetchOptions:{loading:i("domain.api.loading.deleting"),successMessage:!0}}),d=e=>l.e.post("/domains/set_ssl",e,{fetchOptions:{loading:i("domain.api.loading.settingSSL"),successMessage:!0}}),p=e=>l.e.get("/domains/get_ssl",{params:e}),m=e=>l.e.post("/domains/fresh_dns_records",e,{fetchOptions:{loading:i("domain.api.loading.refreshingDns"),successMessage:!0}}),c=e=>l.e.post("/ssl/apply_cert",e,{fetchOptions:{loading:i("domain.api.loading.applyingCert"),successMessage:!0}}),f=e=>l.e.post("/domains/set_default_domain",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}}),v=e=>l.e.post("/askai/project/create",e,{fetchOptions:{loading:"Setting Default Domain, please wait...",successMessage:!0}}),b=()=>l.e.post("/askai/supplier/status")},67127:function(e,a,t){t.d(a,{EV:()=>s,H2:()=>p,Ts:()=>r,WS:()=>u,Yi:()=>n,iC:()=>o,ym:()=>d});var l=t(34541);let{t:i}=t(76882).Z.global,o=e=>l.e.get("/mailbox/list",{params:e}),r=e=>l.e.post("/mailbox/create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),n=e=>l.e.post("/mailbox/batch_create",e,{fetchOptions:{loading:i("mailbox.api.loading.creating"),successMessage:!0}}),s=e=>l.e.post("/mailbox/update",e,{fetchOptions:{loading:i("mailbox.api.loading.updating"),successMessage:!0}}),u=e=>l.e.post("/mailbox/delete",e,{fetchOptions:{loading:i("mailbox.api.loading.deleting"),successMessage:!0}}),d=e=>l.e.post("/mailbox/export",e,{responseType:"blob",fetchOptions:{loading:i("mailbox.api.loading.exporting"),successMessage:!0}}),p=e=>l.e.post("/mailbox/import",e,{fetchOptions:{loading:i("mailbox.api.loading.importing"),successMessage:!0}})},77984:function(e,a,t){t.d(a,{F:()=>r});var l=t(68271),i=t(94821),o=t(76882);let r=()=>{let{t:e}=o.Z.global,{copy:a,isSupported:t,copied:r}=(0,i.VPI)({legacy:!0});return{copied:r,copyText:async i=>{if(!i)return void l.v0.error(e("common.useCopy.noText"));t.value?(await a(i),l.v0.success(e("common.useCopy.success"))):l.v0.error(e("common.useCopy.failed"))}}}},80947:function(e,a,t){t.d(a,{N:()=>r});var l=t(22895),i=t(68271),o=t(58786);let r=e=>{let{params:a,fetchFn:t,useParams:r,loading:n=!0,immediate:s=!0,rowKey:u=e=>e.id}=e,d=(0,o.iH)(n),p=(0,o.iH)([]),m=(0,o.iH)(0),c=(0,o.iH)(a),f=(0,o.iH)([]),v=()=>r?r(c.value):c.value,b=(0,l.DI)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(c.value.page=1),d.value=!0;try{let e=v(),a=await t(e);(0,i.Kn)(a)&&(p.value=(0,i.kJ)(a.list)?a.list:[],m.value=(0,i.hj)(a.total)?a.total:0)}finally{f.value=[],d.value=!1}},300),g=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return b(e)},h=e=>{c.value.page=e},w=e=>{c.value.page_size=e};return(0,o.bv)(()=>{s&&g()}),{tableData:p,tableTotal:m,tableKeys:f,tableParams:c,fetchTable:g,resetTable:()=>g(!0),tableProps:(0,o.Fl)(()=>({rowKey:u,data:p.value,loading:d.value,checkedRowKeys:f.value,onUpdateCheckedRowKeys:e=>{f.value=e}})),batchProps:(0,o.Fl)(()=>({rowKey:u,data:p.value,checkedRowKeys:f.value,onUpdateCheckedRowKeys:e=>{f.value=e}})),pageProps:(0,o.Fl)(()=>({page:c.value.page,pageSize:c.value.page_size,itemCount:m.value,onUpdatePage:h,onUpdatePageSize:w}))}}},86559:function(e,a,t){t.d(a,{Z:()=>o});var l=t(73084),i=t(58786);let o=(0,i.aZ)({__name:"index",props:(0,i.Vf)({width:{default:240},prefix:{type:Boolean,default:!1}},{value:{default:""},valueModifiers:{}}),emits:(0,i.Vf)(["search"],["update:value"]),setup(e,a){let{expose:t,emit:o}=a,r=(0,i.iH)(null),n=(0,i.tT)(e,"value"),s=()=>{o("search",n.value)};return t({focus:()=>{var e;null==(e=r.value)||e.focus()}}),(e,a)=>{let t=l.Z;return(0,i.wg)(),(0,i.j4)(t,(0,i.dG)({ref_key:"inputRef",ref:r,value:n.value,"onUpdate:value":a[0]||(a[0]=e=>n.value=e)},e.$attrs,{class:"bt-search",style:{width:`${e.width}px`},onKeyup:(0,i.D2)(s,["enter"])}),(0,i.Nv)({_:2},[e.prefix?{name:"prefix",fn:(0,i.w5)(()=>[(0,i._)("div",{class:"flex items-center cursor-pointer",onClick:s},a[1]||(a[1]=[(0,i._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"0"}:void 0,e.prefix?void 0:{name:"suffix",fn:(0,i.w5)(()=>[(0,i._)("div",{class:"flex items-center cursor-pointer",onClick:s},a[2]||(a[2]=[(0,i._)("i",{class:"i-mdi-search text-16px"},null,-1)]))]),key:"1"}]),1040,["value","style"])}}})},4340:function(e,a,t){t.d(a,{Z:()=>s});var l=t(15496),i=t(23685),o=t(58786);let r={class:"flex gap-10px"},n={class:"flex-center w-40px"},s=(0,o.aZ)({__name:"index",props:{data:{type:Array,default:()=>[]},rowKey:{type:Function,required:!0},options:{type:Array,default:()=>[]},checkedRowKeys:{type:Array,default:()=>[]}},emits:["updateCheckedRowKeys","select"],setup(e,a){let{emit:t}=a,s=(0,o.Fl)({get:()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length===e.data.length,set(a){t("updateCheckedRowKeys",a?e.data.map(a=>e.rowKey(a)):[])}}),u=(0,o.Fl)(()=>0===e.data.length),d=(0,o.Fl)(()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length<e.data.length),p=(0,o.Fl)(()=>0===e.checkedRowKeys.length),m=a=>{t("select",a,e.checkedRowKeys)};return(a,t)=>{let c=i.Z,f=l.ZP;return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",n,[(0,o.Wm)(c,{checked:(0,o.SU)(s),"onUpdate:checked":t[0]||(t[0]=e=>(0,o.dq)(s)?s.value=e:null),disabled:(0,o.SU)(u),indeterminate:(0,o.SU)(d)},null,8,["checked","disabled","indeterminate"])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.options,e=>((0,o.wg)(),(0,o.j4)(f,{key:e.value,disabled:(0,o.SU)(p),onClick:a=>m(e.value)},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.label),1)]),_:2},1032,["disabled","onClick"]))),128))])}}})},66760:function(e,a,t){t.d(a,{Z:()=>n});var l=t(81021),i=t(15496),o=t(58786);let r={class:"leading-22px text-13px text-desc text-center"},n=(0,o.aZ)({__name:"index",setup(e){let a=()=>{window.open("https://github.com/aaPanel/BillionMail/issues")},t=()=>{window.open("https://github.com/aaPanel/BillionMail")};return(e,n)=>{let s=i.ZP,u=(0,o.up)("i18n-t"),d=l.Z;return(0,o.wg)(),(0,o.j4)(d,null,{default:(0,o.w5)(()=>[(0,o._)("div",r,[(0,o.Wm)(u,{tag:"span",scope:"global",keypath:"components.tableHelp.text1"},{issues:(0,o.w5)(()=>[(0,o.Wm)(s,{class:"text-13px",type:"primary",text:"",onClick:a},{default:(0,o.w5)(()=>n[0]||(n[0]=[(0,o._)("span",null,"Issues",-1),(0,o._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[0]})]),star:(0,o.w5)(()=>[(0,o.Wm)(s,{class:"text-13px",type:"primary",text:"",onClick:t},{default:(0,o.w5)(()=>n[1]||(n[1]=[(0,o.Uk)(" Star "),(0,o._)("i",{class:"i-mdi:arrow-right ml-1px"},null,-1)])),_:1,__:[1]})]),_:1}),n[2]||(n[2]=(0,o._)("br",null,null,-1)),(0,o._)("span",null,(0,o.zw)(e.$t("components.tableHelp.text2")),1)])]),_:1})}}})},39244:function(e,a,t){t.d(a,{Z:()=>o});var l=t(93953),i=t(58786);let o=(0,i.aZ)({__name:"index",setup(e){let a=!!(0,i.Rr)().toolsLeft,t=!!(0,i.Rr)().toolsRight,o=!!(0,i.Rr)().pageLeft||!!(0,i.Rr)().pageRight;return(e,r)=>{let n=l.Z;return(0,i.wg)(),(0,i.iD)("div",null,[a||t?((0,i.wg)(),(0,i.j4)(n,{key:0,class:"items-center mb-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i.Wm)(n,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsLeft")]),_:3}),(0,i.Wm)(n,{class:"items-center",size:12},{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"toolsRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"table"),(0,i.SU)(o)?((0,i.wg)(),(0,i.j4)(n,{key:1,class:"items-center mt-12px",justify:"space-between"},{default:(0,i.w5)(()=>[(0,i._)("div",null,[(0,i.WI)(e.$slots,"pageLeft")]),(0,i.Wm)(n,null,{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"pageRight")]),_:3})]),_:3})):(0,i.kq)("",!0),(0,i.WI)(e.$slots,"modal")])}}})},25170:function(e,a,t){t.d(a,{Z:()=>n});var l=t(75459),i=t(58786),o=t(68271);let r={class:"ml-8px text-14px"},n=(0,i.aZ)({__name:"index",props:(0,i.Vf)({storeKey:{default:""},pageSizes:{default:()=>[10,20,50,100]},showTotal:{type:Boolean,default:!0},showSizePicker:{type:Boolean,default:!0},showQuickJumper:{type:Boolean,default:!0},onUpdatePage:{}},{page:{},pageModifiers:{},pageSize:{},pageSizeModifiers:{}}),emits:(0,i.Vf)(["refresh"],["update:page","update:pageSize"]),setup(e,a){let{emit:t}=a,n=(0,i.Fl)(()=>{let{storeKey:a}=e;return a?`${a}-page`:""}),s=(0,i.tT)(e,"page"),u=(0,i.tT)(e,"pageSize"),d=a=>{var l;null==(l=e.onUpdatePage)||l.call(e,a),t("refresh")},p=a=>{var l;s.value=1,null==(l=e.onUpdatePage)||l.call(e,1),m(a),t("refresh")},m=e=>{n.value&&(0,o.qQ)(n.value,String(e))};if(n.value){let e=(0,o.$o)(n.value);e&&(u.value=(0,o.Dx)(e))}return(e,a)=>{let t=l.Z;return(0,i.wg)(),(0,i.j4)(t,(0,i.dG)(e.$attrs,{page:s.value,"onUpdate:page":[a[0]||(a[0]=e=>s.value=e),d],"page-size":u.value,"onUpdate:pageSize":[a[1]||(a[1]=e=>u.value=e),p],"show-size-picker":e.showSizePicker,"show-quick-jumper":e.showQuickJumper,"page-sizes":e.pageSizes,"display-order":["pages","size-picker","quick-jumper"]}),(0,i.Nv)({_:2},[e.showTotal?{name:"suffix",fn:(0,i.w5)(e=>{let{itemCount:a}=e;return[(0,i._)("span",r," Total "+(0,i.zw)(a),1)]}),key:"0"}:void 0]),1040,["page","page-size","show-size-picker","show-quick-jumper","page-sizes"])}}})},26638:function(e,a,t){t.r(a),t.d(a,{default:()=>G});var l=t(39244),i=t(25170),o=t(4340),r=t(60424),n=t(66760),s=t(86559),u=t(58786),d=t(15496),p=t(29875),m=t(93953),c=t(94821),f=t(68271),v=t(51169),b=t(77984),g=t(80947),h=t(67127),w=t(35409);let x={class:"flex"},_={class:"w-0 flex-1 flex items-center"},y={class:"min-w-0"},U=(0,u.aZ)({__name:"index",props:{value:{default:""}},setup(e){let{copyText:a}=(0,b.F)(),t=(0,u.iH)(!1),l=(0,u.Fl)(()=>t.value?e.value:"**********"),i=()=>{t.value=!t.value},o=async()=>{a(`${e.value}`)};return(e,a)=>{let r=w.ZP;return(0,u.wg)(),(0,u.iD)("div",x,[(0,u._)("div",_,[(0,u._)("div",y,[(0,u.Wm)(r,{class:"max-w-full",tooltip:{contentStyle:{maxWidth:"200px"}}},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)((0,u.SU)(l)),1)]),_:1})]),(0,u._)("div",{class:"ml-6px text-15px cursor-pointer",title:"Show",onClick:i},[(0,u._)("i",{class:(0,u.C_)((0,u.SU)(t)?"i-mdi-eye-outline":"i-mdi-eye-off-outline")},null,2)]),(0,u._)("div",{class:"reset ml-6px text-15px cursor-pointer text-#333",title:"Copy",onClick:o},a[0]||(a[0]=[(0,u._)("i",{class:"i-mdi-content-copy"},null,-1)]))])])}}});var S=t(8490),k=t(39432),W=t(52495);let Z=(0,u.aZ)({__name:"DomainSelect",props:(0,u.Vf)({isAll:{type:Boolean,default:!0}},{value:{default:()=>null},valueModifiers:{}}),emits:["update:value"],setup(e){let{t:a}=(0,W.QT)(),t=(0,u.tT)(e,"value"),l=(0,u.iH)(!1),i=(0,u.iH)([]);return(async()=>{try{l.value=!0;let o=await (0,k.LC)();(0,f.kJ)(o)&&(i.value=o.map(e=>({label:e.domain,value:e.domain})),e.isAll?(i.value.unshift({label:a("common.all.text"),value:""}),t.value||(t.value="")):o.length>0&&!t.value&&(t.value=o[0].domain))}finally{l.value=!1}})(),(e,o)=>{let r=S.Z;return(0,u.wg)(),(0,u.j4)(r,{value:t.value,"onUpdate:value":o[0]||(o[0]=e=>t.value=e),loading:(0,u.SU)(l),filterable:!0,options:(0,u.SU)(i),placeholder:(0,u.SU)(a)("mailbox.domain.selectPlaceholder")},null,8,["value","loading","options","placeholder"])}}}),q=(0,t(41748).default)(Z,[["__scopeId","data-v-186220da"]]);var R=t(46244),C=t(29283),z=t(6455),B=t(79537),T=t(73084);let A=(0,u.aZ)({__name:"MailboxForm",setup(e){let{t:a}=(0,W.QT)(),t=(0,u.iH)(!1),l=(0,u.Fl)(()=>t.value?a("mailbox.form.editTitle"):a("mailbox.form.addTitle")),i=(0,u.AE)("formRef"),o=(0,u.qj)({quota:5,unit:"GB",isAdmin:0,full_name:"",local_part:"",domain:null,password:(0,f.JL)(),active:1}),r=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],n=[{label:a("mailbox.userType.general"),value:0},{label:a("mailbox.userType.admin"),value:1}],s={full_name:{required:!0,trigger:"blur",validator:()=>""!==o.full_name.trim()||Error("Please enter name")},domain:{trigger:"blur",required:!0,validator:()=>""!==o.local_part.trim()&&!!o.domain||Error(a("mailbox.validation.emailRequired"))},password:{trigger:"blur",required:!0,validator:()=>{if(t.value){if(o.password&&o.password.trim().length<8)return Error(a("mailbox.validation.passwordLength"));if(o.password&&!/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/.test(o.password))return Error(a("mailbox.validation.passwordFormat"))}else{if(o.password.trim().length<8)return Error(a("mailbox.validation.passwordLength"));if(!/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$/.test(o.password))return Error(a("mailbox.validation.passwordFormat"))}return!0}}},d=e=>{o.full_name=e},m=(e,a)=>{switch(a){case"GB":e*=1024;case"MB":e*=1048576}return e},c=()=>({full_name:o.full_name,local_part:o.local_part,domain:o.domain||"",password:o.password,quota:m(o.quota,o.unit),isAdmin:o.isAdmin,active:o.active}),[b,g]=(0,v.d)({onChangeState:e=>{if(e){let e=g.getState(),{row:a}=e;if(t.value=e.isEdit,a){o.full_name=a.full_name,o.local_part=a.local_part,o.domain=a.domain,o.isAdmin=a.is_admin,o.active=a.active,o.password=a.password;let[e,t]=(0,f.UO)(a.quota).split(" ");o.quota=(0,f.Dx)(e),o.unit=t}}else o.full_name="",o.local_part="",o.domain=null,o.password=(0,f.JL)(),o.quota=5,o.unit="GB",o.isAdmin=0,o.active=1},onConfirm:async()=>{var e;await (null==(e=i.value)?void 0:e.validate());let a=c();t.value?await (0,h.EV)(a):await (0,h.Ts)(a),g.getState().refresh()}});return(e,m)=>{let c=T.Z,f=B.Z,v=z.ZP,g=C.Z,h=S.Z,w=p.Z,x=R.Z;return(0,u.wg)(),(0,u.j4)((0,u.SU)(b),{title:(0,u.SU)(l),width:"520"},{default:(0,u.w5)(()=>[(0,u.Wm)(x,{ref_key:"formRef",ref:i,class:"pt-20px",model:(0,u.SU)(o),rules:s},{default:(0,u.w5)(()=>[(0,u.Wm)(v,{label:(0,u.SU)(a)("mailbox.form.emailAddress"),path:"domain"},{default:(0,u.w5)(()=>[(0,u.Wm)(f,null,{default:(0,u.w5)(()=>[(0,u.Wm)(c,{value:(0,u.SU)(o).local_part,"onUpdate:value":[m[0]||(m[0]=e=>(0,u.SU)(o).local_part=e),d],class:"flex-1",disabled:(0,u.SU)(t)},null,8,["value","disabled"]),(0,u.Wm)(q,{value:(0,u.SU)(o).domain,"onUpdate:value":m[1]||(m[1]=e=>(0,u.SU)(o).domain=e),class:"flex-1","is-all":!1,disabled:(0,u.SU)(t)},null,8,["value","disabled"])]),_:1})]),_:1},8,["label"]),(0,u.Wm)(v,{label:"Display Name",path:"full_name"},{default:(0,u.w5)(()=>[(0,u.Wm)(c,{value:(0,u.SU)(o).full_name,"onUpdate:value":m[2]||(m[2]=e=>(0,u.SU)(o).full_name=e)},null,8,["value"])]),_:1}),(0,u.Wm)(v,{label:(0,u.SU)(a)("mailbox.form.password"),path:"password"},{default:(0,u.w5)(()=>[(0,u.Wm)(c,{value:(0,u.SU)(o).password,"onUpdate:value":m[3]||(m[3]=e=>(0,u.SU)(o).password=e),placeholder:(0,u.SU)(a)("mailbox.form.passwordPlaceholder")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,u.Wm)(v,{label:(0,u.SU)(a)("mailbox.form.quota"),path:"quota"},{default:(0,u.w5)(()=>[(0,u.Wm)(f,null,{default:(0,u.w5)(()=>[(0,u.Wm)(g,{value:(0,u.SU)(o).quota,"onUpdate:value":m[4]||(m[4]=e=>(0,u.SU)(o).quota=e),class:"flex-1",min:1,"show-button":!1},null,8,["value"]),(0,u.Wm)(h,{value:(0,u.SU)(o).unit,"onUpdate:value":m[5]||(m[5]=e=>(0,u.SU)(o).unit=e),class:"flex-1",options:r},null,8,["value"])]),_:1})]),_:1},8,["label"]),(0,u.Wm)(v,{label:(0,u.SU)(a)("mailbox.form.userType"),path:"userType"},{default:(0,u.w5)(()=>[(0,u.Wm)(h,{value:(0,u.SU)(o).isAdmin,"onUpdate:value":m[6]||(m[6]=e=>(0,u.SU)(o).isAdmin=e),options:n},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(v,{label:(0,u.SU)(a)("mailbox.form.status"),"show-feedback":!1},{default:(0,u.w5)(()=>[(0,u.Wm)(w,{value:(0,u.SU)(o).active,"onUpdate:value":m[7]||(m[7]=e=>(0,u.SU)(o).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title"])}}});var P=t(49247);let $=(0,u.aZ)({__name:"MailboxBatchAdd",emits:["refresh"],setup(e,a){let{expose:t,emit:l}=a,{t:i}=(0,W.QT)(),o=(0,u.iH)(!1),r=(0,u.AE)("formRef"),n=(0,u.qj)({domain:null,prefix:"",count:10,quota:5,unit:"GB",password:""}),s={domain:{trigger:"change",required:!0,validator:()=>!!n.domain||Error(i("mailbox.validation.domainRequired"))},prefix:{trigger:"blur",required:!0,validator:()=>!(n.prefix.trim().length<1)||Error(i("mailbox.validation.prefixRequired"))},count:{trigger:"blur",required:!0,validator:()=>!(n.count<1)||Error(i("mailbox.validation.countRequired"))}},d=[{label:"GB",value:"GB"},{label:"MB",value:"MB"}],p=async()=>{var e;await (null==(e=r.value)?void 0:e.validate()),await (0,h.Yi)(m()),l("refresh")},m=()=>({domain:n.domain||"",quota:c(n.quota,n.unit),prefix:n.prefix,count:n.count}),c=(e,a)=>{switch(a){case"GB":e*=1024;case"MB":e*=1048576}return e},f=()=>{n.domain=null,n.prefix="",n.count=10,n.quota=5,n.unit="GB",n.password=""};return t({open:()=>{f(),o.value=!0}}),(e,a)=>{let t=z.ZP,l=T.Z,i=C.Z,m=S.Z,c=B.Z,f=R.Z,v=P.Z;return(0,u.wg)(),(0,u.j4)(v,{show:(0,u.SU)(o),"onUpdate:show":a[6]||(a[6]=e=>(0,u.dq)(o)?o.value=e:null),title:e.$t("mailbox.form.batchAddTitle"),width:500,onConfirm:p},{default:(0,u.w5)(()=>[(0,u.Wm)(f,{ref_key:"formRef",ref:r,class:"pt-8px",model:(0,u.SU)(n),rules:s},{default:(0,u.w5)(()=>[(0,u.Wm)(t,{label:e.$t("mailbox.form.domain"),path:"domain"},{default:(0,u.w5)(()=>[(0,u.Wm)(q,{value:(0,u.SU)(n).domain,"onUpdate:value":a[0]||(a[0]=e=>(0,u.SU)(n).domain=e),class:"flex-1","is-all":!1,disabled:!1},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(t,{label:e.$t("mailbox.form.prefix"),path:"prefix"},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(n).prefix,"onUpdate:value":a[1]||(a[1]=e=>(0,u.SU)(n).prefix=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(t,{label:e.$t("mailbox.form.count"),path:"count"},{default:(0,u.w5)(()=>[(0,u.Wm)(i,{value:(0,u.SU)(n).count,"onUpdate:value":a[2]||(a[2]=e=>(0,u.SU)(n).count=e),class:"flex-1",min:1,"show-button":!1},null,8,["value"])]),_:1},8,["label"]),(0,u.kq)("",!0),(0,u.Wm)(t,{label:e.$t("mailbox.form.quota"),path:"quota"},{default:(0,u.w5)(()=>[(0,u.Wm)(c,null,{default:(0,u.w5)(()=>[(0,u.Wm)(i,{value:(0,u.SU)(n).quota,"onUpdate:value":a[4]||(a[4]=e=>(0,u.SU)(n).quota=e),class:"flex-1",min:1,"show-button":!1},null,8,["value"]),(0,u.Wm)(m,{value:(0,u.SU)(n).unit,"onUpdate:value":a[5]||(a[5]=e=>(0,u.SU)(n).unit=e),class:"flex-1",options:d},null,8,["value"])]),_:1})]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["show","title"])}}});var j=t(3179);let M={class:"py-16px"},E=(0,u.aZ)({__name:"MailboxImport",emits:["refresh"],setup(e,a){let{expose:t,emit:l}=a,{t:i}=(0,W.QT)(),o=(0,u.iH)(!1),r=(0,u.qj)({file_data:"",file_type:""}),n=e=>{let a=new FileReader;a.onload=a=>{var t;r.file_type=e.name.substring(e.name.lastIndexOf(".")+1),r.file_data=null==(t=a.target)?void 0:t.result},e.file&&a.readAsText(e.file)},s=async()=>{if(!r.file_data||!r.file_type)return f.v0.error(i("mailbox.validation.fileRequired")),!1;await (0,h.H2)((0,u.IU)(r)),l("refresh")},d=()=>{r.file_data="",r.file_type=""};return t({open:()=>{d(),o.value=!0}}),(e,a)=>{let t=j.Z,l=P.Z;return(0,u.wg)(),(0,u.j4)(l,{show:(0,u.SU)(o),"onUpdate:show":a[0]||(a[0]=e=>(0,u.dq)(o)?o.value=e:null),title:e.$t("mailbox.form.importTitle"),width:480,onConfirm:s},{default:(0,u.w5)(()=>[(0,u._)("div",M,[(0,u.Wm)(t,{"is-upload":!1,accept:["csv"],onChange:n})])]),_:1},8,["show","title"])}}}),F=(0,u.aZ)({__name:"MailboxExport",setup(e,a){let{expose:t}=a,l=(0,u.iH)(!1),i=(0,u.iH)(null),o=async()=>{await (0,h.ym)({domain:i.value||""})};return t({open:e=>{i.value=e||null,l.value=!0}}),(e,a)=>{let t=z.ZP,r=R.Z,n=P.Z;return(0,u.wg)(),(0,u.j4)(n,{show:(0,u.SU)(l),"onUpdate:show":a[1]||(a[1]=e=>(0,u.dq)(l)?l.value=e:null),title:e.$t("mailbox.form.exportTitle"),width:480,onConfirm:o},{default:(0,u.w5)(()=>[(0,u.Wm)(r,{class:"pt-8px"},{default:(0,u.w5)(()=>[(0,u.Wm)(t,{label:e.$t("mailbox.form.domain")},{default:(0,u.w5)(()=>[(0,u.Wm)(q,{value:(0,u.SU)(i),"onUpdate:value":a[0]||(a[0]=e=>(0,u.dq)(i)?i.value=e:null)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["show","title"])}}}),O={class:"p-24px"},K={class:"bt-title"},D={class:"w-220px"};function H(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,u.lA)(e)}let G=(0,u.aZ)({__name:"index",setup(e){let a=(0,c.tLD)(),{t}=(0,W.QT)(),{copyText:w}=(0,b.F)(),x=(0,u.AE)("batchAddRef"),_=()=>{var e;null==(e=x.value)||e.open()},y=(0,u.AE)("importRef"),S=()=>{var e;null==(e=y.value)||e.open()},k=(0,u.AE)("exportRef"),Z=()=>{var e;null==(e=k.value)||e.open(R.value.domain)},{tableParams:R,tableProps:C,pageProps:z,batchProps:B,fetchTable:T,resetTable:P}=(0,g.N)({loading:!0,immediate:!0,params:{page:1,page_size:10,domain:a.value.state.domain||"",keyword:""},rowKey:e=>e.username,fetchFn:h.iC}),j=(0,u.iH)([{type:"selection",width:40},{key:"username",title:t("mailbox.columns.username"),minWidth:120,ellipsis:{tooltip:!0}},{key:"password",title:t("mailbox.columns.password"),width:"18%",minWidth:120,render:e=>(0,u.Wm)(U,{value:e.password||"--"},null)},{key:"login",title:t("mailbox.columns.loginInfo"),align:"center",render:e=>{let a;return(0,u.Wm)(d.ZP,{text:!0,type:"primary",onClick:()=>{w(t("mailbox.loginInfo.template",{webmail:window.location.origin+"/roundcube",username:e.username,password:e.password,mx:e.mx}))}},H(a=t("common.actions.copy"))?a:{default:()=>[a]})}},{key:"quota",title:t("mailbox.columns.quota"),width:"14%",minWidth:120,render:e=>(0,f.UO)(e.quota)},{key:"is_admin",title:t("mailbox.columns.type"),width:"14%",minWidth:100,render:e=>1===e.is_admin?t("mailbox.userType.admin"):t("mailbox.userType.general")},{key:"status",title:t("mailbox.columns.status"),width:"12%",minWidth:80,render:e=>(0,u.Wm)(p.Z,{value:e.active,"checked-value":1,"unchecked-value":0,size:"small",onUpdateValue:a=>{L(e,a)}},null)},{title:t("common.columns.actions"),key:"actions",align:"right",width:120,render:e=>{let a,l;return(0,u.Wm)(m.Z,{inline:!0},{default:()=>[(0,u.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{V(e)}},H(a=t("common.actions.edit"))?a:{default:()=>[a]}),(0,u.Wm)(d.ZP,{type:"error",text:!0,onClick:()=>{Q(e)}},H(l=t("common.actions.delete"))?l:{default:()=>[l]})]})}}]),[M,G]=(0,v.d)({component:A,state:{isEdit:!1,refresh:T}}),I=()=>{G.setState({isEdit:!1,row:null}),G.open()},L=async(e,a)=>{await (0,h.EV)({full_name:e.full_name,domain:e.domain,password:e.password,quota:e.quota,isAdmin:e.is_admin,active:a}),e.active=a},V=e=>{G.setState({isEdit:!0,row:e}),G.open()},Q=e=>{(0,f.iG)({title:t("mailbox.delete.title"),content:t("mailbox.delete.confirm",{name:e.username}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,h.WS)({emails:[e.username]}),T()}})},J=[{label:t("mailbox.actions.batchDelete"),value:"delete"}],N=(e,a)=>{"delete"===e&&Y(a)},Y=e=>{(0,f.iG)({title:t("mailbox.actions.batchDelete"),content:t("mailbox.delete.batchConfirm",{count:e.length}),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await (0,h.WS)({emails:e}),T()}})};return(e,a)=>{let p=s.Z,m=n.Z,c=r.Z,f=o.Z,v=i.Z,b=l.Z;return(0,u.wg)(),(0,u.iD)("div",O,[(0,u._)("div",K,(0,u.zw)((0,u.SU)(t)("layout.menu.mailboxes")),1),(0,u.Wm)(b,null,{toolsLeft:(0,u.w5)(()=>[(0,u.Wm)((0,u.SU)(d.ZP),{type:"primary",onClick:I},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)((0,u.SU)(t)("mailbox.actions.add")),1)]),_:1}),(0,u.Wm)((0,u.SU)(d.ZP),{onClick:_},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("mailbox.actions.batchAdd")),1)]),_:1}),(0,u.Wm)((0,u.SU)(d.ZP),{onClick:S},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("common.actions.import")),1)]),_:1}),(0,u.Wm)((0,u.SU)(d.ZP),{onClick:Z},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("common.actions.export")),1)]),_:1})]),toolsRight:(0,u.w5)(()=>[(0,u._)("div",D,[(0,u.Wm)(q,{value:(0,u.SU)(R).domain,"onUpdate:value":[a[0]||(a[0]=e=>(0,u.SU)(R).domain=e),a[1]||(a[1]=()=>(0,u.SU)(P)())]},null,8,["value"])]),(0,u.Wm)(p,{value:(0,u.SU)(R).keyword,"onUpdate:value":a[2]||(a[2]=e=>(0,u.SU)(R).keyword=e),width:"280",placeholder:(0,u.SU)(t)("mailbox.search.usernamePlaceholder"),onSearch:a[3]||(a[3]=()=>(0,u.SU)(P)())},null,8,["value","placeholder"])]),table:(0,u.w5)(()=>[(0,u.Wm)(c,(0,u.dG)((0,u.SU)(C),{columns:(0,u.SU)(j)}),{empty:(0,u.w5)(()=>[(0,u.Wm)(m)]),_:1},16,["columns"])]),pageLeft:(0,u.w5)(()=>[(0,u.Wm)(f,(0,u.dG)((0,u.SU)(B),{options:J,onSelect:N}),null,16)]),pageRight:(0,u.w5)(()=>[(0,u.Wm)(v,(0,u.dG)((0,u.SU)(z),{onRefresh:(0,u.SU)(T)}),null,16,["onRefresh"])]),modal:(0,u.w5)(()=>[(0,u.Wm)((0,u.SU)(M)),(0,u.Wm)($,{ref_key:"batchAddRef",ref:x,onRefresh:(0,u.SU)(T)},null,8,["onRefresh"]),(0,u.Wm)(E,{ref_key:"importRef",ref:y,onRefresh:(0,u.SU)(T)},null,8,["onRefresh"]),(0,u.Wm)(F,{ref_key:"exportRef",ref:k},null,512)]),_:1})])}}})}}]);