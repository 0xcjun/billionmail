"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["184"],{3951:function(e,t,l){l.d(t,{Z:()=>s});var a=l(9833),i=l(209);let s=(0,i.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,t){let{expose:l}=t,s=(0,i.iH)(null);return l({validate:()=>{var e;return null===(e=s.value)||void 0===e?void 0:e.validate()},restoreValidation:()=>{var e;return null===(e=s.value)||void 0===e?void 0:e.restoreValidation()}}),(e,t)=>{let l=a.Z;return(0,i.wg)(),(0,i.j4)(l,(0,i.dG)(e.$attrs,{ref_key:"formRef",ref:s,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,i.w5)(()=>[(0,i.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},2777:function(e,t,l){l.r(t),l.d(t,{default:()=>C});var a=l(4652),i=l(6818),s=l(3435),n=l(6635),o=l(209),c=l(7714),d=l(3447),r=l(2965),p=l(6949),u=l(3312),m=l(4203);let{t:g}=l(4958).Z.global,b=e=>m.e.get("/mail_bcc/list",{params:e}),v=e=>m.e.post("/mail_bcc/add",e,{fetchOptions:{loading:g("settings.bcc.loading.adding"),successMessage:!0}}),f=e=>m.e.post("/mail_bcc/edit",e,{fetchOptions:{loading:g("settings.bcc.loading.saving"),successMessage:!0}}),y=e=>m.e.post("/mail_bcc/delete",e,{fetchOptions:{loading:g("settings.bcc.loading.deleting"),successMessage:!0}});var U=l(3951),S=l(9946),h=l(5891),w=l(6883),_=l(8454),W=l(5778);let k=(0,o.aZ)({__name:"BccForm",setup(e){let{t}=(0,W.QT)(),l=(0,o.iH)(!1),a=(0,o.Fl)(()=>l.value?t("settings.bcc.edit"):t("settings.bcc.add")),i=(0,o.AE)("formRef"),s=(0,o.iH)(0),n=(0,o.qj)({address:"",goto:"",type:"sender",active:1}),c=(0,o.Fl)(()=>[{label:t("settings.bcc.types.sender"),value:"sender"},{label:t("settings.bcc.types.recipient"),value:"recipient"}]),d={},[r,p]=(0,u.d)({onChangeState:e=>{if(e){let e=p.getState(),{row:t}=e;l.value=e.isEdit,t&&(s.value=t.id,n.address=t.address,n.goto=t.goto,n.type=t.type,n.active=t.active)}else s.value=0,n.address="",n.goto="",n.type="sender",n.active=1},onConfirm:async()=>{var e;await (null===(e=i.value)||void 0===e?void 0:e.validate()),l.value?await f({id:s.value,...(0,o.IU)(n)}):await v((0,o.IU)(n)),p.getState().refresh()}});return(e,s)=>{let p=_.Z,u=w.ZP,m=h.Z,g=S.Z,b=U.Z;return(0,o.wg)(),(0,o.j4)((0,o.SU)(r),{title:(0,o.SU)(a),width:"500"},{default:(0,o.w5)(()=>[(0,o.Wm)(b,{ref_key:"formRef",ref:i,class:"pt-8px",model:(0,o.SU)(n),rules:d},{default:(0,o.w5)(()=>[(0,o.Wm)(u,{label:(0,o.SU)(t)("settings.bcc.needCopy"),path:"user"},{default:(0,o.w5)(()=>[(0,o.Wm)(p,{value:(0,o.SU)(n).address,"onUpdate:value":s[0]||(s[0]=e=>(0,o.SU)(n).address=e),disabled:(0,o.SU)(l),placeholder:(0,o.SU)(t)("settings.bcc.placeholders.needCopy")},null,8,["value","disabled","placeholder"])]),_:1},8,["label"]),(0,o.Wm)(u,{label:(0,o.SU)(t)("settings.bcc.copyTo"),path:"forward_user"},{default:(0,o.w5)(()=>[(0,o.Wm)(p,{value:(0,o.SU)(n).goto,"onUpdate:value":s[1]||(s[1]=e=>(0,o.SU)(n).goto=e),placeholder:(0,o.SU)(t)("settings.bcc.placeholders.copyTo")},null,8,["value","placeholder"])]),_:1},8,["label"]),(0,o.Wm)(u,{label:(0,o.SU)(t)("settings.bcc.type"),path:"type"},{default:(0,o.w5)(()=>[(0,o.Wm)(m,{value:(0,o.SU)(n).type,"onUpdate:value":s[2]||(s[2]=e=>(0,o.SU)(n).type=e),options:(0,o.SU)(c)},null,8,["value","options"])]),_:1},8,["label"]),(0,o.Wm)(u,{label:(0,o.SU)(t)("settings.bcc.status"),"show-feedback":!1},{default:(0,o.w5)(()=>[(0,o.Wm)(g,{value:(0,o.SU)(n).active,"onUpdate:value":s[3]||(s[3]=e=>(0,o.SU)(n).active=e),"checked-value":1,"unchecked-value":0},null,8,["value"])]),_:1},8,["label"])]),_:1},8,["model"])]),_:1},8,["title"])}}});function Z(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,o.lA)(e)}let C=(0,o.aZ)({__name:"index",setup(e){let{t}=(0,W.QT)(),{tableParams:l,tableList:m,loading:g,tableTotal:v,getTableData:f}=(0,p.Z)({loading:!0,immediate:!0,params:{page:1,page_size:10,domain:"",keyword:""},fetchFn:b}),U=(0,o.iH)([{key:"address",title:()=>t("settings.bcc.needCopy"),ellipsis:{tooltip:!0}},{key:"goto",title:()=>t("settings.bcc.copyTo"),ellipsis:{tooltip:!0}},{key:"domain",title:()=>t("settings.bcc.domain"),ellipsis:{tooltip:!0}},{key:"type",title:()=>t("settings.bcc.type"),render:e=>t(`settings.bcc.types.${e.type}`)},{key:"active",title:()=>t("settings.bcc.status"),render:e=>(0,o.Wm)("div",{class:["text-16px",1===e.active?"text-primary":"text-error"]},[(0,o.Wm)("i",{class:[1===e.active?"i-mdi-success-circle":"i-mdi-remove-circle"]},null)])},{title:t("common.columns.actions"),key:"actions",align:"right",width:120,render:e=>{let l,a;return(0,o.Wm)(c.Z,{inline:!0},{default:()=>[(0,o.Wm)(d.ZP,{type:"primary",text:!0,onClick:()=>{C(e)}},Z(l=t("common.actions.edit"))?l:{default:()=>[l]}),(0,o.Wm)(d.ZP,{type:"error",text:!0,onClick:()=>{x(e)}},Z(a=t("common.actions.delete"))?a:{default:()=>[a]})]})}}]),[S,h]=(0,u.d)({component:k,state:{isEdit:!1,refresh:f}}),w=()=>{h.setState({isEdit:!1,row:null}),h.open()},_=()=>{f(!0)},C=e=>{h.setState({isEdit:!0,row:e}),h.open()},x=e=>{(0,r.iG)({title:t("settings.bcc.delete.title",{address:e.address}),content:t("settings.bcc.delete.content"),confirmText:t("common.actions.delete"),confirmType:"error",onConfirm:async()=>{await y({id:e.id}),f()}})};return(e,t)=>{let c=n.Z,r=s.Z,p=i.Z,u=a.Z;return(0,o.wg)(),(0,o.j4)(u,null,{toolsLeft:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(d.ZP),{type:"primary",onClick:w},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("settings.bcc.add")),1)]),_:1})]),toolsRight:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(d.ZP),{onClick:_},{default:(0,o.w5)(()=>[(0,o.Uk)((0,o.zw)(e.$t("common.actions.refresh")),1)]),_:1})]),table:(0,o.w5)(()=>[(0,o.Wm)(r,{loading:(0,o.SU)(g),columns:(0,o.SU)(U),data:(0,o.SU)(m)},{empty:(0,o.w5)(()=>[(0,o.Wm)(c)]),_:1},8,["loading","columns","data"])]),pageRight:(0,o.w5)(()=>[(0,o.Wm)(p,{page:(0,o.SU)(l).page,"onUpdate:page":t[0]||(t[0]=e=>(0,o.SU)(l).page=e),"page-size":(0,o.SU)(l).page_size,"onUpdate:pageSize":t[1]||(t[1]=e=>(0,o.SU)(l).page_size=e),"item-count":(0,o.SU)(v),onRefresh:(0,o.SU)(f)},null,8,["page","page-size","item-count","onRefresh"])]),modal:(0,o.w5)(()=>[(0,o.Wm)((0,o.SU)(S))]),_:1})}}})}}]);