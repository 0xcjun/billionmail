"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["872"],{3312:function(e,a,t){t.d(a,{d:()=>r});var l=t(209),s=t(8429);let i=Symbol("MODAL_INJECT"),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{state:a={},component:t,onCancel:r,onConfirm:M}=e,u=(0,l.qj)({});return t?[(0,l.aZ)({setup(s,r){let{attrs:M,slots:d}=r;return(0,l.JJ)(i,{state:a,options:e,extendApi:e=>{Object.setPrototypeOf(u,e)},setState:e=>{Object.assign(a,e)}}),()=>(0,l.h)(t,{...s,...M},d)}}),u]:[(0,l.aZ)({setup(a,t){let{attrs:d,slots:n}=t,o=(0,l.f3)(i),m=(0,l.iH)(!1);return u.open=()=>{var a;m.value=!0,null===(a=e.onChangeState)||void 0===a||a.call(e,m.value)},u.close=()=>{m.value=!1},u.setState=a=>{var t;null==o||o.setState(a),null===(t=e.onChangeState)||void 0===t||t.call(e,m.value)},u.getState=()=>(null==o?void 0:o.state)??{},null==o||o.extendApi(u),()=>(0,l.Wm)(s.Z,(0,l.dG)({show:m.value},a,d,{onCancel:r,onConfirm:M,"onUpdate:show":e=>{m.value=e??!1}}),n)}}),u]}},5138:function(e,a,t){t.d(a,{Z:()=>r});var l=t(3447),s=t(209);let i={class:"ml-4px"},r=(0,s.aZ)({__name:"index",props:{href:{type:String,default:""}},setup(e){let a=()=>{window.open(e.href)};return(e,t)=>{let r=l.ZP;return(0,s.wg)(),(0,s.j4)(r,{text:"",onClick:a},{default:(0,s.w5)(()=>[t[0]||(t[0]=(0,s._)("i",{class:"i-custom:help"},null,-1)),(0,s._)("span",i,(0,s.zw)(e.$t("common.actions.help")),1)]),_:1})}}})},3951:function(e,a,t){t.d(a,{Z:()=>i});var l=t(9833),s=t(209);let i=(0,s.aZ)({__name:"index",props:{model:{},rules:{},labelWidth:{},labelPlacement:{default:"top"}},setup(e,a){let{expose:t}=a,i=(0,s.iH)(null);return t({validate:()=>{var e;return null===(e=i.value)||void 0===e?void 0:e.validate()},restoreValidation:()=>{var e;return null===(e=i.value)||void 0===e?void 0:e.restoreValidation()}}),(e,a)=>{let t=l.Z;return(0,s.wg)(),(0,s.j4)(t,(0,s.dG)(e.$attrs,{ref_key:"formRef",ref:i,model:e.model,rules:e.rules,"label-width":e.labelWidth,"label-placement":e.labelPlacement}),{default:(0,s.w5)(()=>[(0,s.WI)(e.$slots,"default")]),_:3},16,["model","rules","label-width","label-placement"])}}})},1167:function(e,a,t){t.r(a),t.d(a,{default:()=>eg});var l=t(6582),s=t(5138),i=t(1211),r=t(3447),M=t(209),u=t(2965),d=t(3312),n=t(4203);let{t:o}=t(4958).Z.global,m=()=>n.e.get("/relay/list"),c=e=>n.e.post("/relay/add",e,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.adding")}}),N=e=>n.e.post("/relay/edit",e,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.editing")}}),g=e=>n.e.post("/relay/test_connection",e,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.testing")}}),I=e=>n.e.post("/relay/delete",e,{fetchOptions:{successMessage:!0,loading:o("smtp.api.loading.deleting")}}),p=()=>n.e.get("/relay/get_unbound_domains");var y=t(5476),D=t(9946),j=t(8738);let w={class:"status-text"},T=(0,M.aZ)({__name:"SmtpStatus",props:{value:{type:Boolean,default:!1}},setup:e=>(a,t)=>{let l=j.ZP;return(0,M.wg)(),(0,M.j4)(l,{size:"small",bordered:!1},{default:(0,M.w5)(()=>[(0,M._)("div",{class:(0,M.C_)(["status-icon",e.value?"status-success":"status-error"])},null,2),(0,M._)("div",w,(0,M.zw)(e.value?a.$t("smtp.status.online"):a.$t("smtp.status.offline")),1)]),_:1})}});var v=t(5115);let _=(0,v.default)(T,[["__scopeId","data-v-32ed8e22"]]),L={class:"smtp-card relative rounded-8px p-16px shadow-sm"},A={class:"flex items-center mb-16px"},z={class:"flex items-center flex-1"},x={class:"w-32px h-32px flex items-center justify-center rounded-full bg-primary-100"},S=["src"],h={class:"ml-16px flex items-center gap-10px flex-1 min-w-0"},C={class:"text-18px font-600 truncate"},E={class:"ml-8px"},O={class:"smtp-desc"},f={class:"smtp-info"},b={class:"info-row"},U={class:"info-label"},k={class:"info-value truncate"},Q={class:"info-row"},Y={class:"info-label"},Z={class:"info-value"},W={class:"info-row"},P={class:"info-label"},G={class:"info-value"},R={class:"info-row"},B={class:"info-label"},H={class:"info-value truncate"},F={class:"action-buttons"},J=(0,M.aZ)({__name:"SmtpCard",props:{service:{type:Object,required:!0}},emits:["edit","delete"],setup(e,a){let{emit:t}=a,l=(0,M.Fl)(()=>{switch(e.service.smtp_name){case"Gmail":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMjQgNS40NTd2MTMuOTA5YzAgLjkwNC0uNzMyIDEuNjM2LTEuNjM2IDEuNjM2aC0zLjgxOVYxMS43M0wxMiAxNi42NGwtNi41NDUtNC45MXY5LjI3M0gxLjYzNkExLjYzNiAxLjYzNiAwIDAgMSAwIDE5LjM2NlY1LjQ1N2MwLTIuMDIzIDIuMzA5LTMuMTc4IDMuOTI3LTEuOTY0TDUuNDU1IDQuNjQgMTIgOS41NDhsNi41NDUtNC45MSAxLjUyOC0xLjE0NUMyMS42OSAyLjI4IDI0IDMuNDM0IDI0IDUuNDU3eiIgZmlsbD0iI0QxNDgzNiIvPjwvc3ZnPg==";case"Mailgun":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptMCAxOGMtNC40MSAwLTgtMy41OS04LThzMy41OS04IDgtOCA4IDMuNTkgOCA4LTMuNTkgOC04IDh6IiBmaWxsPSIjRjA0MjNCIi8+PHBhdGggZD0iTTEyIDZjLTMuMzEgMC02IDIuNjktNiA2czIuNjkgNiA2IDYgNi0yLjY5IDYtNi0yLjY5LTYtNi02em0wIDEwYy0yLjIxIDAtNC0xLjc5LTQtNHMxLjc5LTQgNC00IDQgMS43OSA0IDQtMS43OSA0LTQgNHoiIGZpbGw9IiNGMDQyM0IiLz48L3N2Zz4=";case"AWS SES":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTMuMTA2IDEwLjYzM0wyMi44IDEyLjczQTExLjk0NyAxMS45NDcgMCAwIDAgMTIgNC4yYy02LjYyNCAwLTEyIDUuMzc2LTEyIDEyczUuMzc2IDEyIDEyIDEyYzQuOTY4IDAgOS4yNDItMy4wMyAxMS4xMDYtNy4zNDJMMTMuMTA2IDE4Ljc1VjEwLjYzM3oiIGZpbGw9IiNGRjk5MDAiLz48cGF0aCBkPSJNMTQuNCA4LjR2MTAuOEwyNCAxNi44bC05LjYtOC40eiIgZmlsbD0iI0ZGOTkwMCIvPjwvc3ZnPg==";case"SendGrid":return"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0Ij48cGF0aCBkPSJNMTIgMkM2LjQ4IDIgMiA2LjQ4IDIgMTJzNC40OCAxMCAxMCAxMCAxMC00LjQ4IDEwLTEwUzE3LjUyIDIgMTIgMnptLTEgMTVoLTJ2LTZoMnY2em00IDBoLTJ2LTZoMnY2em00LTcuNWMwIC44My0uNjcgMS41LTEuNSAxLjVoLTljLS44MyAwLTEuNS0uNjctMS41LTEuNVY4YzAtLjgzLjY3LTEuNSAxLjUtMS41aDljLjgzIDAgMS41LjY3IDEuNSAxLjV2MS41eiIgZmlsbD0iIzFBODJFMiIvPjwvc3ZnPg==";case"custom":default:return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzQ3NjQwNjIwNDUzIiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjUgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjM4MTciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwLjE5NTMxMjUiIGhlaWdodD0iMjAwIj48cGF0aCBkPSJNODQxLjE0Mjg1NyA3My4xNDI4NTdhMTA5LjcxNDI4NiAxMDkuNzE0Mjg2IDAgMCAxIDEwOS4yMDIyODYgOTkuMTgxNzE0TDk1MC44NTcxNDMgMTgyLjg1NzE0M3YyOTQuMTA3NDI4YTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEtNzIuNTU3NzE0IDYuNTgyODU4TDg3Ny43MTQyODYgNDc2Ljk2NDU3MVYxOTQuMzQwNTcxTDU2OS4wNTE0MjkgNDU5Ljc3NmMtMzIuMTgyODU3IDE5LjUyOTE0My03MS44MjYyODYgMjEuMjExNDI5LTEwOC45MDk3MTUgMi4xMjExNDNsLTEwLjAyMDU3MS01LjcwNTE0M0wxNDYuMjg1NzE0IDE5NC41NnY1NzMuNDRhMzYuNTcxNDI5IDM2LjU3MTQyOSAwIDAgMCAyOS45ODg1NzIgMzUuOTg2Mjg2TDE4Mi44NTcxNDMgODA0LjU3MTQyOWgyMjEuODQyMjg2YTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEgNi41ODI4NTcgNzIuNTU3NzE0bC02LjU4Mjg1NyAwLjU4NTE0M0gxODIuODU3MTQzYTEwOS43MTQyODYgMTA5LjcxNDI4NiAwIDAgMS0xMDkuMjAyMjg2LTk5LjE4MTcxNUw3My4xNDI4NTcgNzY4di01ODUuMTQyODU3YTEwOS43MTQyODYgMTA5LjcxNDI4NiAwIDAgMSA5OS4xODE3MTQtMTA5LjIwMjI4NkwxODIuODU3MTQzIDczLjE0Mjg1N2g2NTguMjg1NzE0eiBtLTE5LjY3NTQyOCA3My4xNDI4NTdIMjAyLjI0TDQ5Mi45ODI4NTcgMzk3LjIzODg1N2E0MC43NDA1NzEgNDAuNzQwNTcxIDAgMCAwIDI5LjI1NzE0MyA1LjA0Njg1N2wzLjk0OTcxNC0xLjQ2Mjg1N0w4MjEuNDY3NDI5IDE0Ni4yODU3MTR6IiBmaWxsPSIjNEM1RDdDIiBwLWlkPSIzODE4Ij48L3BhdGg+PHBhdGggZD0iTTg1Ny41MjY4NTcgNjI2LjM5NTQyOWw1LjYzMiAzLjUxMDg1NyAxNDYuNjUxNDI5IDEwOS40MjE3MTRhMzYuNTcxNDI5IDM2LjU3MTQyOSAwIDAgMSA1LjU1ODg1NyA1My42MTM3MTRsLTUuMjY2Mjg2IDQuODI3NDI5LTE0Mi40ODIyODYgMTA4LjU0NGEzNi41NzE0MjkgMzYuNTcxNDI5IDAgMCAxLTQ5LjIyNTE0Mi01My43Nmw0LjkwMDU3MS00LjM4ODU3MiA1Ni4zMi00My4wMDgtMjU3Ljc1NTQyOSAwLjA3MzE0M2EzNi41NzE0MjkgMzYuNTcxNDI5IDAgMCAxLTYuNTgyODU3LTcyLjU1NzcxNGw2LjU4Mjg1Ny0wLjU4NTE0M0g4NzcuNzE0Mjg2bC01OC4yOTQ4NTctNDMuNTkzMTQzYTM2LjU3MTQyOSAzNi41NzE0MjkgMCAwIDEgMzguMTA3NDI4LTYyLjA5ODI4NXoiIGZpbGw9IiMxNDc2QkIiIHAtaWQ9IjM4MTkiPjwvcGF0aD48L3N2Zz4=";case"local":return"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/PjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+PHN2ZyB0PSIxNzQ3NjQwNjAxODg1IiBjbGFzcz0iaWNvbiIgdmlld0JveD0iMCAwIDEwMjQgMTAyNCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHAtaWQ9IjI3ODIiIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCI+PHBhdGggZD0iTTgyOC44NDg3ODggMTI5LjUwMzYyNGMxNzIuNTAwODc1IDE2OC45MTc3NzEgMTc1LjA2MDIzNSA0NDUuODQwNTQgNi4xNDI0NjQgNjE4LjM0MTQxNWwtNi4xNDI0NjQgNi4xNDI0NjQtMjQzLjY1MTA4NyAyNDAuMDY3OTgzYy00MC40Mzc4OTEgMzkuOTI2MDE4LTEwNS40NDU2MzkgMzkuOTI2MDE4LTE0NS44ODM1MyAwbC0yNDMuNjUxMDg3LTI0MC4wNjc5ODNDMjMuMTYyMjA5IDU4NS4wNjk3MzMgMjAuNjAyODQ5IDMwOC4xNDY5NjMgMTg5LjUyMDYyIDEzNS42NDYwODhsNi4xNDI0NjQtNi4xNDI0NjRjMTc0LjU0ODM2My0xNzIuNTAwODc1IDQ1OC4xMjU0NjktMTcyLjUwMDg3NSA2MzMuMTg1NzA0IDB6TTUxMiAyMzguMDIwNDk1Yy0xMTQuMTQ3NDYzIDAtMjA2Ljc5NjMwMSA5MS4xMTMyMjItMjA2Ljc5NjMwMSAyMDMuNzI1MDY5czkyLjY0ODgzOCAyMDMuNzI1MDY5IDIwNi43OTYzMDEgMjAzLjcyNTA2OCAyMDYuNzk2MzAxLTkxLjExMzIyMiAyMDYuNzk2MzAxLTIwMy43MjUwNjgtOTIuNjQ4ODM4LTIwMy43MjUwNjktMjA2Ljc5NjMwMS0yMDMuNzI1MDY5eiIgZmlsbD0iIzRFNTRDOCIgcC1pZD0iMjc4MyI+PC9wYXRoPjwvc3ZnPg=="}}),s=()=>{t("edit",e.service)},i=()=>{t("delete",e.service)},u=async a=>{await N({id:e.service.id,active:a}),e.service.active=a};return(a,t)=>{let d=D.Z,n=y.ZP,o=r.ZP;return(0,M.wg)(),(0,M.iD)("div",L,[(0,M._)("div",A,[(0,M._)("div",z,[(0,M._)("div",x,[(0,M._)("img",{src:(0,M.SU)(l),class:"w-full h-full object-contain"},null,8,S)]),(0,M._)("div",h,[(0,M._)("div",C,(0,M.zw)(e.service.smtp_name),1),(0,M.Wm)(_,{value:e.service.smtp_status.status},null,8,["value"])])]),(0,M._)("div",E,[(0,M.Wm)(d,{value:e.service.active,"checked-value":1,"unchecked-value":0,"onUpdate:value":u},null,8,["value"])])]),(0,M._)("div",O,(0,M.zw)(e.service.remark),1),(0,M._)("div",f,[(0,M._)("div",b,[(0,M._)("span",U,(0,M.zw)(a.$t("smtp.card.domain"))+"：",1),(0,M._)("span",k,[(0,M.Wm)(n,null,{default:(0,M.w5)(()=>[(0,M.Uk)((0,M.zw)(e.service.sender_domain),1)]),_:1})])]),(0,M._)("div",Q,[(0,M._)("span",Y,(0,M.zw)(a.$t("smtp.card.server"))+"：",1),(0,M._)("span",Z,[(0,M.Wm)(n,null,{default:(0,M.w5)(()=>[(0,M.Uk)((0,M.zw)(e.service.relay_host),1)]),_:1})])]),(0,M._)("div",W,[(0,M._)("span",P,(0,M.zw)(a.$t("smtp.card.port"))+"：",1),(0,M._)("span",G,(0,M.zw)(e.service.relay_port),1)]),(0,M._)("div",R,[(0,M._)("span",B,(0,M.zw)(a.$t("smtp.card.username"))+"：",1),(0,M._)("span",H,(0,M.zw)(e.service.auth_user),1)])]),(0,M._)("div",F,[(0,M.Wm)(o,{secondary:"",class:"action-btn",onClick:s},{icon:(0,M.w5)(()=>t[0]||(t[0]=[(0,M._)("i",{class:"i-mdi-edit"},null,-1)])),_:1}),(0,M.Wm)(o,{secondary:"",class:"action-btn",onClick:i},{icon:(0,M.w5)(()=>t[1]||(t[1]=[(0,M._)("i",{class:"i-mdi-delete"},null,-1)])),_:1})])])}}}),$=(0,v.default)(J,[["__scopeId","data-v-060b5dbe"]]);var V=t(3951),q=t(4603),X=t(6883),K=t(5891),ee=t(1948),ea=t(105),et=t(8454),el=t(5778);let es=(0,M.aZ)({__name:"SmtpForm",setup(e){let{t:a}=(0,el.QT)(),t=(0,M.iH)(!1),l=(0,M.Fl)(()=>t.value?a("smtp.form.editTitle"):a("smtp.form.addTitle")),s=(0,M.iH)(0),i=(0,M.AE)("formRef"),n=(0,M.qj)({rtype:"custom",smtp_name:"",sender_domain:null,relay_host:"",relay_port:587,auth_user:"",auth_password:"",remark:"",active:1}),o={smtp_name:{required:!0,message:a("smtp.form.validation.nameRequired"),trigger:["blur","input"]},sender_domain:{required:!0,message:a("smtp.form.validation.domainRequired"),trigger:["change"]},relay_host:{required:!0,message:a("smtp.form.validation.serverRequired"),trigger:["blur","input"]},relay_port:{required:!0,trigger:["blur","input"],validator:(e,t)=>!!t||Error(a("smtp.form.validation.portRequired"))},auth_user:{required:!0,message:a("smtp.form.validation.usernameRequired"),trigger:["blur","input"]},auth_password:{required:!0,message:a("smtp.form.validation.passwordRequired"),trigger:["blur","input"]}},m=(0,M.iH)([]),I=async()=>{let e=await p();if((0,u.kJ)(e)){let t=e.filter(e=>!e.is_bound);m.value=e.map(e=>({label:`${e.domain}${e.is_bound?a("smtp.form.bind"):""}`,value:e.domain,disabled:e.is_bound})),n.sender_domain||(t.length>0?n.sender_domain=t[0].domain:n.sender_domain=null)}},y={gmail:{smtp_name:"Gmail",relay_host:"smtp.gmail.com",relay_port:587,username:"",password:"",remark:"Gmail"},mailgun:{smtp_name:"Mailgun",relay_host:"smtp.mailgun.org",relay_port:587,username:"",password:"",remark:"Mailgun"},aws:{smtp_name:"AWS SES",relay_host:"email-smtp.us-east-1.amazonaws.com",relay_port:587,username:"",password:"",remark:"AWS SES"},sendgrid:{smtp_name:"SendGrid",relay_host:"smtp.sendgrid.net",relay_port:587,username:"apikey",password:"",remark:"SendGrid"},custom:{smtp_name:"Custom SMTP Relay",relay_host:"",relay_port:587,username:"",password:"",remark:"Custom SMTP Relay"}},D=()=>{let e=y[n.rtype];e&&(n.smtp_name=e.smtp_name,n.relay_host=e.relay_host,n.relay_port=e.relay_port,n.auth_user=e.username,n.auth_password=e.password,n.remark=e.remark)},j=()=>{s.value=0,n.smtp_name="",n.sender_domain="",n.relay_host="",n.relay_port=587,n.auth_user="",n.auth_password="",n.remark="",n.active=1},w=async()=>{var e;await (null===(e=i.value)||void 0===e?void 0:e.validate()),await g({sender_domain:n.sender_domain||"",relay_host:n.relay_host,relay_port:n.relay_port,auth_user:n.auth_user,auth_password:n.auth_password})},T=()=>({rtype:n.rtype,smtp_name:n.smtp_name,sender_domain:n.sender_domain||"",relay_host:n.relay_host,relay_port:n.relay_port,auth_user:n.auth_user,auth_password:n.auth_password,remark:n.remark,active:n.active}),[v,_]=(0,d.d)({onChangeState:e=>{if(e){I();let e=_.getState();if(n.rtype=e.type,t.value=e.isEdit,D(),e.row){let{row:a}=e;s.value=a.id,n.rtype=a.rtype,n.smtp_name=a.smtp_name,n.sender_domain=a.sender_domain,n.relay_host=a.relay_host,n.relay_port=(0,u.Dx)(a.relay_port),n.auth_user=a.auth_user,n.auth_password=a.auth_password,n.remark=a.remark,n.active=a.active}}else j()},onConfirm:async()=>{var e;await (null===(e=i.value)||void 0===e?void 0:e.validate());let a=T();t.value?await N({...a,id:s.value}):await c(a),_.getState().refresh()}});return(e,a)=>{let s=et.Z,u=ea.ZP,d=ee.Z,c=K.Z,N=X.ZP,g=q.Z,I=V.Z,p=r.ZP;return(0,M.wg)(),(0,M.j4)((0,M.SU)(v),{title:(0,M.SU)(l),width:"500"},{"footer-left":(0,M.w5)(()=>[(0,M.Wm)(p,{type:"primary",ghost:"",onClick:w},{default:(0,M.w5)(()=>[(0,M.Uk)((0,M.zw)(e.$t("smtp.form.testConnection")),1)]),_:1})]),default:(0,M.w5)(()=>[(0,M.Wm)(I,{ref_key:"formRef",ref:i,model:(0,M.SU)(n),rules:o,class:"pt-16px"},{default:(0,M.w5)(()=>[(0,M.Wm)(d,{cols:1,"x-gap":24},{default:(0,M.w5)(()=>[(0,M.Wm)(u,{span:1,label:e.$t("smtp.form.remark"),path:"remark"},{default:(0,M.w5)(()=>[(0,M.Wm)(s,{value:(0,M.SU)(n).remark,"onUpdate:value":a[0]||(a[0]=e=>(0,M.SU)(n).remark=e)},null,8,["value"])]),_:1},8,["label"])]),_:1}),(0,M.Wm)(N,{label:e.$t("smtp.form.domain"),path:"sender_domain"},{default:(0,M.w5)(()=>[(0,M.Wm)(c,{value:(0,M.SU)(n).sender_domain,"onUpdate:value":a[1]||(a[1]=e=>(0,M.SU)(n).sender_domain=e),disabled:(0,M.SU)(t),options:(0,M.SU)(m)},null,8,["value","disabled","options"])]),_:1},8,["label"]),(0,M.Wm)(d,{cols:8,"x-gap":24},{default:(0,M.w5)(()=>[(0,M.Wm)(u,{span:6,label:e.$t("smtp.form.server"),path:"relay_host"},{default:(0,M.w5)(()=>[(0,M.Wm)(s,{value:(0,M.SU)(n).relay_host,"onUpdate:value":a[2]||(a[2]=e=>(0,M.SU)(n).relay_host=e)},null,8,["value"])]),_:1},8,["label"]),(0,M.Wm)(u,{span:2,label:e.$t("smtp.form.port"),path:"relay_port"},{default:(0,M.w5)(()=>[(0,M.Wm)(g,{value:(0,M.SU)(n).relay_port,"onUpdate:value":a[3]||(a[3]=e=>(0,M.SU)(n).relay_port=e),class:"flex-1","show-button":!1,min:1},null,8,["value"])]),_:1},8,["label"])]),_:1}),(0,M.Wm)(N,{label:e.$t("smtp.form.username"),path:"auth_user"},{default:(0,M.w5)(()=>[(0,M.Wm)(s,{value:(0,M.SU)(n).auth_user,"onUpdate:value":a[4]||(a[4]=e=>(0,M.SU)(n).auth_user=e)},null,8,["value"])]),_:1},8,["label"]),(0,M.Wm)(N,{label:e.$t("smtp.form.password"),path:"auth_password"},{default:(0,M.w5)(()=>[(0,M.Wm)(s,{value:(0,M.SU)(n).auth_password,"onUpdate:value":a[5]||(a[5]=e=>(0,M.SU)(n).auth_password=e),class:"password-input",type:"password"},null,8,["value"])]),_:1},8,["label"]),(0,M.kq)("",!0)]),_:1},8,["model"])]),_:1},8,["title"])}}});var ei=t(304);let er={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16px"},eM=(0,v.default)({},[["render",function(e,a){let t=ei.Z;return(0,M.wg)(),(0,M.iD)("div",er,[(0,M.Wm)(t,{height:266,sharp:!1}),(0,M.Wm)(t,{height:266,sharp:!1}),(0,M.Wm)(t,{height:266,sharp:!1}),(0,M.Wm)(t,{height:266,sharp:!1}),(0,M.Wm)(t,{height:266,sharp:!1})])}]]),eu={class:"p-24px"},ed={class:"bt-title mb-10px!"},en={class:"mb-20px text-14px text-desc"},eo={class:"flex gap-12px mb-16px"},em={class:"mr-4px"},ec={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-16px"},eN={key:2,class:"flex-center h-400px text-center text-desc"},eg=(0,M.aZ)({__name:"index",setup(e){let{t:a}=(0,el.QT)(),t=(0,M.iH)(!1),n=(0,M.iH)([]),o=[{label:"Gmail",key:"gmail"},{label:"Mailgun",key:"mailgun"},{label:"AWS SES",key:"aws"},{label:"SendGrid",key:"sendgrid"},{label:a("smtp.providers.custom"),key:"custom"}],c=e=>{p.setState({isEdit:!1,type:e,row:null}),p.open()},N=async()=>{try{t.value=!0;let e=await m();(0,u.Kn)(e)&&(n.value=(0,u.kJ)(e.list)?e.list:[])}finally{t.value=!1}},[g,p]=(0,d.d)({component:es,state:{isEdit:!1,type:"custom",refresh:N}}),y=e=>{p.setState({isEdit:!0,row:e}),p.open()},D=e=>{(0,u.iG)({title:a("smtp.delete.title"),content:a("smtp.delete.confirm",{name:e.smtp_name}),onConfirm:async()=>{await I({id:e.id}),N()}})};return N(),(e,a)=>{let u=r.ZP,d=i.Z,m=s.Z,N=l.Z;return(0,M.wg)(),(0,M.iD)("div",eu,[(0,M._)("div",ed,(0,M.zw)(e.$t("smtp.title")),1),(0,M._)("div",en,(0,M.zw)(e.$t("smtp.description")),1),(0,M._)("div",eo,[(0,M.Wm)(d,{placement:"bottom-start",trigger:"hover",size:"large",options:o,onSelect:c},{default:(0,M.w5)(()=>[(0,M.Wm)(u,{type:"primary"},{default:(0,M.w5)(()=>[(0,M._)("span",em,(0,M.zw)(e.$t("common.actions.add")),1),a[0]||(a[0]=(0,M._)("i",{class:"i-mdi-chevron-down text-17px"},null,-1))]),_:1})]),_:1}),(0,M.Wm)(m,{href:"https://www.billionmail.com/docs/start/smtp.html"})]),(0,M.SU)(t)?((0,M.wg)(),(0,M.j4)(eM,{key:0})):(0,M.SU)(n).length>0?((0,M.wg)(),(0,M.iD)("div",ec,[((0,M.wg)(!0),(0,M.iD)(M.HY,null,(0,M.Ko)((0,M.SU)(n),e=>((0,M.wg)(),(0,M.j4)($,{key:e.id,service:e,onEdit:y,onDelete:D},null,8,["service"]))),128))])):((0,M.wg)(),(0,M.iD)("div",eN,[(0,M.Wm)(N,{size:"large",description:"{{ $t('smtp.empty') }}"})])),(0,M.Wm)((0,M.SU)(g))])}}})}}]);