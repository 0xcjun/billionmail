"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([["2884"],{66236:function(e,t,l){l.d(t,{W3:()=>d,ZP:()=>v});var i=l(58786),n=l(56946),a=l(54470),o=l(53198),r=l(19050),u=l(55456),s=l(71309);let c=(0,s.cB)("breadcrumb",`
 white-space: nowrap;
 cursor: default;
 line-height: var(--n-item-line-height);
`,[(0,s.c)("ul",`
 list-style: none;
 padding: 0;
 margin: 0;
 `),(0,s.c)("a",`
 color: inherit;
 text-decoration: inherit;
 `),(0,s.cB)("breadcrumb-item",`
 font-size: var(--n-font-size);
 transition: color .3s var(--n-bezier);
 display: inline-flex;
 align-items: center;
 `,[(0,s.cB)("icon",`
 font-size: 18px;
 vertical-align: -.2em;
 transition: color .3s var(--n-bezier);
 color: var(--n-item-text-color);
 `),(0,s.c)("&:not(:last-child)",[(0,s.cM)("clickable",[(0,s.cE)("link",`
 cursor: pointer;
 `,[(0,s.c)("&:hover",`
 background-color: var(--n-item-color-hover);
 `),(0,s.c)("&:active",`
 background-color: var(--n-item-color-pressed); 
 `)])])]),(0,s.cE)("link",`
 padding: 4px;
 border-radius: var(--n-item-border-radius);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 color: var(--n-item-text-color);
 position: relative;
 `,[(0,s.c)("&:hover",`
 color: var(--n-item-text-color-hover);
 `,[(0,s.cB)("icon",`
 color: var(--n-item-text-color-hover);
 `)]),(0,s.c)("&:active",`
 color: var(--n-item-text-color-pressed);
 `,[(0,s.cB)("icon",`
 color: var(--n-item-text-color-pressed);
 `)])]),(0,s.cE)("separator",`
 margin: 0 8px;
 color: var(--n-separator-color);
 transition: color .3s var(--n-bezier);
 user-select: none;
 -webkit-user-select: none;
 `),(0,s.c)("&:last-child",[(0,s.cE)("link",`
 font-weight: var(--n-font-weight-active);
 cursor: unset;
 color: var(--n-item-text-color-active);
 `,[(0,s.cB)("icon",`
 color: var(--n-item-text-color-active);
 `)]),(0,s.cE)("separator",`
 display: none;
 `)])])]),d=(0,r.U)("n-breadcrumb"),m=Object.assign(Object.assign({},n.Z.props),{separator:{type:String,default:"/"}}),v=(0,i.aZ)({name:"Breadcrumb",props:m,setup(e){let{mergedClsPrefixRef:t,inlineThemeDisabled:l}=(0,a.ZP)(e),r=(0,n.Z)("Breadcrumb","-breadcrumb",c,u.Z,e,t);(0,i.JJ)(d,{separatorRef:(0,i.Vh)(e,"separator"),mergedClsPrefixRef:t});let s=(0,i.Fl)(()=>{let{common:{cubicBezierEaseInOut:e},self:{separatorColor:t,itemTextColor:l,itemTextColorHover:i,itemTextColorPressed:n,itemTextColorActive:a,fontSize:o,fontWeightActive:u,itemBorderRadius:s,itemColorHover:c,itemColorPressed:d,itemLineHeight:m}}=r.value;return{"--n-font-size":o,"--n-bezier":e,"--n-item-text-color":l,"--n-item-text-color-hover":i,"--n-item-text-color-pressed":n,"--n-item-text-color-active":a,"--n-separator-color":t,"--n-item-color-hover":c,"--n-item-color-pressed":d,"--n-item-border-radius":s,"--n-font-weight-active":u,"--n-item-line-height":m}}),m=l?(0,o.F)("breadcrumb",void 0,s,e):void 0;return{mergedClsPrefix:t,cssVars:l?void 0:s,themeClass:null==m?void 0:m.themeClass,onRender:null==m?void 0:m.onRender}},render(){var e;return null==(e=this.onRender)||e.call(this),(0,i.h)("nav",{class:[`${this.mergedClsPrefix}-breadcrumb`,this.themeClass],style:this.cssVars,"aria-label":"Breadcrumb"},(0,i.h)("ul",null,this.$slots))}})},70958:function(e,t,l){l.d(t,{Z:()=>r});var i=l(58786),n=l(93950),a=l(68574),o=l(66236);let r=(0,i.aZ)({name:"BreadcrumbItem",props:{separator:String,href:String,clickable:{type:Boolean,default:!0},onClick:Function},slots:Object,setup(e,{slots:t}){let l=(0,i.f3)(o.W3,null);if(!l)return()=>null;let{separatorRef:r,mergedClsPrefixRef:u}=l,s=function(e=a.j?window:null){let t=()=>{let{hash:t,host:l,hostname:i,href:n,origin:a,pathname:o,port:r,protocol:u,search:s}=(null==e?void 0:e.location)||{};return{hash:t,host:l,hostname:i,href:n,origin:a,pathname:o,port:r,protocol:u,search:s}},l=(0,i.iH)(t()),n=()=>{l.value=t()};return(0,i.bv)(()=>{e&&(e.addEventListener("popstate",n),e.addEventListener("hashchange",n))}),(0,i.SK)(()=>{e&&(e.removeEventListener("popstate",n),e.removeEventListener("hashchange",n))}),l}(),c=(0,i.Fl)(()=>e.href?"a":"span"),d=(0,i.Fl)(()=>s.value.href===e.href?"location":null);return()=>{let{value:l}=u;return(0,i.h)("li",{class:[`${l}-breadcrumb-item`,e.clickable&&`${l}-breadcrumb-item--clickable`]},(0,i.h)(c.value,{class:`${l}-breadcrumb-item__link`,"aria-current":d.value,href:e.href,onClick:e.onClick},t),(0,i.h)("span",{class:`${l}-breadcrumb-item__separator`,"aria-hidden":"true"},(0,n.gI)(t.separator,()=>{var t;return[null!=(t=e.separator)?t:r.value]})))}}})},92314:function(e,t,l){l.d(t,{AB:()=>s,CI:()=>r,Re:()=>c,a3:()=>v,cu:()=>u,de:()=>d,ou:()=>a,uJ:()=>o,v_:()=>m});var i=l(34541);let{t:n}=l(76882).Z.global,a=e=>i.e.get("/overview",{params:e}),o=e=>i.e.get("/overview/failed",{params:e}),r=()=>i.e.get("/postfix_queue/list"),u=e=>i.e.get("/postfix_queue/queue_info",{params:e}),s=e=>i.e.post("/postfix_queue/flush_by_id",e,{fetchOptions:{loading:n("overview.api.loading.resendQueue"),successMessage:!0}}),c=e=>i.e.post("/postfix_queue/delete_by_id",e,{fetchOptions:{loading:n("overview.api.loading.deleteQueue"),successMessage:!0}}),d=()=>i.e.get("/postfix_queue/get_config"),m=e=>i.e.post("/postfix_queue/set_all_config",e,{fetchOptions:{loading:n("overview.api.loading.setQueueConfig"),successMessage:!0}}),v=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return i.e.post("/postfix_queue/delete",e,{fetchOptions:{loading:n("overview.api.loading.clearQueue"),successMessage:!0}})}},4340:function(e,t,l){l.d(t,{Z:()=>u});var i=l(15496),n=l(23685),a=l(58786);let o={class:"flex gap-10px"},r={class:"flex-center w-40px"},u=(0,a.aZ)({__name:"index",props:{data:{type:Array,default:()=>[]},rowKey:{type:Function,required:!0},options:{type:Array,default:()=>[]},checkedRowKeys:{type:Array,default:()=>[]}},emits:["updateCheckedRowKeys","select"],setup(e,t){let{emit:l}=t,u=(0,a.Fl)({get:()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length===e.data.length,set(t){l("updateCheckedRowKeys",t?e.data.map(t=>e.rowKey(t)):[])}}),s=(0,a.Fl)(()=>0===e.data.length),c=(0,a.Fl)(()=>e.checkedRowKeys.length>0&&e.checkedRowKeys.length<e.data.length),d=(0,a.Fl)(()=>0===e.checkedRowKeys.length),m=t=>{l("select",t,e.checkedRowKeys)};return(t,l)=>{let v=n.Z,f=i.ZP;return(0,a.wg)(),(0,a.iD)("div",o,[(0,a._)("div",r,[(0,a.Wm)(v,{checked:(0,a.SU)(u),"onUpdate:checked":l[0]||(l[0]=e=>(0,a.dq)(u)?u.value=e:null),disabled:(0,a.SU)(s),indeterminate:(0,a.SU)(c)},null,8,["checked","disabled","indeterminate"])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.options,e=>((0,a.wg)(),(0,a.j4)(f,{key:e.value,disabled:(0,a.SU)(d),onClick:t=>m(e.value)},{default:(0,a.w5)(()=>[(0,a.Uk)((0,a.zw)(e.label),1)]),_:2},1032,["disabled","onClick"]))),128))])}}})},35856:function(e,t,l){l.r(t),l.d(t,{default:()=>C});var i=l(39244),n=l(4340),a=l(60424),o=l(66236),r=l(70958),u=l(58786),s=l(15496),c=l(93953),d=l(68271),m=l(80947),v=l(92314),f=l(49247),p=l(46244),w=l(6455),h=l(73084);let b=(0,u.aZ)({__name:"param-config",setup(e,t){let{expose:l}=t,i=(0,u.iH)(!1),n=(0,u.qj)({bounce_queue_lifetime:"",maximal_queue_lifetime:"",minimal_backoff_time:"",maximal_backoff_time:"",queue_run_delay:"",trigger_timeout:""}),a=async()=>{let e=await (0,v.de)();(0,d.Kn)(e)&&Object.assign(n,e)},o=async()=>{await (0,v.v_)((0,u.IU)(n))};return l({open:()=>{i.value=!0,a()}}),(e,t)=>{let l=h.Z,a=w.ZP,r=p.Z,s=f.Z;return(0,u.wg)(),(0,u.j4)(s,{show:(0,u.SU)(i),"onUpdate:show":t[6]||(t[6]=e=>(0,u.dq)(i)?i.value=e:null),width:520,title:e.$t("overview.sendQueue.paramConfig.title"),onConfirm:o},{default:(0,u.w5)(()=>[(0,u.Wm)(r,{class:"pt-8px"},{default:(0,u.w5)(()=>[(0,u.Wm)(a,{label:e.$t("overview.sendQueue.paramConfig.fields.bounceQueueLifetime")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(n).bounce_queue_lifetime,"onUpdate:value":t[0]||(t[0]=e=>(0,u.SU)(n).bounce_queue_lifetime=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(a,{label:e.$t("overview.sendQueue.paramConfig.fields.maximalQueueLifetime")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(n).maximal_queue_lifetime,"onUpdate:value":t[1]||(t[1]=e=>(0,u.SU)(n).maximal_queue_lifetime=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(a,{label:e.$t("overview.sendQueue.paramConfig.fields.minimalBackoffTime")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(n).minimal_backoff_time,"onUpdate:value":t[2]||(t[2]=e=>(0,u.SU)(n).minimal_backoff_time=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(a,{label:e.$t("overview.sendQueue.paramConfig.fields.maximalBackoffTime")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(n).maximal_backoff_time,"onUpdate:value":t[3]||(t[3]=e=>(0,u.SU)(n).maximal_backoff_time=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(a,{label:e.$t("overview.sendQueue.paramConfig.fields.queueRunDelay")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(n).queue_run_delay,"onUpdate:value":t[4]||(t[4]=e=>(0,u.SU)(n).queue_run_delay=e)},null,8,["value"])]),_:1},8,["label"]),(0,u.Wm)(a,{label:e.$t("overview.sendQueue.paramConfig.fields.triggerTimeout")},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{value:(0,u.SU)(n).trigger_timeout,"onUpdate:value":t[5]||(t[5]=e=>(0,u.SU)(n).trigger_timeout=e)},null,8,["value"])]),_:1},8,["label"])]),_:1})]),_:1},8,["show","title"])}}});var _=l(60579),g=l(21533);let y=(0,u.aZ)({__name:"queue-logs",setup(e,t){let{expose:l}=t,i=(0,u.iH)(!1),n=(0,u.iH)(!1),a=(0,u.iH)("");return l({open:async e=>{i.value=!0,n.value=!0,a.value="";try{let t=await (0,v.cu)({queue_id:e});(0,d.HD)(t)&&(a.value=t)}finally{n.value=!1}}}),(e,t)=>{let l=g.Z,o=_.Z,r=f.Z;return(0,u.wg)(),(0,u.j4)(r,{show:(0,u.SU)(i),"onUpdate:show":t[0]||(t[0]=e=>(0,u.dq)(i)?i.value=e:null),title:e.$t("overview.sendQueue.queueLogs.title"),width:800,footer:!1},{default:(0,u.w5)(()=>[(0,u.Wm)(o,{show:(0,u.SU)(n)},{default:(0,u.w5)(()=>[(0,u.Wm)(l,{height:"520px",code:(0,u.SU)(a)},null,8,["code"])]),_:1},8,["show"])]),_:1},8,["show","title"])}}});var k=l(52495);let x={class:"p-20px"};function U(e){return"function"==typeof e||"[object Object]"===Object.prototype.toString.call(e)&&!(0,u.lA)(e)}let C=(0,u.aZ)({__name:"index",setup(e){let{t}=(0,k.QT)(),l=(0,u.AE)("configModalRef"),f=(0,u.AE)("logsModalRef"),p=()=>{var e;null==(e=l.value)||e.open()},w=()=>{(0,d.iG)({title:t("overview.sendQueue.confirm.quickClear.title"),content:t("overview.sendQueue.confirm.quickClear.content"),confirmType:"error",onConfirm:async()=>{await (0,v.a3)(),g()}})},{tableProps:h,batchProps:_,fetchTable:g}=(0,m.N)({params:{},fetchFn:v.CI,rowKey:e=>e.queue_id}),C=(0,u.iH)([{width:40,type:"selection"},{key:"queue_id",title:"ID",width:"8%",minWidth:"90px",render:e=>(0,u.Wm)(s.ZP,{type:"primary",text:!0,onClick:()=>{var t;null==(t=f.value)||t.open(e.queue_id)}},{default:()=>[e.queue_id]})},{key:"sender",title:t("overview.sendQueue.table.columns.sender"),width:"10%",minWidth:"120px"},{key:"recipient",title:t("overview.sendQueue.table.columns.recipient"),width:"10%",minWidth:"120px",ellipsis:{tooltip:!0}},{key:"arrival_time",title:t("overview.sendQueue.table.columns.arrivalTime"),width:"12%",minWidth:"130px",render:e=>(0,d.mr)(e.arrival_time)},{key:"message_size",title:t("overview.sendQueue.table.columns.messageSize"),width:"8%",minWidth:"80px",render:e=>(0,d.UO)(e.message_size)},{key:"delay_reason",title:t("overview.sendQueue.table.columns.delayReason"),ellipsis:{tooltip:!0}},{key:"action",title:t("overview.sendQueue.table.columns.action"),align:"right",width:120,render:e=>{let l,i;return(0,u.Wm)(c.Z,{inline:!0},{default:()=>[(0,u.Wm)(s.ZP,{type:"primary",text:!0,onClick:()=>{q(e)}},U(l=t("overview.sendQueue.buttons.resend"))?l:{default:()=>[l]}),(0,u.Wm)(s.ZP,{type:"error",text:!0,onClick:()=>{W(e)}},U(i=t("common.actions.delete"))?i:{default:()=>[i]})]})}}]),q=async e=>{(0,d.iG)({title:t("overview.sendQueue.confirm.resend.title"),content:t("overview.sendQueue.confirm.resend.content"),onConfirm:async()=>{await (0,v.AB)({queue_ids:[e.queue_id]}),g()}})},W=async e=>{(0,d.iG)({title:t("overview.sendQueue.confirm.delete.title"),content:t("overview.sendQueue.confirm.delete.content"),confirmType:"error",onConfirm:async()=>{await (0,v.Re)({queue_ids:[e.queue_id]}),g()}})},Q=[{label:t("overview.sendQueue.buttons.batchDelete"),value:"delete"},{label:t("overview.sendQueue.buttons.batchResend"),value:"resend"}],Z=(e,t)=>{switch(e){case"delete":S(t);break;case"resend":R(t)}},S=async e=>{(0,d.iG)({title:t("overview.sendQueue.confirm.batchDelete.title"),content:t("overview.sendQueue.confirm.batchDelete.content",{count:e.length}),confirmType:"error",onConfirm:async()=>{await (0,v.Re)({queue_ids:e}),g()}})},R=async e=>{(0,d.iG)({title:t("overview.sendQueue.confirm.batchResend.title"),content:t("overview.sendQueue.confirm.batchResend.content",{count:e.length}),onConfirm:async()=>{await (0,v.AB)({queue_ids:e}),g()}})};return(e,t)=>{let c=(0,u.up)("router-link"),d=r.Z,m=o.ZP,v=a.Z,k=n.Z,U=i.Z;return(0,u.wg)(),(0,u.iD)("div",x,[(0,u.Wm)(m,{class:"mb-16px"},{default:(0,u.w5)(()=>[(0,u.Wm)(d,null,{default:(0,u.w5)(()=>[(0,u.Wm)(c,{to:"/overview"},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("layout.menu.overview")),1)]),_:1})]),_:1}),(0,u.Wm)(d,null,{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("overview.sendQueue.title")),1)]),_:1})]),_:1}),(0,u.Wm)(U,null,{toolsLeft:(0,u.w5)(()=>[(0,u.Wm)((0,u.SU)(s.ZP),{type:"primary",onClick:t[0]||(t[0]=e=>(0,u.SU)(g)())},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("overview.sendQueue.buttons.refresh")),1)]),_:1}),(0,u.Wm)((0,u.SU)(s.ZP),{onClick:w},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("overview.sendQueue.buttons.quickClear")),1)]),_:1}),(0,u.Wm)((0,u.SU)(s.ZP),{onClick:p},{default:(0,u.w5)(()=>[(0,u.Uk)((0,u.zw)(e.$t("overview.sendQueue.buttons.paramConfig")),1)]),_:1})]),table:(0,u.w5)(()=>[(0,u.Wm)(v,(0,u.dG)((0,u.SU)(h),{columns:(0,u.SU)(C)}),null,16,["columns"])]),pageLeft:(0,u.w5)(()=>[(0,u.Wm)(k,(0,u.dG)((0,u.SU)(_),{options:Q,onSelect:Z}),null,16)]),modal:(0,u.w5)(()=>[(0,u.Wm)(b,{ref_key:"configModalRef",ref:l},null,512),(0,u.Wm)(y,{ref_key:"logsModalRef",ref:f},null,512)]),_:1})])}}})}}]);